(this["webpackJsonpbearslairs-react"]=this["webpackJsonpbearslairs-react"]||[]).push([[0],{180:function(e,t,a){e.exports=a(343)},185:function(e,t,a){},197:function(e,t,a){},242:function(e,t){},343:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(31),o=a.n(l),c=a(78),i=a(41),s=(a(185),a(35)),u=a(36),m=a(39),h=a(37),d=a(38),p=a(57),g=a(80),f=a.n(g),y=a(81),E=a.n(y),b=a(26),v=a.n(b),k=a(27),C=a.n(k),j=a(84),w=a.n(j),O=a(46),x=a.n(O),S=a(83),I=a.n(S),D=a(176),R=a.n(D),N=(a(197),a(56)),T=a(55),L=T.parse(window.location.search),_=new N.a,B=["bg","en","ru"],G=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={language:"en",copy:{title:"",subtitle:"",languages:[]}},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=B.includes(L.lang)?L.lang:B.includes(_.get("lang"))?_.get("lang"):this.state.language;this.setState((function(e){return{language:t,copy:e.copy}})),_.set("lang",t,{path:"/"}),fetch("https://raw.githubusercontent.com/bearslairs/bearslairs-data/master/copy/"+t+"/nav.json").then((function(e){return e.json()})).then((function(t){e.setState((function(e){return{language:e.language,copy:t}}))})).catch(console.log)}},{key:"render",value:function(){return r.a.createElement("header",{className:"App-header clearfix"},r.a.createElement(p.LinkContainer,{to:"/"},r.a.createElement("h1",{className:"float-left"},this.state.copy.title)),r.a.createElement("h2",{className:"float-left text-muted"},this.state.copy.subtitle),r.a.createElement(p.LinkContainer,{to:"/book"},r.a.createElement(x.a,{className:"float-right"},"book")),r.a.createElement("span",{className:"float-right text-muted"},this.state.copy.languages.map((function(e){return r.a.createElement("a",{key:e,href:"?lang="+e,className:"text-muted"},e)}))))}}]),t}(n.Component),M=T.parse(window.location.search),A=new N.a,H=["bg","en","ru"],J=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={language:"en",copy:{carousel:[],blurbs:[],cards:[]},temperature:{value:0,created_at:"2020-01-01T00:00:01Z"},humidity:{value:0,created_at:"2020-01-01T00:00:01Z"}},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=H.includes(M.lang)?M.lang:H.includes(A.get("lang"))?A.get("lang"):this.state.language;this.setState((function(e){return{language:t,copy:e.copy}})),A.set("lang",t,{path:"/"}),fetch("https://raw.githubusercontent.com/bearslairs/bearslairs-data/master/copy/"+t+"/home.json").then((function(e){return e.json()})).then((function(t){e.setState((function(e){return{language:e.language,copy:t}}))})).catch(console.log),fetch("https://api.ubibot.io/channels/13604?api_key=609210eb2306427a88d662d48ddb578d").then((function(e){return e.json()})).then((function(t){if("success"===t.result){var a=JSON.parse(t.channel.last_values);e.setState((function(e){return{temperature:a.field1,humidity:a.field2}}))}})).catch(console.log)}},{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement(G,null),r.a.createElement(v.a,{style:{paddingTop:"10px"}},r.a.createElement(I.a,null,this.state.copy.carousel.map((function(e,t){return r.a.createElement(I.a.Item,{key:t},r.a.createElement(w.a,{src:e.image.url,alt:e.image.alt,rounded:"true"}),r.a.createElement(I.a.Caption,null,r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.description)))})))),r.a.createElement(v.a,{style:{paddingTop:"10px"}},this.state.copy.blurbs.slice(0,2).map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h4",null,e.title),e.copy.map((function(e,t){return r.a.createElement("p",{key:t},e)})))}))),r.a.createElement(v.a,{style:{padding:"20px"}},r.a.createElement(E.a,null,r.a.createElement(R.a,{theme:"dark",value:Math.round(10*this.state.temperature.value)/10,max:1.3*this.state.temperature.value,steps:"3",format:"\xb0C",size:"large",height:"200"})),r.a.createElement(E.a,{xs:10},r.a.createElement("h4",null,"real-time environment monitoring"),r.a.createElement("p",null,"we monitor temperature, humidity and light within the facility and publish those readings at ",r.a.createElement("a",{href:"https://space.ubibot.io/space/user/device/channel-id/13604"},"ubibot.io/bearslairsbansko")," so our customers can keep informed of the environmental conditions of their self-storage. the latest readings taken were:"),r.a.createElement("dl",null,r.a.createElement("dt",null,"temperature"),r.a.createElement("dd",null,new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",timeZone:"Europe/Sofia"}).format(new Date(this.state.temperature.created_at)),":\xa0",r.a.createElement("strong",null,Math.round(10*this.state.temperature.value)/10,"\xb0C")),r.a.createElement("dt",null,"humidity"),r.a.createElement("dd",null,new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",timeZone:"Europe/Sofia"}).format(new Date(this.state.humidity.created_at)),":\xa0",r.a.createElement("strong",null,this.state.humidity.value,"%"))))),r.a.createElement(v.a,{style:{paddingTop:"10px"}},this.state.copy.cards.slice(0,3).map((function(e,t){return r.a.createElement(C.a,{style:{width:"30%",marginRight:"10px"},key:t},r.a.createElement(C.a.Header,{as:"h3"},e.title,r.a.createElement(w.a,{src:e.icon.url,alt:e.icon.alt,rounded:"true",style:{marginRight:"10px"},className:"float-right"})),r.a.createElement(C.a.Img,{variant:"top",src:e.image.url,alt:e.image.alt,rounded:"true"}),r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Title,null,e.description.join(" ")),r.a.createElement("hr",null),r.a.createElement("ul",null,e.features.map((function(e,t){return r.a.createElement("li",{key:t},e.text,r.a.createElement("ul",null,e.details.map((function(e,t){return r.a.createElement("li",{key:t},e)}))))}))),r.a.createElement(p.LinkContainer,{to:e.button.link},r.a.createElement(x.a,{variant:"primary",className:"float-right"},e.button.text))))}))),r.a.createElement(v.a,{style:{paddingTop:"10px"}},this.state.copy.blurbs.slice(2,4).map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h4",null,e.title),e.copy.map((function(e,t){return r.a.createElement("p",{key:t},e)})))}))),r.a.createElement(v.a,{style:{paddingTop:"10px"}},this.state.copy.cards.slice(3,6).map((function(e,t){return r.a.createElement(C.a,{style:{width:"30%",marginRight:"10px"},key:t},r.a.createElement(C.a.Header,{as:"h3"},e.title,r.a.createElement(w.a,{src:e.icon.url,alt:e.icon.alt,rounded:"true",style:{marginRight:"10px"},className:"float-right"})),r.a.createElement(C.a.Img,{variant:"top",src:e.image.url,alt:e.image.alt,rounded:"true"}),r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Title,null,e.description.join(" ")),r.a.createElement("hr",null),r.a.createElement("ul",null,e.features.map((function(e,t){return r.a.createElement("li",{key:t},e.text,r.a.createElement("ul",null,e.details.map((function(e,t){return r.a.createElement("li",{key:t},e)}))))}))),r.a.createElement(p.LinkContainer,{to:e.button.link},r.a.createElement(x.a,{variant:"primary",className:"float-right"},e.button.text))))}))),r.a.createElement("footer",{className:"clearfix",style:{marginTop:"20px"}},r.a.createElement("p",{className:"text-center text-muted"},r.a.createElement("a",{href:"https://github.com/bearslairs/bearslairs-data/edit/master/copy/"+this.state.language+"/home.json"},"edit this page"))))}}]),t}(n.Component),Z=a(40),F=a(6),P=a.n(F),z=(a(229),a(177)),K=(a(327),a(4)),Q=a.n(K),q=a(85),W=a(59),U=a(102),V=a.n(U),X=a(179),Y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).submit=a.submit.bind(Object(Z.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"submit",value:function(){var e=Object(X.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"checkout"},r.a.createElement("p",null,"enter your payment card details below to complete your reservation"),r.a.createElement(W.CardElement,null),r.a.createElement("hr",null),r.a.createElement(x.a,{variant:"primary",onClick:this.submit},"Purchase"))}}]),t}(r.a.Component),$=Object(W.injectStripe)(Y),ee=T.parse(window.location.search),te=new N.a,ae=["bg","en","ru"],ne=["small","medium","large","bicycle","motorcycle","large-motorcycle"],re=q.c.initializeDefaultAppClient("bearslairsstitch-pkblb"),le=re.getServiceClient(q.b.factory,"mongodb-atlas"),oe=function(e){function t(e,a){var n;Object(s.a)(this,t),n=Object(m.a)(this,Object(h.a)(t).call(this,e,a));var r=ae.includes(ee.lang)?ee.lang:ae.includes(te.get("lang"))?te.get("lang"):"en",l=ne.includes(ee.locker)?ee.locker:"small",o=new Date;o.setHours(14,0,0,0),o.setDate(o.getDate()+1);var c=new Date;return c.setHours(12,0,0,0),c.setMonth(o.getMonth()+3),n.state={reservations:[],language:r,reservation:{from:o.toISOString(),to:c.toISOString(),name:"",email:"",telephone:"",locker:l,language:r},copy:{languages:[]}},n.handleChange=n.handleChange.bind(Object(Z.a)(n)),n.displayReservations=n.displayReservations.bind(Object(Z.a)(n)),n.addReservation=n.addReservation.bind(Object(Z.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){var t=e.target;this.setState((function(e){return e.reservation[t.id]=t.value,e}))}},{key:"componentDidMount",value:function(){var e=this;fetch("https://raw.githubusercontent.com/bearslairs/bearslairs-data/master/copy/"+this.state.language+"/book.json").then((function(e){return e.json()})).then((function(t){e.setState((function(e){return{language:e.language,reservation:e.reservation,copy:t}}))})).catch(console.log),this.db=le.db("bearslairs-bansko"),this.displayReservationsOnLoad()}},{key:"displayReservations",value:function(){var e=this;this.db.collection("reservations").find({},{limit:1e3}).asArray().then((function(t){e.setState({reservations:t})}))}},{key:"displayReservationsOnLoad",value:function(){re.auth.loginWithCredential(new q.a).then(this.displayReservations).catch(console.error)}},{key:"addReservation",value:function(e){e.preventDefault();var t=this.state.reservation;this.db.collection("reservations").insertOne({owner_id:re.auth.user.id,reservation:t}).then(this.displayReservations).catch(console.error)}},{key:"render",value:function(){var e=this;return r.a.createElement(f.a,null,r.a.createElement(G,null),r.a.createElement(v.a,{style:{paddingTop:"10px"}},r.a.createElement("h2",null,"make a reservation")),r.a.createElement(v.a,{style:{paddingTop:"10px"}},r.a.createElement(P.a,{onSubmit:this.addReservation},r.a.createElement(P.a.Group,{controlId:"name"},r.a.createElement(P.a.Label,null,"name"),r.a.createElement(P.a.Control,{type:"text",placeholder:"full name",value:this.state.reservation.name,onChange:this.handleChange})),r.a.createElement(P.a.Group,{controlId:"email"},r.a.createElement(P.a.Label,null,"email"),r.a.createElement(P.a.Control,{type:"email",placeholder:"email",value:this.state.reservation.email,onChange:this.handleChange}),r.a.createElement(P.a.Text,{className:"text-muted"},"we'll never share your email with anyone else.")),r.a.createElement(P.a.Group,{controlId:"telephone"},r.a.createElement(P.a.Label,null,"telephone"),r.a.createElement(P.a.Control,{type:"text",placeholder:"telephone number",value:this.state.reservation.telephone,onChange:this.handleChange})),r.a.createElement(P.a.Group,{controlId:"fromto"},r.a.createElement(P.a.Label,null,"reservation dates"),r.a.createElement("br",null),r.a.createElement(z.DateRangePicker,{startDate:Q()(this.state.reservation.from),startDateId:"reservation_from",endDate:Q()(this.state.reservation.to),endDateId:"reservation_to",onDatesChange:function(t){var a=t.startDate,n=t.endDate;return e.setState((function(e){return e.reservation.from=a.toISOString(),e.reservation.to=n.toISOString(),e}))},focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})}})),r.a.createElement(P.a.Group,{controlId:"locker"},r.a.createElement(P.a.Label,null,"i would like to book storage"),r.a.createElement(P.a.Check,{type:"radio",label:"in a small locker",onChange:function(){return e.setState((function(e){return e.reservation.locker="small",e}))},checked:"small"===this.state.reservation.locker}),r.a.createElement(P.a.Check,{type:"radio",label:"in a medium locker",onChange:function(){return e.setState((function(e){return e.reservation.locker="medium",e}))},checked:"medium"===this.state.reservation.locker}),r.a.createElement(P.a.Check,{type:"radio",label:"in a large locker",onChange:function(){return e.setState((function(e){return e.reservation.locker="large",e}))},checked:"large"===this.state.reservation.locker}),r.a.createElement(P.a.Check,{type:"radio",label:"for a bicycle",onChange:function(){return e.setState((function(e){return e.reservation.locker="bicycle",e}))},checked:"bicycle"===this.state.reservation.locker}),r.a.createElement(P.a.Check,{type:"radio",label:"for a motorcycle",onChange:function(){return e.setState((function(e){return e.reservation.locker="motorcycle",e}))},checked:"motorcycle"===this.state.reservation.locker}),r.a.createElement(P.a.Check,{type:"radio",label:"for a large motorcycle",onChange:function(){return e.setState((function(e){return e.reservation.locker="large-motorcycle",e}))},checked:"large-motorcycle"===this.state.reservation.locker})),r.a.createElement(W.StripeProvider,{apiKey:"pk_test_kSrcl4f2BEKQTkQCIuDih41I000nfCqc5I"},r.a.createElement(W.Elements,null,r.a.createElement($,null))))),"localhost"===window.location.hostname?r.a.createElement(v.a,null,r.a.createElement("pre",null,JSON.stringify(this.state,null,2))):null)}}]),t}(r.a.Component),ce=r.a.createElement(c.BrowserRouter,null,r.a.createElement(i.g,null,r.a.createElement(i.d,{exact:!0,path:"/",component:J}),r.a.createElement(i.d,{path:"/book",component:oe})));o.a.render(ce,document.getElementById("root"))}},[[180,1,2]]]);
//# sourceMappingURL=main.c97b20cc.chunk.js.map