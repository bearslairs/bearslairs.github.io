(this["webpackJsonpbearslairs-serverless-react"]=this["webpackJsonpbearslairs-serverless-react"]||[]).push([[0],{282:function(e,t,a){e.exports=a.p+"static/media/privacy.bf6275f6.md"},283:function(e,t,a){e.exports=a.p+"static/media/terms.a65f2484.md"},308:function(e,t,a){e.exports=a(560)},314:function(e,t,a){},458:function(e,t){},560:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),o=a(31),i=(a(313),a(314),a(315),a(12)),s=a.n(i),u=a(19),m=a(9),d=a(181),p=a(22),b=a(34),f=a(11),h=a(84),E=a(35),y=a(24),g=a(153),v=a(159),k=a(75),x=a(57),w=a(124),C=a(42),j=Object(n.createContext)(null);function O(){return Object(n.useContext)(j)}function T(e){var t=e.children,a=Object(C.a)(e,["children"]),n=Object(p.l)(),c=n.pathname,l=n.search,o=O().isAuthenticated;return r.a.createElement(p.d,a,o?t:r.a.createElement(p.c,{to:"/login?redirect=".concat(c).concat(l)}))}function I(e){var t=e.children,a=Object(C.a)(e,["children"]),n=O().isAuthenticated,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i"),n=a.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}("redirect");return r.a.createElement(p.d,a,n?r.a.createElement(p.c,{to:""===c||null===c?"/":c}):t)}var _=a(26),N=a(65),L=a(279),S=a(281),F=a.n(S);function P(){var e=["/lair-baby.png","/lair-mama.png","/lair-papa.png"],t=["/lair-baby-icon.png","/lair-mama-icon.png","/lair-papa-icon.png"],a=["/bike-rack.png","/bike-small.png","/bike-large.png"],c=["/bike-rack-icon.png","/bike-small-icon.png","/bike-large-icon.png"],l=Object(n.useState)({language:"en",copy:{carousel:[],blurbs:[],cards:[]}}),o=Object(m.a)(l,2),i=o[0],s=o[1],u=Object(n.useState)({temperature:{created_at:Date.now(),value:0},humidity:{created_at:Date.now(),value:0}}),d=Object(m.a)(u,2),p=d[0],g=d[1];return Object(n.useEffect)((function(){fetch("https://raw.githubusercontent.com/bearslairs/bearslairs-data/master/copy/"+i.language+"/home.json").then((function(e){return e.json()})).then((function(e){s({language:i.language,copy:e})})).catch(console.log)}),[i]),Object(n.useEffect)((function(){fetch("https://api.ubibot.io/channels/13604?api_key=609210eb2306427a88d662d48ddb578d").then((function(e){return e.json()})).then((function(e){if("success"===e.result){var t=JSON.parse(e.channel.last_values);g({temperature:t.field1,humidity:t.field2})}})).catch(console.log)}),[p]),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{id:"header",fluid:!0},r.a.createElement("h2",null,"secure self storage in bansko",r.a.createElement("br",null),"with access at your convenience")),r.a.createElement(f.a,{id:"environment"},r.a.createElement("h3",null,"real-time environment monitoring"),r.a.createElement("p",null,"we monitor temperature, humidity and light within the facility and publish those readings at \xa0",r.a.createElement("a",{href:"https://space.ubibot.io/space/user/device/channel-id/13604"},"ubibot.io/bearslairs-bansko"),",",r.a.createElement("br",null),"so our customers can stay informed of the environmetal conditions of their self-storage. The latest readings taken were:"),r.a.createElement(E.a,{className:"justify-content-xl-center justify-content-md-center"},r.a.createElement(y.a,{xl:"auto",md:"auto"},r.a.createElement(F.a,{theme:"dark",value:Math.round(10*p.temperature.value)/10,max:1.3*p.temperature.value,steps:"3",format:"\xb0C",size:"large",height:"200"})),r.a.createElement(y.a,{xl:"auto",md:"auto"},r.a.createElement("h4",null,"temperature"),new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",timeZone:"Europe/Sofia"}).format(new Date(p.temperature.created_at)),":\xa0",r.a.createElement("strong",null,Math.round(10*p.temperature.value)/10,"\xb0C"),r.a.createElement("h4",null,"humidity"),new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",timeZone:"Europe/Sofia"}).format(new Date(p.humidity.created_at)),":\xa0",r.a.createElement("strong",null,p.humidity.value,"%")))),r.a.createElement(f.a,{id:"about",fluid:!0},i.copy.blurbs.slice(0,1).map((function(e,t){return r.a.createElement(f.a,{key:t},r.a.createElement("h3",null,e.title),r.a.createElement(E.a,{className:"justify-content-xl-center justify-content-md-center"},e.copy.map((function(t,a){return r.a.createElement(y.a,{xl:12/e.copy.length,key:a},r.a.createElement(h.a,{src:t.image}),r.a.createElement("p",null,t.text))}))))}))),r.a.createElement(f.a,{id:"security",fluid:!0},r.a.createElement(f.a,null,r.a.createElement(E.a,{className:"justify-content-xl-center justify-content-md-center"},i.copy.blurbs.slice(1,2).map((function(e,t){return r.a.createElement(y.a,{xl:7,key:t},r.a.createElement("h3",null,e.title),e.copy.map((function(e,t){return r.a.createElement("p",{key:t},e)})),r.a.createElement(b.LinkContainer,{to:"/booking/new"},r.a.createElement(N.a,null,"book now")))}))))),r.a.createElement(f.a,{id:"lair"},r.a.createElement("h3",null,"choose your lair"),r.a.createElement(E.a,{className:"justify-content-xl-center justify-content-md-center"},i.copy.cards.slice(0,3).map((function(a,n){return r.a.createElement(y.a,{key:n},r.a.createElement(_.a,{className:"h-100"},r.a.createElement(_.a.Header,null,a.title),r.a.createElement("div",{style:{height:"200px",backgroundImage:"url("+e[n]+")"}},r.a.createElement(h.a,{src:t[n],alt:a.image.alt,style:{marginTop:"25px"}})),r.a.createElement(_.a.Body,null,r.a.createElement(_.a.Title,null,a.description.join(" ")),r.a.createElement("hr",null),r.a.createElement("ul",{style:{lmargin:0,padding:0}},a.features.map((function(e,t){return r.a.createElement("li",{key:t,style:{listStyleType:"none",fontWeight:600,margin:0,padding:0}},e.text,r.a.createElement("ul",{style:{lmargin:0,padding:0}},e.details.map((function(e,t){return r.a.createElement("li",{key:t,style:{listStyleType:"none",fontWeight:"normal",margin:0,padding:0}},e)}))))})))),r.a.createElement(_.a.Footer,null,r.a.createElement(b.LinkContainer,{to:a.button.link},r.a.createElement(N.a,null,a.button.text)))))})))),r.a.createElement(f.a,{id:"adaptive",fluid:!0},i.copy.blurbs.slice(2,3).map((function(e,t){return r.a.createElement(f.a,{key:t},r.a.createElement("h3",null,e.title),r.a.createElement(E.a,{className:"justify-content-xl-center justify-content-md-center"},r.a.createElement(y.a,{xl:7},r.a.createElement("p",null,e.copy[0]))),r.a.createElement("blockquote",{className:"blockquote"},r.a.createElement("p",null,e.copy[1])))}))),r.a.createElement(f.a,{id:"bike",fluid:!0},i.copy.blurbs.slice(3,4).map((function(e,t){return r.a.createElement(f.a,{key:t},r.a.createElement("h3",null,e.title),r.a.createElement(E.a,{className:"justify-content-xl-center justify-content-md-center"},r.a.createElement(y.a,{xl:8},r.a.createElement("p",null,e.copy[0]))))})),r.a.createElement(f.a,null,r.a.createElement(E.a,null,i.copy.cards.slice(3,6).map((function(e,t){return r.a.createElement(y.a,{key:t},r.a.createElement(_.a,{className:"h-100"},r.a.createElement(_.a.Header,null,e.title),r.a.createElement("div",{style:{height:"200px",backgroundImage:"url("+a[t]+")"}},r.a.createElement(h.a,{src:c[t],alt:e.image.alt,style:{marginTop:"25px"}})),r.a.createElement(_.a.Body,null,r.a.createElement(_.a.Title,null,e.description.join(" ")),r.a.createElement("hr",null),r.a.createElement("ul",{style:{lmargin:0,padding:0}},e.features.map((function(e,t){return r.a.createElement("li",{key:t,style:{listStyleType:"none",fontWeight:600,margin:0,padding:0}},e.text,r.a.createElement("ul",{style:{margin:0,padding:0}},e.details.map((function(e,t){return r.a.createElement("li",{key:t,style:{listStyleType:"none",fontWeight:"normal",margin:0,padding:0}},e)}))))})))),r.a.createElement(_.a.Footer,null,r.a.createElement(b.LinkContainer,{to:e.button.link},r.a.createElement(N.a,null,e.button.text)))))}))))),r.a.createElement(f.a,{id:"facility",fluid:!0},i.copy.blurbs.slice(4,5).map((function(e,t){return r.a.createElement(f.a,{key:t},r.a.createElement("h3",null,e.title),r.a.createElement(E.a,{className:"justify-content-xl-center justify-content-md-center"},e.copy.map((function(t,a){return r.a.createElement(y.a,{xl:12/e.copy.length,key:a},r.a.createElement(h.a,{src:t.image}),r.a.createElement("p",null,t.text))}))),r.a.createElement(E.a,{className:"justify-content-xl-center justify-content-md-center"},r.a.createElement(y.a,{xl:"auto",md:"auto"},r.a.createElement(b.LinkContainer,{to:"/booking/new"},r.a.createElement(N.a,null,"book now")))))}))),r.a.createElement(f.a,{id:"map",fluid:!0},r.a.createElement("div",{style:{height:"650px",width:"100%"}},"localhost"===window.location.hostname?null:r.a.createElement(L.a,{bootstrapURLKeys:{key:"AIzaSyCKw8by28pNI5tlimezyyjgtXz_Nvkq2-Y"},defaultCenter:{lat:41.820582,lng:23.478257},defaultZoom:14,onGoogleApiLoaded:function(e){var t=e.map,a=e.maps,n=new a.Marker({position:{lat:41.820582,lng:23.478257},map:t,title:"Bears Lairs, Bansko",description:"secure, self-storage in bansko with access at your convenience",link:{url:"https://www.google.com/maps/place/Bears+Lairs/@41.8223813,23.4681867,15z/data=!4m5!3m4!1s0x0:0xadd4ea4c0b9a3216!8m2!3d41.820631!4d23.478215",text:"maps.google.com/Bears+Lairs"}}),r=new a.InfoWindow({content:'<h4><img src="favicon-32x32.png" style="margin-right: 6px;" class="rounded-circle" />'+n.title+"</h4><p>"+n.description+'<br /><a href="'+n.link.url+'">'+n.link.text+"</a></p>"});r.open(t,n),n.addListener("click",(function(){t.setZoom(14),t.setCenter(n.getPosition()),r.open(t,n)}))}}))))}var D=a(139),M=a.n(D),G=a(282),A=a.n(G);function R(){var e=Object(n.useState)(void 0),t=Object(m.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){fetch(A.a).then((function(e){return e.text()})).then(c)}),[]),r.a.createElement(f.a,{id:"policy"},r.a.createElement(M.a,{source:a}))}var V=a(283),W=a.n(V);function H(){var e=Object(n.useState)(void 0),t=Object(m.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){fetch(W.a).then((function(e){return e.text()})).then(c)}),[]),r.a.createElement(f.a,{id:"policy"},r.a.createElement(M.a,{source:a}))}var q=a(572),J=a(3),U=a(140);function B(e){var t=e.isLoading,a=e.disabled,n=void 0!==a&&a,c=Object(C.a)(e,["isLoading","disabled"]);return r.a.createElement(N.a,Object.assign({disabled:n||t},c),t&&r.a.createElement(U.a,{animation:"border",size:"sm",style:{marginRight:"0.7em"}}),c.children)}var $=a(66),Y=a(16);function z(e){var t=Object(n.useState)(e),a=Object(m.a)(t,2),r=a[0],c=a[1];return[r,function(e){c(Object(Y.a)({},r,Object($.a)({},e.target.id,e.target.value)))}]}function K(e){var t=e.toString();e instanceof Error||!e.message||(t=e.message),alert(t)}var Z="e986bca0-ff41-11ea-8196-af25e422bd08",Q="ff1694c0-ffa8-11ea-bfbc-4f270cb046f3";function X(){var e=Object(p.k)(),t=O().userHasAuthenticated,a=Object(n.useState)(!1),c=Object(m.a)(a,2),l=c[0],i=c[1],b=z({email:"",password:""}),h=Object(m.a)(b,2),E=h[0],y=h[1];function g(){return(g=Object(u.a)(s.a.mark((function a(n){var r;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),i(!0),a.prev=2,a.next=5,d.a.signIn(E.email,E.password);case 5:return t(!0),a.next=8,d.a.currentAuthenticatedUser();case 8:r=a.sent,"custom:stripe_customer_id"in r.attributes||q.a.put("limelockers","/".concat(Z,"/").concat(Q,"/customer"),{body:{email:E.email}}).then(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status&&t.customer&&t.customer.id)){e.next=5;break}return e.next=3,d.a.updateUserAttributes(r,{"custom:stripe_customer_id":t.customer.id});case 3:e.next=6;break;case 5:t.error&&console.log(t.error);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.push("/"),a.next=18;break;case 14:a.prev=14,a.t0=a.catch(2),K(a.t0),i(!1);case 18:case"end":return a.stop()}}),a,null,[[2,14]])})))).apply(this,arguments)}return r.a.createElement(f.a,{id:"login"},r.a.createElement("h2",null,"log in"),r.a.createElement(J.a,{onSubmit:function(e){return g.apply(this,arguments)}},r.a.createElement(J.a.Group,{controlId:"email"},r.a.createElement(J.a.Label,null,"Email"),r.a.createElement(J.a.Control,{autoFocus:!0,type:"email",value:E.email,onChange:y})),r.a.createElement(J.a.Group,{controlId:"password"},r.a.createElement(J.a.Label,null,"Password"),r.a.createElement(J.a.Control,{type:"password",value:E.password,onChange:y})),r.a.createElement(B,{block:!0,type:"submit",isLoading:l,disabled:!(E.email.length>0&&E.password.length>0)},"log-in"),r.a.createElement(o.Link,{to:"/login/reset"},"forgot password?"),r.a.createElement(o.Link,{to:"/signup"},"sign-up")))}function ee(){return r.a.createElement("div",{className:"Settings"},r.a.createElement(b.LinkContainer,{to:"/settings/password"},r.a.createElement(B,{block:!0},"Change Password")))}function te(){var e=Object(p.k)(),t=Object(n.useState)(!1),a=Object(m.a)(t,2),c=a[0],l=a[1],o=z({code:"",email:""}),i=Object(m.a)(o,2),b=i[0],f=i[1],h=Object(n.useState)(!1),E=Object(m.a)(h,2),y=E[0],g=E[1],v=Object(n.useState)(!1),k=Object(m.a)(v,2),x=k[0],w=k[1];function C(e){return j.apply(this,arguments)}function j(){return(j=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w(!0),e.prev=2,e.next=5,d.a.currentAuthenticatedUser();case 5:return a=e.sent,e.next=8,d.a.updateUserAttributes(a,{email:b.email});case 8:l(!0),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),K(e.t0),w(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function O(e){return T.apply(this,arguments)}function T(){return(T=Object(u.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),g(!0),t.prev=2,t.next=5,d.a.verifyCurrentUserAttributeSubmit("email",b.code);case 5:e.push("/settings"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),K(t.t0),g(!1);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})))).apply(this,arguments)}return r.a.createElement("div",null,c?r.a.createElement(J.a,{onSubmit:O},r.a.createElement(J.a.Group,{controlId:"code"},r.a.createElement(J.a.Label,null,"Confirmation Code"),r.a.createElement(J.a.Control,{autoFocus:!0,type:"tel",value:b.code,onChange:f}),r.a.createElement(J.a.Text,null,"Please check your email (",b.email,") for the confirmation code.")),r.a.createElement(B,{block:!0,type:"submit",isLoading:y,disabled:!(b.code.length>0)},"Confirm")):r.a.createElement(J.a,{onSubmit:C},r.a.createElement(J.a.Group,{controlId:"email"},r.a.createElement(J.a.Label,null,"Email"),r.a.createElement(J.a.Control,{autoFocus:!0,type:"email",value:b.email,onChange:f})),r.a.createElement(B,{block:!0,type:"submit",isLoading:x,disabled:!(b.email.length>0)},"Update Email")))}var ae=a(47);function ne(){var e=z({code:"",email:"",password:"",confirmPassword:""}),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(m.a)(l,2),p=i[0],b=i[1],h=Object(n.useState)(!1),E=Object(m.a)(h,2),y=E[0],g=E[1],v=Object(n.useState)(!1),k=Object(m.a)(v,2),x=k[0],w=k[1],C=Object(n.useState)(!1),j=Object(m.a)(C,2),O=j[0],T=j[1];function I(e){return _.apply(this,arguments)}function _(){return(_=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),T(!0),e.prev=2,e.next=5,d.a.forgotPassword(a.email);case 5:b(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),K(e.t0),T(!1);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function N(e){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w(!0),e.prev=2,e.next=5,d.a.forgotPasswordSubmit(a.email,a.code,a.password);case 5:g(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),K(e.t0),w(!1);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}return r.a.createElement(f.a,{id:"password"},r.a.createElement("h2",null,"password reset"),p?y?r.a.createElement("div",{className:"success"},r.a.createElement(ae.a,{icon:"ok"}),r.a.createElement("p",null,"Your password has been reset."),r.a.createElement("p",null,r.a.createElement(o.Link,{to:"/login"},"Click here to login with your new credentials."))):r.a.createElement("form",{onSubmit:N},r.a.createElement(J.a.Group,{controlId:"code"},r.a.createElement(J.a.Label,null,"Confirmation Code"),r.a.createElement(J.a.Control,{autoFocus:!0,type:"tel",value:a.code,onChange:c}),r.a.createElement(J.a.Text,null,"Please check your email (",a.email,") for the confirmation code.")),r.a.createElement("hr",null),r.a.createElement(J.a.Group,{controlId:"password"},r.a.createElement(J.a.Label,null,"New Password"),r.a.createElement(J.a.Control,{type:"password",value:a.password,onChange:c})),r.a.createElement(J.a.Group,{controlId:"confirmPassword"},r.a.createElement(J.a.Label,null,"Confirm Password"),r.a.createElement(J.a.Control,{type:"password",value:a.confirmPassword,onChange:c})),r.a.createElement(B,{block:!0,type:"submit",isLoading:x,disabled:!(a.code.length>0&&a.password.length>0&&a.password===a.confirmPassword)},"Confirm")):r.a.createElement("form",{onSubmit:I},r.a.createElement(J.a.Group,{controlId:"email"},r.a.createElement(J.a.Label,null,"Email"),r.a.createElement(J.a.Control,{autoFocus:!0,type:"email",value:a.email,onChange:c})),r.a.createElement(B,{block:!0,type:"submit",isLoading:O,disabled:!(a.email.length>0)},"Send Confirmation")))}function re(){var e=Object(p.k)(),t=z({password:"",oldPassword:"",confirmPassword:""}),a=Object(m.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),i=Object(m.a)(o,2),b=i[0],h=i[1];function E(){return(E=Object(u.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),h(!0),t.prev=2,t.next=5,d.a.currentAuthenticatedUser();case 5:return n=t.sent,t.next=8,d.a.changePassword(n,c.oldPassword,c.password);case 8:e.push("/settings"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),K(t.t0),h(!1);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))).apply(this,arguments)}return r.a.createElement(f.a,{id:"password"},r.a.createElement(J.a,{onSubmit:function(e){return E.apply(this,arguments)}},r.a.createElement(J.a.Group,{controlId:"oldPassword"},r.a.createElement(J.a.Label,null,"Old Password"),r.a.createElement(J.a.Control,{type:"password",onChange:l,value:c.oldPassword})),r.a.createElement("hr",null),r.a.createElement(J.a.Group,{controlId:"password"},r.a.createElement(J.a.Label,null,"New Password"),r.a.createElement(J.a.Control,{type:"password",onChange:l,value:c.password})),r.a.createElement(J.a.Group,{controlId:"confirmPassword"},r.a.createElement(J.a.Label,null,"Confirm Password"),r.a.createElement(J.a.Control,{type:"password",onChange:l,value:c.confirmPassword})),r.a.createElement(B,{block:!0,type:"submit",disabled:!(c.oldPassword.length>0&&c.password.length>0&&c.password===c.confirmPassword),isLoading:b},"Change Password")))}function ce(){var e=z({email:"",password:"",confirmPassword:"",confirmationCode:""}),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(p.k)(),o=Object(n.useState)(null),i=Object(m.a)(o,2),b=i[0],h=i[1],E=O().userHasAuthenticated,y=Object(n.useState)(!1),g=Object(m.a)(y,2),v=g[0],k=g[1];function x(e){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),k(!0),e.prev=2,e.next=5,d.a.signUp({username:a.email,password:a.password});case 5:n=e.sent,k(!1),h(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),K(e.t0),k(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function C(e){return j.apply(this,arguments)}function j(){return(j=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),k(!0),e.prev=2,e.next=5,d.a.confirmSignUp(a.email,a.confirmationCode);case 5:return e.next=7,d.a.signIn(a.email,a.password);case 7:E(!0),q.a.post("billing/customer/create","/billing/customer/create",{body:{email:a.email,facilityId:"7edad966-198d-4ee2-8802-02f188e8f62c"}}).then(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.status&&t.customer&&t.customer.id?d.a.currentAuthenticatedUser().then((function(e){return d.a.updateUserAttributes(e,{"custom:stripe_customer_id":t.customer.id})})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})):t.error&&console.log(t.error);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l.push("/"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),K(e.t0),k(!1);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"Signup"},null===b?r.a.createElement(f.a,{id:"signup"},r.a.createElement("h2",null,"sign up"),r.a.createElement(J.a,{onSubmit:x},r.a.createElement(J.a.Group,{controlId:"email"},r.a.createElement(J.a.Label,null,"Email"),r.a.createElement(J.a.Control,{autoFocus:!0,type:"email",value:a.email,onChange:c})),r.a.createElement(J.a.Group,{controlId:"password"},r.a.createElement(J.a.Label,null,"Password"),r.a.createElement(J.a.Control,{type:"password",value:a.password,onChange:c})),r.a.createElement(J.a.Group,{controlId:"confirmPassword"},r.a.createElement(J.a.Label,null,"Confirm Password"),r.a.createElement(J.a.Control,{type:"password",onChange:c,value:a.confirmPassword})),r.a.createElement(B,{block:!0,type:"submit",isLoading:v,disabled:!(a.email.length>0&&a.password.length>0&&a.password===a.confirmPassword)},"sign-up"))):r.a.createElement("form",{onSubmit:C},r.a.createElement(J.a.Group,{controlId:"confirmationCode"},r.a.createElement(J.a.Label,null,"Confirmation Code"),r.a.createElement(J.a.Control,{autoFocus:!0,type:"tel",onChange:c,value:a.confirmationCode}),r.a.createElement(J.a.Text,null,"Please check your email for the code.")),r.a.createElement(B,{block:!0,type:"submit",isLoading:v,disabled:!(a.confirmationCode.length>0)},"verify")))}var le=a(292),oe=a(298),ie=a(293),se=a(294),ue=(a(447),a(290)),me=(a(558),a(10)),de=a.n(me),pe=a(291),be=a.n(pe),fe=a(85),he="e986bca0-ff41-11ea-8196-af25e422bd08",Ee="ff1694c0-ffa8-11ea-bfbc-4f270cb046f3";function ye(){var e=Object(fe.useStripe)(),t=Object(fe.useElements)(),a=Object(n.useState)(void 0),c=Object(m.a)(a,2),l=c[0],o=c[1],i={"enclosed lockers":{"baby bear (tiny)":{price:{yearly:{bgn:165,stripe:{priceId:"price_1HUQPyLWkJbcmCTlhflpj73Z",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}},quarterly:{bgn:75},monthly:{bgn:30,stripe:{priceId:"price_1HUQJuLWkJbcmCTl107bvSmv",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}},corona:{bgn:15,stripe:{priceId:"price_1HUQJuLWkJbcmCTl45YXBzw8",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}}},available:{from:new Date("2021-01-01"),units:0},dimensions:{width:50,height:200,depth:50},door:{width:50,height:200},description:"a safe place for snowboards, skis, winter gear and boots",image:"/locker-50w-230h-50d.png"},"mama bear (small)":{price:{yearly:{bgn:550,stripe:{priceId:"price_1HUQPyLWkJbcmCTlHMdvpMU3",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}},quarterly:{bgn:250},monthly:{bgn:100,stripe:{priceId:"price_1HP5T4LWkJbcmCTlj7FbHXD0",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}},corona:{bgn:50,stripe:{priceId:"price_1HP5T4LWkJbcmCTlxM869xeq",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}}},available:{from:new Date("2020-08-01"),units:3},dimensions:{width:100,height:230,depth:250},door:{width:100,height:200},description:"space for bicycles, boxes and luggage",image:"/locker-100w-230h-250d.png"},"mama bear (medium)":{price:{yearly:{bgn:1100,stripe:{priceId:"price_1HUQPyLWkJbcmCTlZkpN5H4E",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}},quarterly:{bgn:500},monthly:{bgn:200,stripe:{priceId:"price_1HP5T4LWkJbcmCTlHGJfSw7g",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}},corona:{bgn:100,stripe:{priceId:"price_1HP5T4LWkJbcmCTljPMcyGlp",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}}},available:{from:new Date("2020-08-01"),units:3},dimensions:{width:200,height:230,depth:250},door:{width:200,height:200},description:"space for bicycles, boxes, small furniture and luggage",image:"/locker-200w-230h-250d.png"},"papa bear (large)":{price:{yearly:{bgn:1320,stripe:{priceId:"price_1HUQPyLWkJbcmCTlVOqTLc7P",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}},quarterly:{bgn:600},monthly:{bgn:240,stripe:{priceId:"price_1HPR7rLWkJbcmCTlJSPWVGa9",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}},corona:{bgn:120,stripe:{priceId:"price_1HPR7rLWkJbcmCTljV8rxWUo",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}}},available:{from:new Date("2020-08-01"),units:2},dimensions:{width:270,height:230,depth:250},door:{width:140,height:200},description:"our largest locker. big enough for a quad bike and tool shop",image:"/locker-270w-230h-250d.png"}},"bike racks & parking":{bicycle:{price:{yearly:{bgn:110,stripe:{priceId:"price_1HUQPyLWkJbcmCTlvtUKumM4",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}},quarterly:{bgn:51},monthly:{bgn:20,stripe:{priceId:"price_1HP5TILWkJbcmCTlcVsJBVg5",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}},corona:{bgn:10,stripe:{priceId:"price_1HP5KKLWkJbcmCTlkSlNJzNb",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}}},available:{from:new Date("2021-03-01"),units:0},description:"dry storage on the rack for bikes with easy access to the pirin national park",image:"/bike-small.png"},"motorcycle (small)":{price:{yearly:{bgn:330,stripe:{priceId:"price_1HUQPyLWkJbcmCTlijwpfJHk",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}},quarterly:{bgn:150},monthly:{bgn:60,stripe:{priceId:"price_1HP5KKLWkJbcmCTlPQWNBBzV",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}},corona:{bgn:30,stripe:{priceId:"price_1HP5KKLWkJbcmCTl9BZlKKi8",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}}},available:{from:new Date("2020-08-01"),units:4},description:"indoor parking for small to medium scooters and enduro bikes up to 500cc",image:"/bike-medium.png"},"motorcycle (large)":{price:{yearly:{bgn:440,stripe:{priceId:"price_1HUQPyLWkJbcmCTlzMiJvvBa",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}},quarterly:{bgn:200},monthly:{bgn:80,stripe:{priceId:"price_1HP5KKLWkJbcmCTliyir2cGp",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}},corona:{bgn:40,stripe:{priceId:"price_1HP5KKLWkJbcmCTlsrJrz7hh",defaultTaxRates:["txr_1HVCMiLWkJbcmCTlGDokfTh3"]}}},available:{from:new Date("2020-08-01"),units:4},description:"indoor parking for large motorcycles",image:"/bike-large.png"}}},p=new Date;p.setHours(14,0,0,0),p.setDate(p.getDate()+1);var b=new Date;b.setHours(12,0,0,0),b.setMonth(p.getMonth()+12);var h=Object(n.useState)({name:"",vat_number:"",email:"",telephone:"",address:"",from:p.toISOString(),months:12,to:b.toISOString(),unit:"".concat(Object.keys(i)[0],"/").concat(Object.keys(i[Object.keys(i)[0]]).find((function(e){return i[Object.keys(i)[0]][e].available.units>0}))),paymentFrequency:"corona",coupon:"",termsAccepted:!1}),g=Object(m.a)(h,2),v=g[0],k=g[1],x=Object(n.useState)(!1),w=Object(m.a)(x,2),j=w[0],O=w[1],T=Object(n.useState)(!1),I=Object(m.a)(T,2),N=I[0],L=I[1],S=Object(n.useState)({}),F=Object(m.a)(S,2),P=F[0],D=F[1],M=Object(n.useState)(!1),G=Object(m.a)(M,2),A=G[0],R=G[1],V=Object(n.useState)(!1),W=Object(m.a)(V,2),H=W[0],z=W[1],K=Object(n.useState)({}),Z=Object(m.a)(K,2),Q=Z[0],X=Z[1],ee=Object(n.useState)({}),te=Object(m.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)({countryCode:"BG",vatNumber:"",name:"",address:""}),ce=Object(m.a)(re,2),me=ce[0],pe=ce[1],ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(n.useRef)(new be.a({messages:e,validators:t}));return[a]}(),ge=Object(m.a)(ye,1)[0],ve=Object(n.useState)({code:void 0,name:void 0,valid:void 0,invalid:void 0,message:void 0,discount:{percent:0,amount:0}}),ke=Object(m.a)(ve,2),xe=ke[0],we=ke[1];Object(n.useEffect)((function(){v.coupon&&v.coupon.length>9&&q.a.post("limelockers","/validation/coupon",{body:{coupon:v.coupon}}).then((function(e){console.log(e),e.error&&"resource_missing"===e.error.code?we((function(e){return Object(Y.a)({},e,{invalid:!0,valid:!1,message:"Unrecognised discount code: ".concat(v.coupon)})})):e.coupon&&e.coupon.valid&&we((function(t){return Object(Y.a)({},t,{name:e.coupon.name,discount:{percent:e.coupon.percent_off||0,amount:e.coupon.amount_off||0},invalid:!1,valid:!0,message:"Discount code applied: ".concat(e.coupon.name)})}))})).catch(console.log)}),[v.coupon]);var Ce={id:void 0,currency:"bgn",amount:{base:0,subtotal:0,total:0},discount:{percent:0,amount:0},vat:{percent:20,amount:0}},je=Object(n.useState)(Ce),Oe=Object(m.a)(je,2),Te=Oe[0],Ie=Oe[1],_e={bgn:"\u043b\u0432"};function Ne(e,t,a,n,r){var c=e.price[t][a],l=r.discount.percent?{percent:r.discount.percent,amount:c*(r.discount.percent/100)}:r.discount,o=e.price[t].stripe.defaultTaxRates.length?{percent:n,amount:(c-l.amount)*(n/100)}:{percent:0,amount:0},i=c-l.amount,s=i+o.amount;return{id:e.price[t].stripe.priceId,currency:a,amount:{base:c,subtotal:i,total:s},discount:l,vat:o}}function Le(){var e=v.unit.split("/"),t=Object(m.a)(e,2),a=t[0],n=t[1];return i[a][n]}function Se(e,t){v.unit!=="".concat(e,"/").concat(t)&&i[e][t].available.units>0&&k((function(a){return Object(Y.a)({},a,{unit:"".concat(e,"/").concat(t)})}))}function Fe(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(u.a)(s.a.mark((function e(t){var a,n,r,c,l,o,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target,n=a.id,r=a.value,c="countryCode"===n?r:me.countryCode,l="vatNumber"===n?r:me.vatNumber,pe({countryCode:c,vatNumber:l}),o={AT:/^ATU[A-Z0-9]{9,9}$/,BE:/^BE[0-9]{10,10}$/,BG:/^BG[0-9]{9,10}$/,CY:/^CY[A-Z0-9]{9,9}$/,CZ:/^CZ[0-9]{8,10}$/,DE:/^DE[0-9]{9,9}$/,DK:/^DK[0-9]{8,8}$/,EE:/^EE[0-9]{9,9}$/,EL:/^EL[0-9]{9,9}$/,ES:/^ES[A-Z0-9]{9,9}$/,FI:/^FI[0-9]{8,8}$/,FR:/^FR[A-Z0-9]{2,2}[0-9]{9,9}$/,GB:/^GB[0-9]{9,9}$|^GB[0-9]{12,12}$|^GBGD[0-9]{3,3}$|^GBHA[0-9]{3,3}$/,HU:/^HU[0-9]{8,8}$/,IE:/^IE[A-Z0-9]{8,8}$/,IT:/^IT[0-9]{11,11}$/,LT:/^LT[0-9]{9,9}$|^LT[0-9]{12,12}$/,LU:/^LU[0-9]{8,8}$/,LV:/^LV[0-9]{11,11}$/,MT:/^MT[0-9]{8,8}$/,NL:/^NL[A-Z0-9]{12,12}$/,PL:/^PL[0-9]{10,10}$/,PT:/^PT[0-9]{9,9}$/,SE:/^SE[0-9]{12,12}$/,SI:/^SI[0-9]{8,8}$/,SK:/^SK[0-9]{10,10}$/},"".concat(c).concat(l).match(o[c])?(ne(Object(Y.a)({},ae,{vat_number:"".concat(c).concat(l," matches a known ").concat(c," VAT number format.")})),"vat_number"in Q&&(Q.vat_number,i=Object(C.a)(Q,["vat_number"]),X(i)),L(!0),q.a.post("limelockers","/validation/vat",{body:{countryCode:c,vatNumber:l}}).then((function(e){if(L(!1),e.status&&e.entity&&e.entity.valid){if(ne(Object(Y.a)({},ae,{vat_number:"".concat(c).concat(l," is registered with VIES.")})),"vat_number"in Q){Q.vat_number;var t=Object(C.a)(Q,["vat_number"]);X(t)}pe({valid:e.entity.valid,name:e.entity.name,address:e.entity.address,countryCode:e.entity.countryCode,vatNumber:e.entity.vatNumber})}else if(e.entity&&!e.entity.valid){if(X(Object(Y.a)({},Q,{vat_number:"".concat(c).concat(l," is not registered with VIES.")})),"vat_number"in ae){ae.vat_number;var a=Object(C.a)(ae,["vat_number"]);ne(a)}}else console.log(e.error?e.error:e)})).catch((function(e){console.log(e)}))):(X(Object(Y.a)({},Q,{vat_number:"".concat(c).concat(l," does not match a known ").concat(c," VAT number format.")})),"vat_number"in ae&&(ae.vat_number,u=Object(C.a)(ae,["vat_number"]),ne(u)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e){var t=e.cancelAt,a=e.customerId,n=e.paymentMethodId,r=e.reservation,c=e.defaultTaxRates,l=e.coupon,o=r.priceId,i=r.unitId,s=r.from,u=r.to,m=[{priceId:o,unitId:i}];return q.a.put("limelockers","/".concat(he,"/").concat(Ee,"/subscription"),{body:{cancelAt:t,customerId:a,items:m,paymentMethodId:n,reservation:{from:s,to:u},defaultTaxRates:c,coupon:l}}).then((function(e){if(!e.status&&e.error)throw e.error;return console.log("[API.put (/".concat(he,"/").concat(Ee,"/subscription) response]"),e),e})).then((function(e){return{paymentMethodId:n,reservation:r,defaultTaxRates:c,subscription:e.subscription}})).then(Me).then(Ae).then(Ge).catch((function(e){console.log("[API.put (/".concat(he,"/").concat(Ee,"/subscription) error]"),e)}))}function Me(t){var a=t.subscription,n=t.invoice,r=t.reservation,c=t.defaultTaxRates,l=t.paymentMethodId,o=t.isRetry;if(a&&"active"===a.status)return{subscription:a,reservation:r,defaultTaxRates:c,paymentMethodId:l};var i=n?n.payment_intent:a.latest_invoice.payment_intent;return"requires_action"===i.status||!0===o&&"requires_payment_method"===i.status?e.confirmCardPayment(i.client_secret,{payment_method:l}).then((function(e){if(e.error)throw e;if("succeeded"===e.paymentIntent.status)return{subscription:a,reservation:r,defaultTaxRates:c,paymentMethodId:l,invoice:n}})).catch((function(e){console.log(e)})):{subscription:a,reservation:r,defaultTaxRates:c,paymentMethodId:l}}function Ge(e){e.subscription.status}function Ae(e){var t=e.subscription,a=e.paymentMethodId,n=e.reservation,r=e.defaultTaxRates;if("active"===t.status)return{subscription:t,paymentMethodId:a,reservation:n,defaultTaxRates:r};if("requires_payment_method"===t.latest_invoice.payment_intent.status)throw localStorage.setItem("latestInvoiceId",t.latest_invoice.id),localStorage.setItem("latestInvoicePaymentIntentStatus",t.latest_invoice.payment_intent.status),{error:{message:"Your card was declined."}};return{subscription:t,paymentMethodId:a,reservation:n,defaultTaxRates:r}}function Re(e){var t=e.customerId,a=e.invoiceId,n=e.paymentMethodId;return q.a.post("limelockers","/".concat(he,"/").concat(Ee,"/invoice"),{body:{customerId:t,invoiceId:a,paymentMethodId:n}}).then((function(e){if(e.error)throw e;return e})).then((function(e){return{invoice:e,paymentMethodId:n,isRetry:!0}})).then(Me).then(Ge).catch((function(e){console.log(e)}))}function Ve(e,t){switch(e){case"BG":return{line1:t.match(/^(.*)\s\u043e\u0431\u043b\./i)[1],city:t.match(/\u0433\u0440\.(.*)\s[0-9]+$/i)[1],state:t.match(/\u043e\u0431\u043b\.(.*),/i)[1],postal_code:t.match(/\s([0-9]*)$/i)[1],country:e};default:return{line1:t,country:e}}}function We(){return(We=Object(u.a)(s.a.mark((function a(n){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.preventDefault(),O(!0),d.a.currentAuthenticatedUser().then(function(){var a=Object(u.a)(s.a.mark((function a(n){var r,c,l,o,i,u,m,p,b,f,h,E,y,g,k,x;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("custom:stripe_customer_id"in(r=n.attributes)){a.next=12;break}return a.next=4,q.a.put("limelockers","/".concat(he,"/").concat(Ee,"/customer"),{body:{email:r.email}});case 4:if(!((c=a.sent).status&&c.customer&&c.customer.id)){a.next=11;break}return a.next=8,d.a.updateUserAttributes(n,{"custom:stripe_customer_id":c.customer.id});case 8:n.attributes["custom:stripe_customer_id"]=c.customer.id,a.next=12;break;case 11:c.error&&console.log(c.error);case 12:if(d.a.updateUserAttributes(n,{name:me.name||v.name,phone_number:v.telephone,address:me.address||v.address,"custom:vat_number":me.valid?"".concat(me.countryCode).concat(me.vatNumber):null}).then((function(e){return console.log("[Auth.updateUserAttributes response]",e)})).catch((function(e){return console.log("[Auth.updateUserAttributes error]",e)})),q.a.post("limelockers","/".concat(he,"/").concat(Ee,"/customer"),{body:Object(Y.a)({customerId:n.attributes["custom:stripe_customer_id"]},(me.valid&&me.name||v.name)&&{name:me.name||v.name},{},(me.valid&&me.address||v.address)&&{address:Ve(me.countryCode,me.address)},{},v.telephone&&{phone:v.telephone},{},me.valid&&{taxId:{type:"eu_vat",value:"".concat(me.countryCode).concat(me.vatNumber)}})}).then((function(e){console.log("[API.post (/".concat(he,"/").concat(Ee,"/customer) response]"),e),e.status&&!e.error||console.log("[user]",n)})).catch((function(e){return console.log("[API.post (/".concat(he,"/").concat(Ee,"/customer) error]"),e)})),e&&t){a.next=16;break}return a.abrupt("return");case 16:return l=t.getElement(fe.CardElement),o=localStorage.getItem("latestInvoicePaymentIntentStatus"),a.next=20,e.createPaymentMethod({type:"card",card:l});case 20:if(i=a.sent,u=i.error,m=i.paymentMethod,!u){a.next=35;break}console.log("[stripe.createPaymentMethod error]",u),a.t0=u.type,a.next="validation_error"===a.t0?28:32;break;case 28:return"card"in ae&&(ae.card,p=Object(C.a)(ae,["card"]),ne(p)),X(Object(Y.a)({},Q,{card:u.message})),O(!1),a.abrupt("break",33);case 32:return a.abrupt("break",33);case 33:a.next=45;break;case 35:console.log("[stripe.PaymentMethod created]",m),ne(Object(Y.a)({},ae,{card:!0})),"card"in Q&&(Q.card,b=Object(C.a)(Q,["card"]),X(b)),f=m.id,h=n.attributes["custom:stripe_customer_id"],E=Le().price[v.paymentFrequency].stripe.defaultTaxRates,y=de()(v.to).format("X"),g=xe.valid?xe.code:void 0,k={priceId:Le().price[v.paymentFrequency].stripe.priceId,unitId:"8e908e30-0792-11eb-a373-e5eab6bc390e",from:de()(v.from).format(),to:de()(v.to).format()},"requires_payment_method"===o?(x=localStorage.getItem("latestInvoiceId"),Re({customerId:h,invoiceId:x,paymentMethodId:f})):De({cancelAt:y,customerId:h,paymentMethodId:f,reservation:k,defaultTaxRates:E,coupon:g}).then((function(e){O(!1)})).catch((function(e){return console.log("[createSubscription error]",e)}));case 45:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){return console.log("[Auth.currentAuthenticatedUser error]",e)}));case 3:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(n.useEffect)((function(){Ie(Ne(Le(),v.paymentFrequency,"bgn",20,xe))}),[xe.discount,v.paymentFrequency,v.unit]),Object(n.useEffect)((function(){l||d.a.currentAuthenticatedUser().then((function(e){o(e)})).catch(console.log)})),Object(n.useEffect)((function(){l&&l.attributes&&(k((function(e){return Object(Y.a)({},e,{name:l.attributes.name?l.attributes.name:e.name,email:l.attributes.email?l.attributes.name:e.email,address:l.attributes.address?l.attributes.address:e.address,telephone:l.attributes.phone_number?l.attributes.phone_number:e.telephone,vat_number:"custom:vat_number"in l.attributes?l.attributes["custom:vat_number"]:e.vat_number})})),"custom:vat_number"in l.attributes&&(z(!0),pe((function(e){return{countryCode:l.attributes["custom:vat_number"].slice(0,2),vatNumber:l.attributes["custom:vat_number"].slice(2),valid:!0,name:l.attributes.name,address:l.attributes.address}}))))}),[l]),Object(n.useEffect)((function(){D((function(e){return Object(Y.a)({},e,{vat_number:!0,name:!0,address:!0})}))}),[me]),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{id:"book-form"},r.a.createElement(J.a,{onSubmit:function(e){return We.apply(this,arguments)},className:"clearfix",noValidate:!0},r.a.createElement(E.a,null,r.a.createElement(y.a,null,r.a.createElement(J.a.Group,null,r.a.createElement(J.a.Check,{type:"checkbox",label:"Do you require a VAT invoice?",checked:H,onChange:function(){z(!H)}})),H?r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a.Label,null,"VAT Number:"),r.a.createElement(J.a.Group,{className:"form-inline"},r.a.createElement(J.a.Control,{style:{marginRight:"10px"},id:"countryCode",as:"select",value:me.countryCode,onChange:Fe},["AT","BE","BG","CY","CZ","DE","DK","EE","EL","ES","FI","FR","GB","HU","IE","IT","LT","LU","LV","MT","NL","PL","PT","SE","SI","SK"].map((function(e){return r.a.createElement("option",{key:e},e)}))),r.a.createElement(J.a.Control,{style:{marginRight:"10px"},id:"vatNumber",type:"text",placeholder:"9999999",value:me.vatNumber,onChange:Fe,isValid:me.valid||!H,isInvalid:!N&&"vat_number"in Q}),N?r.a.createElement(U.a,{style:{marginLeft:"10px"},animation:"border",size:"sm"}):null,r.a.createElement(J.a.Text,{className:"text-muted"},"VAT numbers are validated with the ",r.a.createElement("a",{href:"https://ec.europa.eu/taxation_customs/vies"},"European Commission VIES VAT number validator"),". On verification, your invoice will be addressed to the company name and address registered with VIES."),r.a.createElement(J.a.Text,{style:{color:"rgb(123, 179, 44)"}},ae.vat_number),r.a.createElement(J.a.Text,{className:"text-danger"},Q.vat_number))):null,r.a.createElement(J.a.Group,{controlId:"name"},r.a.createElement(J.a.Label,null,"Name:"),r.a.createElement(J.a.Control,{type:"text",placeholder:"individual or company name",value:me.name||v.name,isValid:ge.current.fieldValid("name"),isInvalid:"name"in P&&!ge.current.fieldValid("name"),onChange:function(e){var t=e.target,a=t.id,n=t.value;k((function(e){return Object(Y.a)({},e,Object($.a)({},a,n))})),D(Object(Y.a)({},P,{name:!0})),ge.current.showMessageFor("name")},disabled:""!==me.name&&me.valid}),r.a.createElement(J.a.Text,{className:"text-muted"},"This name will appear on your invoice. Use your own name or if your company will claim a VAT rebate, check the VAT invoice box above and we'll use the company name associated with your EU registered, VAT number."),r.a.createElement(J.a.Text,null,"name"in P?ge.current.message("name",me.name||v.name,"required",{className:"text-danger",messages:{required:"Please enter a name."}}):null)),r.a.createElement(J.a.Group,{controlId:"telephone"},r.a.createElement(J.a.Label,null,"Telephone:"),r.a.createElement(J.a.Control,{type:"phone",placeholder:"+359 555 123 456",value:v.telephone,isValid:ge.current.fieldValid("telephone"),isInvalid:"telephone"in P&&!ge.current.fieldValid("telephone"),onChange:function(e){var t=e.target,a=t.id,n=t.value;k((function(e){return Object(Y.a)({},e,Object($.a)({},a,n))})),D(Object(Y.a)({},P,{telephone:!0})),ge.current.showMessageFor("telephone")}}),r.a.createElement(J.a.Text,{className:"text-muted"},"This number will receive communications about your self-storage and related billing only."),r.a.createElement(J.a.Text,null,"telephone"in P?ge.current.message("telephone",v.telephone,"required|phone",{className:"text-danger",messages:{required:"Please enter a telephone number."}}):null)),r.a.createElement(J.a.Group,{controlId:"address"},r.a.createElement(J.a.Label,null,"Address"),r.a.createElement(J.a.Control,{as:"textarea",rows:3,value:me.address||v.address,isValid:(me.valid||!H)&&!!v.address,onChange:function(e){var t=e.target,a=t.id,n=t.value;k((function(e){return Object(Y.a)({},e,Object($.a)({},a,n))}))},disabled:""!==me.address&&me.valid}),r.a.createElement(J.a.Text,{className:"text-muted"},"This address will appear on invoices only. We do not send postal mail of any kind."))),r.a.createElement(y.a,null,r.a.createElement(J.a.Group,{controlId:"unit"},r.a.createElement(J.a.Label,null,"Unit Type:"),r.a.createElement("ul",null,Object.keys(i).map((function(e){return r.a.createElement("li",{key:e,className:v.unit.startsWith(e)?"":"text-muted"},r.a.createElement("span",null,e,":"),Object.keys(i[e]).map((function(t){return r.a.createElement(J.a.Check,{key:t},r.a.createElement(J.a.Check.Input,{style:{cursor:"pointer"},type:"radio",disabled:0===i[e][t].available.units,checked:v.unit==="".concat(e,"/").concat(t),onChange:function(){Se(e,t)}}),r.a.createElement(J.a.Check.Label,{style:{cursor:0===i[e][t].available.units?"not-allowed":"pointer"},className:v.unit==="".concat(e,"/").concat(t)?"active":"text-muted",onClick:function(){Se(e,t)}},"".concat(t).concat(0===i[e][t].available.units?" - not available":"")))})))})))),r.a.createElement(J.a.Group,null,r.a.createElement(E.a,null,r.a.createElement(y.a,null,r.a.createElement(J.a.Label,null,"Start Date:"),r.a.createElement("br",null),r.a.createElement(ue.SingleDatePicker,{displayFormat:"MMM DD YYYY",date:de()(v.from),onDateChange:function(e){k((function(t){return Object(Y.a)({},t,{from:e.toISOString(),to:e.add(v.months,"M").toISOString()})}))},focused:A,onFocusChange:function(e){var t=e.focused;return R(t)},id:"from"})),r.a.createElement(y.a,null,r.a.createElement(J.a.Label,null,"yearly"===v.paymentFrequency?"Years":"Months"," Required:"),r.a.createElement("br",null),r.a.createElement(J.a.Control,{id:"months",type:"number",min:1,max:"yearly"===v.paymentFrequency?Math.floor(3):36,value:"yearly"===v.paymentFrequency?Math.floor(v.months/12):v.months,onChange:function(e){var t="yearly"===v.paymentFrequency?12*Math.max(Math.min(parseInt(e.target.value),Math.floor(3)),1):Math.max(Math.min(parseInt(e.target.value),36),1);k((function(e){return Object(Y.a)({},e,{months:t,to:de()(v.from).add(t,"M").toISOString()})}))}})),r.a.createElement(y.a,null,r.a.createElement(J.a.Label,null,"End Date:"),r.a.createElement("br",null),Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric"}).format(new Date(v.to)),"yearly"===v.paymentFrequency?r.a.createElement(J.a.Text,{className:"active"},"".concat(Math.floor(v.months/12)," month").concat(Math.floor(v.months/12)>1?"s":""," free!")):null)),r.a.createElement(J.a.Text,{className:"text-muted"},"Self-storage may be reserved for between 1 and ",36," months (",13*Math.floor(3)," months for annual payment customers). Subject to availability, you may amend your booking to change to an earlier or later end date at any time.")),r.a.createElement(J.a.Group,{controlId:"coupon"},r.a.createElement(J.a.Label,null,"discount code:"),r.a.createElement(J.a.Control,{type:"text",value:v.coupon,isValid:!!xe.valid,isInvalid:!!xe.invalid,disabled:!!xe.valid,onChange:function(e){var t=e.target,a=t.id,n=t.value;k((function(e){return Object(Y.a)({},e,Object($.a)({},a,n))}))}}),r.a.createElement(J.a.Text,{className:xe.message?xe.invalid?"text-danger":"text-success":"text-muted"},xe.message?xe.message:"If you have a discount code, enter it here.")),r.a.createElement(J.a.Group,null,r.a.createElement(J.a.Check,null,r.a.createElement(J.a.Check.Input,{style:{cursor:"pointer"},type:"radio",disabled:!1,checked:"yearly"!==v.paymentFrequency,onChange:function(e){k((function(e){return Object(Y.a)({},e,{paymentFrequency:"corona"})}))}}),r.a.createElement(J.a.Check.Label,{style:{cursor:0===Le().available.units?"not-allowed":"pointer"},className:"yearly"!==v.paymentFrequency?"active":"text-muted",onClick:function(e){k((function(e){return Object(Y.a)({},e,{paymentFrequency:"corona"})}))}},"monthly payment: ",r.a.createElement("span",null,xe.valid?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"text-muted",style:{textDecoration:"line-through",color:"#000000"}},"\u043b\u0432",Number.parseFloat(1.2*Le().price.corona.bgn).toFixed(2)),"\xa0",r.a.createElement("span",null,"\u043b\u0432",Number.parseFloat(Ne(Le(),"corona","bgn",20,xe).amount.total).toFixed(2))):Number.parseFloat(1.2*Le().price.corona.bgn).toFixed(2)," bgn")," per month")),r.a.createElement(J.a.Check,null,r.a.createElement(J.a.Check.Input,{style:{cursor:"pointer"},type:"radio",disabled:!1,checked:"yearly"===v.paymentFrequency,onChange:function(e){k((function(e){return Object(Y.a)({},e,{paymentFrequency:"yearly"})}))}}),r.a.createElement(J.a.Check.Label,{style:{cursor:0===Le().available.units?"not-allowed":"pointer"},className:"yearly"===v.paymentFrequency?"active":"text-muted",onClick:function(e){k((function(e){return Object(Y.a)({},e,{paymentFrequency:"yearly"})}))}},"annual payment: ",r.a.createElement("span",null,xe.valid?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"text-muted",style:{textDecoration:"line-through",color:"#000000"}},"\u043b\u0432",Number.parseFloat(1.2*Le().price.yearly.bgn).toFixed(2)),"\xa0",r.a.createElement("span",null,"\u043b\u0432",Number.parseFloat(Ne(Le(),"yearly","bgn",20,xe).amount.total).toFixed(2))):Number.parseFloat(1.2*Le().price.yearly.bgn).toFixed(2)," bgn")," per year")),r.a.createElement(J.a.Text,{className:"text-muted"},"Customers choosing the annual payment option will receive 12 months for the price of 11.",r.a.createElement("br",null),"- A saving of ",r.a.createElement("span",null,"\u043b\u0432",Number.parseFloat(1.2*Le().price.corona.bgn).toFixed(2)," bgn")," per year.")),r.a.createElement("hr",null),r.a.createElement(le.a,{size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-muted"},"description"),r.a.createElement("th",{className:"text-muted text-right"},"qty"),r.a.createElement("th",{className:"text-muted text-right"},"unit price"),r.a.createElement("th",{className:"text-muted text-right"},"amount"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4",className:"text-muted"},de()(v.from).format("MMM D, YYYY"),"\xa0-\xa0",de()(v.from).add(1,"yearly"===v.paymentFrequency?"Y":"M").format("MMM D, YYYY"))),r.a.createElement("tr",null,r.a.createElement("td",null,v.unit),r.a.createElement("td",{className:"text-right"},"1"),r.a.createElement("td",{className:"text-right text-muted"},_e.bgn,"yearly"===v.paymentFrequency?Number.parseFloat(Te.amount.base/11*12).toFixed(2):Number.parseFloat(Te.amount.base).toFixed(2)),r.a.createElement("td",{className:"text-right"},_e.bgn,"yearly"===v.paymentFrequency?Number.parseFloat(Te.amount.base/11*12).toFixed(2):Number.parseFloat(Te.amount.base).toFixed(2))),"yearly"===v.paymentFrequency?r.a.createElement("tr",{className:"active"},r.a.createElement("td",{colSpan:"3",className:"text-right"},"discount: ",r.a.createElement("em",null,"annual payment")," (1 month free)"),r.a.createElement("td",{className:"text-right"},"- ",_e.bgn,Number.parseFloat(Te.amount.base/11).toFixed(2))):null,Te.discount.amount?r.a.createElement("tr",{className:"active"},r.a.createElement("td",{colSpan:"3",className:"text-right"},"discount: ",r.a.createElement("em",null,xe.name)," (",Te.discount.percent,"%)"),r.a.createElement("td",{className:"text-right"},"- ",_e.bgn,Number.parseFloat(Te.discount.amount).toFixed(2))):null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"3",className:"text-right"},"subtotal"),r.a.createElement("td",{className:"text-right"},_e.bgn,Number.parseFloat(Te.amount.subtotal).toFixed(2))),Te.vat.amount?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"3",className:"text-muted text-right"},"VAT - Bulgaria (",Te.vat.percent,"%)"),r.a.createElement("td",{className:"text-right"},_e.bgn,Number.parseFloat(Te.vat.amount).toFixed(2))):null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"3",className:"text-right"},"total"),r.a.createElement("td",{className:"text-right"},_e.bgn,Number.parseFloat(Te.amount.total).toFixed(2))))),r.a.createElement("hr",null),r.a.createElement(J.a.Group,null,r.a.createElement(J.a.Label,null,"Payment Card:"),r.a.createElement(fe.CardElement,{id:"stripe-payment-method",onChange:function(){if("card"in Q){Q.card;var e=Object(C.a)(Q,["card"]);X(e)}},options:{style:{base:{color:"rgb(48, 11, 11)",fontFamily:"Roboto, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"},iconColor:"#ff3399"},invalid:{color:"#fa755a",iconColor:"#fa755a"}}}}),r.a.createElement(J.a.Text,{className:"text-danger"},Q.card),r.a.createElement(J.a.Text,{className:"text-muted"},"You have requested use of self-storage space for a period of ",v.months/("yearly"===v.paymentFrequency?12:1)," ","yearly"===v.paymentFrequency?"years":"months",".",r.a.createElement("br",null),v.months/("yearly"===v.paymentFrequency?12:1)>1?r.a.createElement("span",null,"Subscription payments will be debited from your chosen payment method today and will repeat each ","yearly"===v.paymentFrequency?"year":"month","."):r.a.createElement("span",null,"One payment will be debited from your chosen payment method, when you submit this form."))),r.a.createElement(J.a.Group,null,r.a.createElement(J.a.Check,{type:"checkbox",label:r.a.createElement("span",null,"I have read and accepted the ",r.a.createElement("a",{href:"/terms",target:"_blank"},"terms and conditions"),"."),checked:v.termsAccepted,onChange:function(){k((function(e){return Object(Y.a)({},e,{termsAccepted:!e.termsAccepted})}))}})))),r.a.createElement(B,{type:"submit",className:"float-right",isLoading:j,disabled:!(0===Object.keys(Q).length&&ge.current.allValid()&&e&&t&&v.termsAccepted)},"reserve and pay"))),r.a.createElement(f.a,{id:"book-units"},r.a.createElement(oe.a,{activeKey:v.unit.split("/")[0],onSelect:function(e){return function(e){v.unit.startsWith(e)||Se(e,Object.keys(i[e]).find((function(t){return i[e][t].available.units>0})))}(e)}},Object.keys(i).map((function(e){return r.a.createElement(ie.a,{key:e,eventKey:e,title:e},r.a.createElement(se.a,null,Object.keys(i[e]).map((function(t){return r.a.createElement(_.a,{key:t,className:v.unit==="".concat(e,"/").concat(t)?"active":"text-muted",onClick:function(){return Se(e,t)}},r.a.createElement(_.a.Header,{style:{cursor:"pointer"},as:"div"},r.a.createElement("span",{className:"float-right availability-".concat(i[e][t].available.units<1?"zero":i[e][t].available.units<3?"low":"high")},"available: ",r.a.createElement("strong",null,i[e][t].available.units))),r.a.createElement(_.a.Img,{variant:"top",src:i[e][t].image,className:"mx-auto",style:{cursor:"pointer",width:"100%",opacity:v.unit==="".concat(e,"/").concat(t)?1:.2}}),r.a.createElement(_.a.Body,null,r.a.createElement(_.a.Title,null,t),r.a.createElement(_.a.Text,null,i[e][t].description),r.a.createElement(_.a.Text,{as:"div"},r.a.createElement("strong",null,"unit price:"),r.a.createElement("ul",null,r.a.createElement("li",{className:"price inactive"},"\u043b\u0432",Number.parseFloat(1.2*i[e][t].price.monthly.bgn).toFixed(2)," bgn monthly"),r.a.createElement("li",{className:"price inactive"},"\u043b\u0432",Number.parseFloat(1.2*i[e][t].price.quarterly.bgn).toFixed(2)," bgn quarterly"),r.a.createElement("li",{className:"price active"},r.a.createElement("span",null,"\u043b\u0432",Number.parseFloat(1.2*i[e][t].price.yearly.bgn).toFixed(2)," bgn")," yearly"),r.a.createElement("li",{className:"price active"},r.a.createElement("span",null,"\u043b\u0432",Number.parseFloat(1.2*i[e][t].price.corona.bgn).toFixed(2)," bgn")," monthly"))),i[e][t].dimensions&&r.a.createElement(_.a.Text,{as:"div"},r.a.createElement("strong",null,"locker size"),r.a.createElement("ul",null,Object.keys(i[e][t].dimensions).map((function(a){return r.a.createElement("li",{key:a},a,": ",i[e][t].dimensions[a]/100," meter")})),r.a.createElement("li",null,"area: ",(i[e][t].dimensions.width/100*(i[e][t].dimensions.depth/100)).toFixed(1)," m",r.a.createElement("sup",null,"2")),r.a.createElement("li",null,"volume: ",(i[e][t].dimensions.width/100*(i[e][t].dimensions.height/100)*(i[e][t].dimensions.depth/100)).toFixed(1)," m",r.a.createElement("sup",null,"3"))),r.a.createElement("strong",null,"door size"),r.a.createElement("ul",null,Object.keys(i[e][t].door).map((function(a){return r.a.createElement("li",{key:a},a,": ",i[e][t].door[a]/100," meter")}))))))}))))}))),r.a.createElement("ul",null,r.a.createElement("li",{className:"price active"},r.a.createElement("span",null,"opening special"),": 50% off monthly prices!"),r.a.createElement("li",{className:"price active"},r.a.createElement("span",null,"annual prepayment"),": Twelve months for the price of eleven!"))))}function ge(){var e=Object(n.useState)(void 0),t=Object(m.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){a||(q.a.get("limelockers","/".concat("e986bca0-ff41-11ea-8196-af25e422bd08","/").concat("ff1694c0-ffa8-11ea-bfbc-4f270cb046f3","/subscriptions")).then((function(e){e.status&&e.subscriptions&&c(e.subscriptions)})).catch(console.log),q.a.get("limelockers","/".concat("e986bca0-ff41-11ea-8196-af25e422bd08","/").concat("ff1694c0-ffa8-11ea-bfbc-4f270cb046f3","/catalog")).then(console.log).catch(console.log))})),r.a.createElement(f.a,{id:"bookings"},a&&a.total_count?r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",null,a.data.map((function(e){return r.a.createElement("li",{key:e.id},"subscription: ",e.id,r.a.createElement("br",null),de()(1e3*e.start_date).format(),"\xa0-\xa0",de()(1e3*e.canceled_at).format(),r.a.createElement("ul",null,e.items.data.map((function(e){return r.a.createElement("li",{key:e.id},e.price.nickname.replace("corona ",""),r.a.createElement("br",null),Number.parseFloat(e.price.unit_amount/100).toFixed(2)," ",e.price.currency," / ",e.price.recurring.interval,r.a.createElement("br",null))}))))})))):null,r.a.createElement("pre",null,JSON.stringify(a,null,2)))}function ve(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Sorry, page not found!"))}function ke(){return r.a.createElement(p.g,null,r.a.createElement(p.d,{exact:!0,path:"/"},r.a.createElement(P,null)),r.a.createElement(p.d,{exact:!0,path:"/privacy"},r.a.createElement(R,null)),r.a.createElement(p.d,{exact:!0,path:"/terms"},r.a.createElement(H,null)),r.a.createElement(I,{exact:!0,path:"/login"},r.a.createElement(X,null)),r.a.createElement(I,{exact:!0,path:"/login/reset"},r.a.createElement(ne,null)),r.a.createElement(I,{exact:!0,path:"/signup"},r.a.createElement(ce,null)),r.a.createElement(T,{exact:!0,path:"/booking/new"},r.a.createElement(ye,null)),r.a.createElement(T,{exact:!0,path:"/booking/list"},r.a.createElement(ge,null)),r.a.createElement(T,{exact:!0,path:"/settings"},r.a.createElement(ee,null)),r.a.createElement(T,{exact:!0,path:"/settings/email"},r.a.createElement(te,null)),r.a.createElement(T,{exact:!0,path:"/settings/password"},r.a.createElement(re,null)),r.a.createElement(p.d,null,r.a.createElement(ve,null)))}var xe=a(87);var we=function(){var e=Object(p.k)(),t=Object(p.l)(),a=encodeURI("I'd like to book a locker"),c={latitude:41.820626,longitude:23.478217,address:encodeURI('Bears Lairs, ul. "Kosherinata", 2770 \u043a\u0432. \u0413\u0440\u0430\u043c\u0430\u0434\u0435\u0442\u043e, Bansko'),waypoints:[{latitude:41.820112,longitude:23.47402}],id:"ChIJcywcFXevqxQRFjKaC0zq1K0"},l=xe.isMobile?xe.isAndroid?"intent://send/".concat("+359877804825","#Intent;scheme=smsto;package=com.whatsapp;action=android.intent.action.SENDTO;end"):"https://wa.me/".concat("+359877804825","?text=").concat(a):xe.isFirefox||xe.isSafari?"https://web.whatsapp.com/send?phone=".concat("+359877804825","&text=").concat(a):"whatsapp://send?phone=".concat("+359877804825","&text=").concat(a),o=xe.isAndroid?"intent://send/".concat("+359877804825","#Intent;scheme=smsto;package=com.viber;action=android.intent.action.SENDTO;end"):"viber://chat?number=".concat("+359877804825","&text=").concat(a),i=xe.isAndroid?"intent://geo:".concat(c.latitude,",").concat(c.longitude,"?destination=").concat(c.address,"/@").concat(c.latitude,",").concat(c.longitude,"&destination_place_id=").concat(c.id,"&waypoints=").concat(c.waypoints.map((function(e){return e.latitude+","+e.longitude})).join("|"),"#Intent;scheme=directions;package=com.google.android.apps.maps;action=android.intent.action.ACTION_VIEW;end"):"https://www.google.com/maps/dir/?api=1&destination=".concat(c.address,"/@").concat(c.latitude,",").concat(c.longitude,"&destination_place_id=").concat(c.id,"&waypoints=").concat(c.waypoints.map((function(e){return e.latitude+","+e.longitude})).join("|")),C=Object(n.useState)(!0),O=Object(m.a)(C,2),T=O[0],I=O[1],_=Object(n.useState)(!1),N=Object(m.a)(_,2),L=N[0],S=N[1];function F(){return(F=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.currentSession();case 3:S(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),"No current user"!==e.t0&&K(e.t0);case 9:I(!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function P(){return(P=Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.signOut();case 2:S(!1),e.push("/login");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){F.apply(this,arguments)}()}),[]),!T&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{fluid:!0},r.a.createElement(E.a,null,r.a.createElement(b.LinkContainer,{to:"/",style:{cursor:"pointer"}},r.a.createElement(h.a,{src:"/logo.png",className:"m-auto"}))),r.a.createElement(v.a,{collapseOnSelect:!0,expand:"lg"},r.a.createElement(v.a.Toggle,{"aria-controls":"site-nav"}),r.a.createElement(v.a.Collapse,{id:"site-nav"},r.a.createElement(g.a,{className:"mr-auto"},"/booking/new"!==t.pathname?r.a.createElement(b.LinkContainer,{to:"/booking/new"},r.a.createElement(x.a,{className:"btn"},"book now")):null)),r.a.createElement("span",null,r.a.createElement(ae.a,{className:"fa-sm fa-flip-horizontal",icon:"phone"}),"\xa0",r.a.createElement("span",{className:"text-muted"},"+359")," ",r.a.createElement("strong",null,"(0) 877 804 825"),"\xa0",r.a.createElement(w.a,{placement:"top",delay:{show:250,hide:400},overlay:r.a.createElement("div",{className:"rounded-pill",style:{fontSize:"2em",backgroundColor:"#fff",padding:"20px"}},r.a.createElement(ae.a,{icon:["fab","viber"],color:"#665ca7"}),"\xa0 Send us a Viber message")},r.a.createElement("a",{href:o},r.a.createElement(ae.a,{icon:["fab","viber"],color:"#665ca7"}))),"\xa0 \xa0",r.a.createElement(w.a,{placement:"top",delay:{show:250,hide:400},overlay:r.a.createElement("div",{className:"rounded-pill",style:{fontSize:"2em",backgroundColor:"#fff",padding:"20px"}},r.a.createElement(ae.a,{icon:["fab","whatsapp-square"],color:"#0dc143"}),"\xa0 Send us a WhatsApp message")},r.a.createElement("a",{href:l,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(ae.a,{icon:["fab","whatsapp-square"],color:"#0dc143"}))),"\xa0 \xa0",r.a.createElement(w.a,{placement:"top",delay:{show:250,hide:400},overlay:r.a.createElement("div",{className:"rounded-pill",style:{fontSize:"2em",backgroundColor:"#fff",padding:"20px"}},r.a.createElement(ae.a,{icon:["fab","facebook"],color:"#4862a3"}),"\xa0 Find us on Facebook")},r.a.createElement("a",{href:"https://www.facebook.com/BearsLairsBansko",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(ae.a,{icon:["fab","facebook"],color:"#4862a3"}))),"\xa0 \xa0",r.a.createElement(w.a,{placement:"top",delay:{show:250,hide:400},overlay:r.a.createElement("div",{className:"rounded-pill",style:{fontSize:"2em",backgroundColor:"#fff",padding:"20px"}},r.a.createElement(ae.a,{icon:["fas","map-marked-alt"],color:"#cccccc"}),"\xa0 Get directions")},r.a.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(ae.a,{icon:["fas","map-marked-alt"],color:"#ccccc"})))),r.a.createElement(k.a,{className:"pull-right",title:r.a.createElement(ae.a,{className:"fa-sm",icon:[L?"fas":"far","user"]}),drop:"left"},L?r.a.createElement(r.a.Fragment,null,r.a.createElement(b.LinkContainer,{to:"/settings/password"},r.a.createElement(k.a.Item,null,"change password")),r.a.createElement(b.LinkContainer,{to:"/booking/list"},r.a.createElement(k.a.Item,null,"bookings")),r.a.createElement(k.a.Divider,null),r.a.createElement(k.a.Item,{onClick:function(){return P.apply(this,arguments)}},"log-out")):r.a.createElement(r.a.Fragment,null,r.a.createElement(b.LinkContainer,{to:"/signup"},r.a.createElement(k.a.Item,null,"sign-up")),r.a.createElement(b.LinkContainer,{to:"/login"},r.a.createElement(k.a.Item,null,"log-in")))))),r.a.createElement(j.Provider,{value:{isAuthenticated:L,userHasAuthenticated:S}},r.a.createElement(ke,null)),r.a.createElement(f.a,{id:"footer",fluid:!0},r.a.createElement(f.a,null,r.a.createElement(E.a,{className:"justify-content-xl-center justify-content-md-center"},r.a.createElement(y.a,{xl:6},r.a.createElement(b.LinkContainer,{to:"/privacy"},r.a.createElement(x.a,{as:"a"},"privacy")),"\xa0|\xa0",r.a.createElement(b.LinkContainer,{to:"/terms"},r.a.createElement(x.a,{as:"a"},"terms and conditions")),"\xa0|\xa0",r.a.createElement("a",{href:"mailto:info@bearslairs.eu"},"info@bearslairs.eu"),r.a.createElement("hr",null),"\xa9 2020, Bears Lairs EOOD, Bulgaria. All rights reserved")))))},Ce=a(71),je=a(295),Oe={REGION:"us-east-1",BUCKET:"bearslairs-api-dev-serverlessdeploymentbucket-1tt1ibsw7svan"},Te={REGION:"us-east-1",URL:"https://hy1sab4b1f.execute-api.us-east-1.amazonaws.com/dev"},Ie={REGION:"us-east-1",USER_POOL_ID:"us-east-1_nhmWSzeBZ",APP_CLIENT_ID:"6ejs5t57eraer0urepjm6lmi0h",IDENTITY_POOL_ID:"us-east-1:06ca8ae5-f4de-4373-8a72-de5637b22559"},_e=a(119),Ne=a(296),Le=a(157),Se=a(158);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));_e.b.add(Le.b,Se.a,Se.c,Se.b,Le.a,Ne.a,Le.c);var Fe=Object(je.a)("pk_test_51GskzHLWkJbcmCTlYQ1pisYlrbICWZ8bWVTNVIvU3hS6XYTYH3ls2PaxikdzE8zmJLr5VrsSp1gxTkqkMm5DV8Zf00VYAsg3zL");Ce.a.configure({Auth:{mandatorySignIn:!0,region:Ie.REGION,userPoolId:Ie.USER_POOL_ID,identityPoolId:Ie.IDENTITY_POOL_ID,userPoolWebClientId:Ie.APP_CLIENT_ID},Storage:{region:Oe.REGION,bucket:Oe.BUCKET,identityPoolId:Ie.IDENTITY_POOL_ID},API:{endpoints:[{name:"limelockers",endpoint:Te.URL,region:Te.REGION}]}}),l.a.render(r.a.createElement(o.BrowserRouter,null,r.a.createElement(fe.Elements,{stripe:Fe},r.a.createElement(we,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[308,1,2]]]);
//# sourceMappingURL=main.7a2fd373.chunk.js.map