{"version":3,"sources":["privacy.md","terms.md","libs/contextLib.js","components/AuthenticatedRoute.js","components/UnauthenticatedRoute.js","containers/Home.js","containers/Privacy.js","containers/Terms.js","components/LoaderButton.js","libs/hooksLib.js","libs/errorLib.js","containers/Login.js","containers/Settings.js","containers/ChangeEmail.js","containers/ResetPassword.js","containers/ChangePassword.js","containers/Signup.js","containers/CreateBooking.js","containers/BookingList.js","containers/NotFound.js","Routes.js","App.js","config.js","serviceWorker.js","index.js"],"names":["module","exports","AppContext","createContext","useAppContext","useContext","AuthenticatedRoute","children","rest","useLocation","pathname","search","isAuthenticated","to","UnauthenticatedRoute","redirect","name","url","window","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","querystring","Home","lairImages","lairIcons","bikeImages","bikeIcons","useState","language","copy","carousel","blurbs","cards","content","setContent","temperature","created_at","Date","now","value","humidity","climate","setClimate","useEffect","fetch","CopyApi","then","responseCopyApi","json","catch","console","log","responseUbiBotApi","container","result","lastValues","JSON","parse","channel","last_values","field1","field2","Container","id","fluid","Row","className","Col","xl","md","theme","Math","round","max","steps","format","size","height","Intl","DateTimeFormat","year","month","day","hour","minute","second","timeZone","slice","map","blurb","blurbIndex","key","title","paragraph","paragraphIndex","length","Image","src","image","text","Button","card","cardIndex","Card","Header","style","backgroundImage","alt","marginTop","Body","Title","description","join","lmargin","padding","features","feature","featureIndex","listStyleType","fontWeight","margin","details","detail","detailIndex","Footer","button","link","width","hostname","bootstrapURLKeys","defaultCenter","lat","lng","defaultZoom","onGoogleApiLoaded","maps","marker","Marker","position","infoWindow","InfoWindow","open","addListener","setZoom","setCenter","getPosition","Privacy","undefined","markdownContent","setMarkdownContent","markdownFile","reader","source","Terms","LoaderButton","isLoading","disabled","props","Spinner","animation","marginRight","useFormFields","initialState","fields","setValues","event","target","onError","error","message","toString","Error","alert","Login","history","useHistory","userHasAuthenticated","setIsLoading","email","password","handleFieldChange","a","preventDefault","Auth","signIn","currentAuthenticatedUser","user","attributes","API","post","body","facilityId","response","status","customer","updateUserAttributes","push","Form","onSubmit","Group","controlId","Label","Control","autoFocus","type","onChange","block","Settings","ChangeEmail","codeSent","setCodeSent","code","isConfirming","setIsConfirming","isSendingCode","setIsSendingCode","handleUpdateClick","handleConfirmClick","verifyCurrentUserAttributeSubmit","Text","ResetPassword","confirmPassword","confirmed","setConfirmed","handleSendCodeClick","forgotPassword","forgotPasswordSubmit","icon","ChangePassword","oldPassword","isChanging","setIsChanging","currentUser","changePassword","Signup","confirmationCode","newUser","setNewUser","handleSubmit","signUp","username","handleConfirmationSubmit","confirmSignUp","data","err","CreateBooking","stripe","useStripe","elements","useElements","setUser","units","price","yearly","bgn","priceId","defaultTaxRates","quarterly","monthly","corona","available","from","dimensions","depth","door","startDate","setHours","setDate","getDate","endDate","setMonth","getMonth","vat_number","telephone","address","toISOString","months","unit","Object","keys","find","u","paymentFrequency","coupon","termsAccepted","showForm","isVatNumberLookupRunning","setIsVatNumberLookupRunning","touched","setTouched","focusedDate","setFocusedDate","showVatInput","setShowVatInput","validationErrors","setValidationErrors","validationSuccesses","setValidationSuccesses","countryCode","vatNumber","vatEntity","setVatEntity","customMessage","customValidator","validatorRef","useRef","SimpleReactValidator","messages","validators","useValidator","validator","valid","invalid","discount","percent","amount","setCoupon","c","percent_off","amount_off","blankPrice","currency","base","subtotal","total","vat","setPrice","currencySymbol","getUnit","split","category","handleCardSelect","f","handleVatNumberChange","vatNumberFormatValidators","AT","BE","BG","CY","CZ","DE","DK","EE","EL","ES","FI","FR","GB","HU","IE","IT","LT","LU","LV","MT","NL","PL","PT","SE","SI","SK","match","validationErrorsWithVatNumberErrorsRemoved","entity","validationSuccessesWithVatNumberSuccessesRemoved","retryInvoiceWithNewPaymentMethod","customerId","paymentMethodId","invoiceId","createSubscription","cancelAt","subscription","handlePaymentThatRequiresCustomerAction","handleRequiresPaymentMethod","onSubscriptionComplete","invoice","isRetry","paymentIntent","payment_intent","latest_invoice","confirmCardPayment","client_secret","payment_method","localStorage","setItem","parseStripeAddress","viesAddress","line1","city","state","postal_code","country","phone_number","phone","taxId","cardElement","getElement","CardElement","latestInvoicePaymentIntentStatus","getItem","createPaymentMethod","paymentMethod","validationSuccessesWithCardSuccessesRemoved","validationErrorsWithCardErrorsRemoved","moment","e","t","noValidate","Check","label","checked","as","placeholder","isValid","isInvalid","marginLeft","color","current","fieldValid","showMessageFor","required","rows","startsWith","Input","cursor","onClick","displayFormat","date","onDateChange","add","focused","onFocusChange","min","floor","maxTenancyInMonths","parseInt","Number","parseFloat","toFixed","Table","colSpan","options","fontFamily","fontSmoothing","fontSize","iconColor","allValid","Tabs","activeKey","onSelect","handleTabSelect","Tab","eventKey","CardDeck","Img","variant","opacity","prop","BookingList","subscriptions","setSubscriptions","start_date","canceled_at","items","subscriptionItem","nickname","unit_amount","recurring","interval","stringify","NotFound","Routes","exact","path","App","textMessage","encodeURI","whatsappLink","isMobile","isAndroid","isFirefox","isSafari","viberLink","isAuthenticating","setIsAuthenticating","currentSession","signOut","onLoad","Navbar","Nav","NavItem","Provider","REGION","BUCKET","URL","USER_POOL_ID","APP_CLIENT_ID","IDENTITY_POOL_ID","Boolean","library","faPhone","faWhatsappSquare","faViber","stripePromise","loadStripe","Amplify","configure","mandatorySignIn","region","config","userPoolId","identityPoolId","userPoolWebClientId","Storage","bucket","endpoints","endpoint","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"qIAAAA,EAAOC,QAAU,IAA0B,oC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,sTCE9BC,EAAaC,wBAAc,MAEjC,SAASC,IACd,OAAOC,qBAAWH,GCDL,SAASI,EAAT,GAAoD,IAAtBC,EAAqB,EAArBA,SAAaC,EAAQ,8BACnCC,cAArBC,EADwD,EACxDA,SAAUC,EAD8C,EAC9CA,OACVC,EAAoBR,IAApBQ,gBACR,OACE,kBAAC,IAAUJ,EACRI,EACCL,EAEA,kBAAC,IAAD,CAAUM,GAAE,0BACSH,GADT,OACoBC,MCOzB,SAASG,EAAT,GAAsD,IAAtBP,EAAqB,EAArBA,SAAaC,EAAQ,4BAC1DI,EAAoBR,IAApBQ,gBACFG,EAlBR,SAAqBC,GAAmC,IAA7BC,EAA4B,uDAAtBC,OAAOC,SAASC,KAC/CJ,EAAOA,EAAKK,QAAQ,QAAS,QAE7B,IAAMC,EAAQ,IAAIC,OAAO,OAASP,EAAO,oBAAqB,KACxDQ,EAAUF,EAAMG,KAAKR,GAE3B,OAAKO,EAGAA,EAAQ,GAINE,mBAAmBF,EAAQ,GAAGH,QAAQ,MAAO,MAH3C,GAHA,KAWQM,CAAY,YAC7B,OACE,kBAAC,IAAUnB,EACPI,EAGA,kBAAC,IAAD,CAAUC,GAAiB,KAAbE,GAAgC,OAAbA,EAAoB,IAAMA,IAF3DR,G,+CCfO,SAASqB,IACtB,IAAMC,EAAa,CAAC,iBAAkB,iBAAkB,kBAClDC,EAAY,CAAC,sBAAuB,sBAAuB,uBAC3DC,EAAa,CAAC,iBAAkB,kBAAmB,mBACnDC,EAAY,CAAC,sBAAuB,uBAAwB,wBAJrC,EAQCC,mBAAS,CAAEC,SAAU,KAAMC,KAAM,CAAEC,SAAU,GAAIC,OAAQ,GAAIC,MAAO,MARrE,mBAQtBC,EARsB,KAQbC,EARa,OASCP,mBAAS,CAAEQ,YAAa,CAAEC,WAAYC,KAAKC,MAAOC,MAAO,GAAKC,SAAU,CAAEJ,WAAYC,KAAKC,MAAOC,MAAO,KAT1G,mBAStBE,EATsB,KASbC,EATa,KAqC7B,OA1BAC,qBAAU,WACRC,MAAMC,4EAAgBZ,EAAQL,SAAW,cACtCkB,MAAK,SAAAC,GAAe,OAAIA,EAAgBC,UACxCF,MAAK,SAACjB,GACLK,EAAW,CACTN,SAAUK,EAAQL,SAClBC,KAAMA,OAGToB,MAAMC,QAAQC,OAChB,CAAClB,IACJU,qBAAU,WACRC,MAhBgB,iFAiBbE,MAAK,SAAAM,GAAiB,OAAIA,EAAkBJ,UAC5CF,MAAK,SAACO,GACL,GAAyB,YAArBA,EAAUC,OAAsB,CAClC,IAAIC,EAAaC,KAAKC,MAAMJ,EAAUK,QAAQC,aAC9CjB,EAAW,CACTP,YAAaoB,EAAWK,OACxBpB,SAAUe,EAAWM,aAI1BZ,MAAMC,QAAQC,OAChB,CAACV,IAGF,oCACE,kBAACqB,EAAA,EAAD,CAAWC,GAAG,SAASC,OAAK,GAC1B,4DAC+B,6BAD/B,oCAKF,kBAACF,EAAA,EAAD,CAAWC,GAAG,eACZ,gEAGA,+HAGE,uBAAGjD,KAAK,8DAAR,+BAHF,IAME,6BANF,4HAUA,kBAACmD,EAAA,EAAD,CAAKC,UAAU,uDACb,kBAACC,EAAA,EAAD,CAAKC,GAAG,OAAOC,GAAG,QAChB,kBAAC,IAAD,CACEC,MAAM,OACN/B,MAAQgC,KAAKC,MAAkC,GAA5B/B,EAAQN,YAAYI,OAAc,GACrDkC,IAAkC,IAA5BhC,EAAQN,YAAYI,MAC1BmC,MAAM,IACNC,OAAO,QACPC,KAAK,QACLC,OAAO,SAGX,kBAACV,EAAA,EAAD,CAAKC,GAAG,OAAOC,GAAG,QAChB,2CAEE,IAAIS,KAAKC,eAAe,QAAS,CAC/BC,KAAM,UACNC,MAAO,OACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,UACRC,OAAQ,UACRC,SAAU,iBACTX,OAAO,IAAItC,KAAKI,EAAQN,YAAYC,aAX3C,QAaE,gCAAUmC,KAAKC,MAAkC,GAA5B/B,EAAQN,YAAYI,OAAc,GAAvD,SACA,wCAEE,IAAIuC,KAAKC,eAAe,QAAS,CAC/BC,KAAM,UACNC,MAAO,OACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,UACRC,OAAQ,UACRC,SAAU,iBACTX,OAAO,IAAItC,KAAKI,EAAQD,SAASJ,aAxBxC,QA0BE,gCAASK,EAAQD,SAASD,MAA1B,QAIN,kBAACuB,EAAA,EAAD,CAAWC,GAAG,QAAQC,OAAK,GAEvB/B,EAAQJ,KAAKE,OAAOwD,MAAM,EAAG,GAAGC,KAAI,SAACC,EAAOC,GAAR,OAClC,kBAAC5B,EAAA,EAAD,CAAW6B,IAAKD,GACd,4BAAKD,EAAMG,OACX,kBAAC3B,EAAA,EAAD,CAAKC,UAAU,uDAEbuB,EAAM5D,KAAK2D,KAAI,SAACK,EAAWC,GAAZ,OACb,kBAAC3B,EAAA,EAAD,CAAKC,GAAK,GAAKqB,EAAM5D,KAAKkE,OAASJ,IAAKG,GACtC,kBAACE,EAAA,EAAD,CAAOC,IAAKJ,EAAUK,QACtB,2BAAIL,EAAUM,gBAS5B,kBAACrC,EAAA,EAAD,CAAWC,GAAG,WAAWC,OAAK,GAC5B,kBAACF,EAAA,EAAD,KACE,kBAACG,EAAA,EAAD,CAAKC,UAAU,uDAEXjC,EAAQJ,KAAKE,OAAOwD,MAAM,EAAG,GAAGC,KAAI,SAACC,EAAOC,GAAR,OAClC,kBAACvB,EAAA,EAAD,CAAKC,GAAI,EAAGuB,IAAKD,GACf,4BAAKD,EAAMG,OAETH,EAAM5D,KAAK2D,KAAI,SAACK,EAAWC,GAAZ,OACb,uBAAGH,IAAKG,GACLD,MAIP,kBAAC,gBAAD,CAAetF,GAAG,gBAChB,kBAAC6F,EAAA,EAAD,yBAQd,kBAACtC,EAAA,EAAD,CAAWC,GAAG,QACZ,gDAGA,kBAACE,EAAA,EAAD,CAAKC,UAAU,uDAEXjC,EAAQJ,KAAKG,MAAMuD,MAAM,EAAG,GAAGC,KAAI,SAACa,EAAMC,GAAP,OACjC,kBAACnC,EAAA,EAAD,CAAKwB,IAAKW,GACV,kBAACC,EAAA,EAAD,CAAMrC,UAAU,SACd,kBAACqC,EAAA,EAAKC,OAAN,KACGH,EAAKT,OAER,yBAAKa,MAAO,CAAC5B,OAAQ,QAAS6B,gBAAiB,OAASnF,EAAW+E,GAAa,MAC9E,kBAACN,EAAA,EAAD,CAAOC,IAAKzE,EAAU8E,GAAYK,IAAKN,EAAKH,MAAMS,IAAKF,MAAO,CAACG,UAAW,WAE5E,kBAACL,EAAA,EAAKM,KAAN,KACE,kBAACN,EAAA,EAAKO,MAAN,KACGT,EAAKU,YAAYC,KAAK,MAEzB,6BACA,wBAAIP,MAAO,CAACQ,QAAS,EAAGC,QAAS,IAE7Bb,EAAKc,SAAS3B,KAAI,SAAC4B,EAASC,GAAV,OAChB,wBAAI1B,IAAK0B,EAAcZ,MAAO,CAACa,cAAe,OAAQC,WAAY,IAAKC,OAAQ,EAAGN,QAAS,IACxFE,EAAQjB,KACT,wBAAIM,MAAO,CAACQ,QAAS,EAAGC,QAAS,IAE7BE,EAAQK,QAAQjC,KAAI,SAACkC,EAAQC,GAAT,OAClB,wBAAIhC,IAAKgC,EAAalB,MAAO,CAACa,cAAe,OAAQC,WAAY,SAAUC,OAAQ,EAAGN,QAAS,IAC5FQ,aAUnB,kBAACnB,EAAA,EAAKqB,OAAN,KACE,kBAAC,gBAAD,CAAerH,GAAI8F,EAAKwB,OAAOC,MAC7B,kBAAC1B,EAAA,EAAD,KAASC,EAAKwB,OAAO1B,eASnC,kBAACrC,EAAA,EAAD,CAAWC,GAAG,WAAWC,OAAK,GAE1B/B,EAAQJ,KAAKE,OAAOwD,MAAM,EAAG,GAAGC,KAAI,SAACC,EAAOC,GAAR,OAClC,kBAAC5B,EAAA,EAAD,CAAW6B,IAAKD,GACd,4BAAKD,EAAMG,OACX,kBAAC3B,EAAA,EAAD,CAAKC,UAAU,uDACb,kBAACC,EAAA,EAAD,CAAKC,GAAI,GACP,2BAAIqB,EAAM5D,KAAK,MAGnB,gCAAYqC,UAAU,cACpB,2BAAIuB,EAAM5D,KAAK,UAMzB,kBAACiC,EAAA,EAAD,CAAWC,GAAG,OAAOC,OAAK,GAEtB/B,EAAQJ,KAAKE,OAAOwD,MAAM,EAAG,GAAGC,KAAI,SAACC,EAAOC,GAAR,OAClC,kBAAC5B,EAAA,EAAD,CAAW6B,IAAKD,GACd,4BAAKD,EAAMG,OACX,kBAAC3B,EAAA,EAAD,CAAKC,UAAU,uDACb,kBAACC,EAAA,EAAD,CAAKC,GAAI,GACP,2BAAIqB,EAAM5D,KAAK,UAMzB,kBAACiC,EAAA,EAAD,KACE,kBAACG,EAAA,EAAD,KAEIhC,EAAQJ,KAAKG,MAAMuD,MAAM,EAAG,GAAGC,KAAI,SAACa,EAAMC,GAAP,OACjC,kBAACnC,EAAA,EAAD,CAAKwB,IAAKW,GACR,kBAACC,EAAA,EAAD,CAAMrC,UAAU,SACd,kBAACqC,EAAA,EAAKC,OAAN,KACGH,EAAKT,OAER,yBAAKa,MAAO,CAAC5B,OAAQ,QAAS6B,gBAAiB,OAASjF,EAAW6E,GAAa,MAC9E,kBAACN,EAAA,EAAD,CAAOC,IAAKvE,EAAU4E,GAAYK,IAAKN,EAAKH,MAAMS,IAAKF,MAAO,CAACG,UAAW,WAE5E,kBAACL,EAAA,EAAKM,KAAN,KACE,kBAACN,EAAA,EAAKO,MAAN,KACGT,EAAKU,YAAYC,KAAK,MAEzB,6BACA,wBAAIP,MAAO,CAACQ,QAAS,EAAGC,QAAS,IAE7Bb,EAAKc,SAAS3B,KAAI,SAAC4B,EAASC,GAAV,OAChB,wBAAI1B,IAAK0B,EAAcZ,MAAO,CAACa,cAAe,OAAQC,WAAY,IAAKC,OAAQ,EAAGN,QAAS,IACxFE,EAAQjB,KACT,wBAAIM,MAAO,CAACe,OAAQ,EAAGN,QAAS,IAE5BE,EAAQK,QAAQjC,KAAI,SAACkC,EAAQC,GAAT,OAClB,wBAAIhC,IAAKgC,EAAalB,MAAO,CAACa,cAAe,OAAQC,WAAY,SAAUC,OAAQ,EAAGN,QAAS,IAC5FQ,aAUnB,kBAACnB,EAAA,EAAKqB,OAAN,KACE,kBAAC,gBAAD,CAAerH,GAAI8F,EAAKwB,OAAOC,MAC7B,kBAAC1B,EAAA,EAAD,KAASC,EAAKwB,OAAO1B,gBAUvC,kBAACrC,EAAA,EAAD,CAAWC,GAAG,WAAWC,OAAK,GAE1B/B,EAAQJ,KAAKE,OAAOwD,MAAM,EAAG,GAAGC,KAAI,SAACC,EAAOC,GAAR,OAClC,kBAAC5B,EAAA,EAAD,CAAW6B,IAAKD,GACd,4BAAKD,EAAMG,OACX,kBAAC3B,EAAA,EAAD,CAAKC,UAAU,uDAEbuB,EAAM5D,KAAK2D,KAAI,SAACK,EAAWC,GAAZ,OACb,kBAAC3B,EAAA,EAAD,CAAKC,GAAK,GAAKqB,EAAM5D,KAAKkE,OAASJ,IAAKG,GACtC,kBAACE,EAAA,EAAD,CAAOC,IAAKJ,EAAUK,QACtB,2BAAIL,EAAUM,WAKpB,kBAAClC,EAAA,EAAD,CAAKC,UAAU,uDACb,kBAACC,EAAA,EAAD,CAAKC,GAAG,OAAOC,GAAG,QAChB,kBAAC,gBAAD,CAAe9D,GAAG,gBAChB,kBAAC6F,EAAA,EAAD,yBAQd,kBAACtC,EAAA,EAAD,CAAWC,GAAG,MAAMC,OAAK,GACvB,yBAAKyC,MAAO,CAAE5B,OAAQ,QAASkD,MAAO,SAEJ,cAA7BnH,OAAOC,SAASmH,SACb,KAEE,kBAAC,IAAD,CACEC,iBAAkB,CAAEtC,IAAK,2CACzBuC,cAAe,CAAEC,IAAK,UAAWC,IAAK,WACtCC,YAAc,GACdC,kBAAmB,YAAkB,IAAhB9C,EAAe,EAAfA,IAAK+C,EAAU,EAAVA,KACpBC,EAAS,IAAID,EAAKE,OAAO,CAC3BC,SAAU,CAAEP,IAAK,UAAWC,IAAK,WACjC5C,MACAI,MAAO,sBACPmB,YAAa,iEACbe,KAAM,CACJnH,IAAK,8IACLwF,KAAM,iCAGNwC,EAAa,IAAIJ,EAAKK,WAAW,CACnC3G,QAAS,wFAA0FuG,EAAO5C,MAAQ,WAAa4C,EAAOzB,YAAc,kBAAoByB,EAAOV,KAAKnH,IAAM,KAAO6H,EAAOV,KAAK3B,KAAO,aAEtNwC,EAAWE,KAAKrD,EAAKgD,GACrBA,EAAOM,YAAY,SAAS,WAC1BtD,EAAIuD,QAAQ,IACZvD,EAAIwD,UAAUR,EAAOS,eACrBN,EAAWE,KAAKrD,EAAKgD,Y,wCC3U9B,SAASU,IAAW,IAAD,EACcvH,wBAASwH,GADvB,mBACzBC,EADyB,KACRC,EADQ,KAGhC,OADA1G,qBAAU,WAAQC,MAAM0G,KAAcxG,MAAK,SAAAyG,GAAM,OAAIA,EAAOpD,UAAQrD,KAAKuG,MAEvE,kBAACvF,EAAA,EAAD,CAAWC,GAAG,UACZ,kBAAC,IAAD,CAAeyF,OAAQJ,K,sBCLd,SAASK,IAAS,IAAD,EACgB9H,wBAASwH,GADzB,mBACvBC,EADuB,KACNC,EADM,KAG9B,OADA1G,qBAAU,WAAQC,MAAM0G,KAAcxG,MAAK,SAAAyG,GAAM,OAAIA,EAAOpD,UAAQrD,KAAKuG,MAEvE,kBAACvF,EAAA,EAAD,CAAWC,GAAG,UACZ,kBAAC,IAAD,CAAeyF,OAAQJ,K,4BCNd,SAASM,EAAT,GAIX,IAHFC,EAGC,EAHDA,UAGC,IAFDC,gBAEC,SADEC,EACF,wCACD,OACE,kBAACzD,EAAA,EAAD,eAAQwD,SAAUA,GAAYD,GAAeE,GAC1CF,GAAa,kBAACG,EAAA,EAAD,CAASC,UAAU,SAASnF,KAAK,KAAK6B,MAAO,CAACuD,YAAa,WACxEH,EAAM5J,U,oBCVN,SAASgK,EAAcC,GAAe,IAAD,EACdvI,mBAASuI,GADK,mBACnCC,EADmC,KAC3BC,EAD2B,KAG1C,MAAO,CACLD,EACA,SAASE,GACPD,EAAU,eACLD,EADI,eAENE,EAAMC,OAAOvG,GAAKsG,EAAMC,OAAO/H,WCVjC,SAASgI,EAAQC,GACtB,IAAIC,EAAUD,EAAME,WAGdF,aAAiBG,QAAUH,EAAMC,UACrCA,EAAUD,EAAMC,SAGlBG,MAAMH,GCEO,SAASI,IACtB,IAAMC,EAAUC,cACRC,EAAyBlL,IAAzBkL,qBAFsB,EAGIrJ,oBAAS,GAHb,mBAGvBgI,EAHuB,KAGZsB,EAHY,OAIMhB,EAAc,CAAEiB,MAAO,GAAIC,SAAU,KAJ3C,mBAIvBhB,EAJuB,KAIfiB,EAJe,iDAU9B,WAA4Bf,GAA5B,eAAAgB,EAAA,6DACEhB,EAAMiB,iBACNL,GAAa,GAFf,kBAIUM,IAAKC,OAAOrB,EAAOe,MAAOf,EAAOgB,UAJ3C,cAKIH,GAAqB,GALzB,SAQqBO,IAAKE,2BAR1B,OAQQC,EARR,OAUU,8BADeA,EAAfC,YAEJC,IAAIC,KAAK,0BAA2B,2BAA4B,CAAEC,KAAM,CAAEZ,MAAOf,EAAOe,MAAOa,WAAY,0CACxGjJ,KADH,uCACQ,WAAMkJ,GAAN,SAAAX,EAAA,2DACAW,EAASC,QAAUD,EAASE,UAAYF,EAASE,SAASnI,IAD1D,gCAEIwH,IAAKY,qBAAqBT,EAAM,CAAE,4BAA6BM,EAASE,SAASnI,KAFrF,6BAGOiI,EAASxB,OAClBtH,QAAQC,IAAI6I,EAASxB,OAJnB,2CADR,uDAUFM,EAAQsB,KAAK,KArBjB,kDAuBI7B,EAAQ,EAAD,IACPU,GAAa,GAxBjB,2DAV8B,sBAuC9B,OACE,kBAACnH,EAAA,EAAD,CAAWC,GAAG,SACZ,sCACA,kBAACsI,EAAA,EAAD,CAAMC,SA1CoB,6CA2CxB,kBAACD,EAAA,EAAKE,MAAN,CAAYC,UAAU,SACpB,kBAACH,EAAA,EAAKI,MAAN,cACA,kBAACJ,EAAA,EAAKK,QAAN,CACEC,WAAS,EACTC,KAAK,QACLrK,MAAO4H,EAAOe,MACd2B,SAAUzB,KAEd,kBAACiB,EAAA,EAAKE,MAAN,CAAYC,UAAU,YACpB,kBAACH,EAAA,EAAKI,MAAN,iBACA,kBAACJ,EAAA,EAAKK,QAAN,CACEE,KAAK,WACLrK,MAAO4H,EAAOgB,SACd0B,SAAUzB,KAEd,kBAAC1B,EAAD,CACEoD,OAAK,EACLF,KAAK,SACLjD,UAAWA,EACXC,WAvDCO,EAAOe,MAAMnF,OAAS,GAAKoE,EAAOgB,SAASpF,OAAS,IAmDvD,UAOA,kBAAC,OAAD,CAAMxF,GAAG,gBAAT,oBACA,kBAAC,OAAD,CAAMA,GAAG,WAAT,aCxEO,SAASwM,IACtB,OACE,yBAAK7I,UAAU,YACb,kBAAC,gBAAD,CAAe3D,GAAG,sBAChB,kBAACmJ,EAAD,CAAcoD,OAAK,GAAnB,qBCAO,SAASE,IACtB,IAAMlC,EAAUC,cADoB,EAEJpJ,oBAAS,GAFL,mBAE7BsL,EAF6B,KAEnBC,EAFmB,OAGAjD,EAAc,CAChDkD,KAAM,GACNjC,MAAO,KAL2B,mBAG7Bf,EAH6B,KAGrBiB,EAHqB,OAOIzJ,oBAAS,GAPb,mBAO7ByL,EAP6B,KAOfC,EAPe,OAQM1L,oBAAS,GARf,mBAQ7B2L,EAR6B,KAQdC,EARc,cAkBrBC,EAlBqB,8EAkBpC,WAAiCnD,GAAjC,eAAAgB,EAAA,6DACEhB,EAAMiB,iBACNiC,GAAiB,GAFnB,kBAIuBhC,IAAKE,2BAJ5B,cAIUC,EAJV,gBAKUH,IAAKY,qBAAqBT,EAAM,CAAER,MAAOf,EAAOe,QAL1D,OAMIgC,GAAY,GANhB,kDAQI3C,EAAQ,EAAD,IACPgD,GAAiB,GATrB,2DAlBoC,+BA+BrBE,EA/BqB,8EA+BpC,WAAkCpD,GAAlC,SAAAgB,EAAA,6DACEhB,EAAMiB,iBACN+B,GAAgB,GAFlB,kBAIU9B,IAAKmC,iCAAiC,QAASvD,EAAOgD,MAJhE,OAKIrC,EAAQsB,KAAK,aALjB,gDAOI7B,EAAQ,EAAD,IACP8C,GAAgB,GARpB,0DA/BoC,sBA0FpC,OACE,6BACIJ,EAzBF,kBAACZ,EAAA,EAAD,CAAMC,SAAUmB,GACd,kBAACpB,EAAA,EAAKE,MAAN,CAAYC,UAAU,QACpB,kBAACH,EAAA,EAAKI,MAAN,0BACA,kBAACJ,EAAA,EAAKK,QAAN,CACEC,WAAS,EACTC,KAAK,MACLrK,MAAO4H,EAAOgD,KACdN,SAAUzB,IACZ,kBAACiB,EAAA,EAAKsB,KAAN,iCAC4BxD,EAAOe,MADnC,iCAIF,kBAACxB,EAAD,CACEoD,OAAK,EACLF,KAAK,SACLjD,UAAWyD,EACXxD,WApECO,EAAOgD,KAAKpH,OAAS,IAgExB,YAlCF,kBAACsG,EAAA,EAAD,CAAMC,SAAUkB,GACd,kBAACnB,EAAA,EAAKE,MAAN,CAAYC,UAAU,SACpB,kBAACH,EAAA,EAAKI,MAAN,cACA,kBAACJ,EAAA,EAAKK,QAAN,CACEC,WAAS,EACTC,KAAK,QACLrK,MAAO4H,EAAOe,MACd2B,SAAUzB,KAEd,kBAAC1B,EAAD,CACEoD,OAAK,EACLF,KAAK,SACLjD,UAAW2D,EACX1D,WA/CCO,EAAOe,MAAMnF,OAAS,IA2CzB,kB,YCnDO,SAAS6H,IAAiB,IAAD,EACF3D,EAAc,CAChDkD,KAAM,GACNjC,MAAO,GACPC,SAAU,GACV0C,gBAAiB,KALmB,mBAC/B1D,EAD+B,KACvBiB,EADuB,OAONzJ,oBAAS,GAPH,mBAO/BsL,EAP+B,KAOrBC,EAPqB,OAQJvL,oBAAS,GARL,mBAQ/BmM,EAR+B,KAQpBC,EARoB,OASEpM,oBAAS,GATX,mBAS/ByL,EAT+B,KASjBC,EATiB,OAUI1L,oBAAS,GAVb,mBAU/B2L,EAV+B,KAUhBC,EAVgB,cAwBvBS,EAxBuB,8EAwBtC,WAAmC3D,GAAnC,SAAAgB,EAAA,6DACEhB,EAAMiB,iBAENiC,GAAiB,GAHnB,kBAMUhC,IAAK0C,eAAe9D,EAAOe,OANrC,OAOIgC,GAAY,GAPhB,gDASI3C,EAAQ,EAAD,IACPgD,GAAiB,GAVrB,0DAxBsC,+BAsCvBE,EAtCuB,8EAsCtC,WAAkCpD,GAAlC,SAAAgB,EAAA,6DACEhB,EAAMiB,iBAEN+B,GAAgB,GAHlB,kBAMU9B,IAAK2C,qBACT/D,EAAOe,MACPf,EAAOgD,KACPhD,EAAOgB,UATb,OAWI4C,GAAa,GAXjB,gDAaIxD,EAAQ,EAAD,IACP8C,GAAgB,GAdpB,0DAtCsC,sBAoItC,OACE,kBAACvJ,EAAA,EAAD,CAAWC,GAAG,YACZ,8CACEkJ,EAEGa,EAjBL,yBAAK5J,UAAU,WACb,kBAAC,IAAD,CAAiBiK,KAAK,OACtB,4DACA,2BACE,kBAAC,OAAD,CAAM5N,GAAG,UAAT,oDA5CJ,0BAAM+L,SAAUmB,GACd,kBAACpB,EAAA,EAAKE,MAAN,CAAYC,UAAU,QACpB,kBAACH,EAAA,EAAKI,MAAN,0BACA,kBAACJ,EAAA,EAAKK,QAAN,CACEC,WAAS,EACTC,KAAK,MACLrK,MAAO4H,EAAOgD,KACdN,SAAUzB,IACZ,kBAACiB,EAAA,EAAKsB,KAAN,iCAC4BxD,EAAOe,MADnC,iCAIF,6BACA,kBAACmB,EAAA,EAAKE,MAAN,CAAYC,UAAU,YACpB,kBAACH,EAAA,EAAKI,MAAN,qBACA,kBAACJ,EAAA,EAAKK,QAAN,CACEE,KAAK,WACLrK,MAAO4H,EAAOgB,SACd0B,SAAUzB,KAEd,kBAACiB,EAAA,EAAKE,MAAN,CAAYC,UAAU,mBACpB,kBAACH,EAAA,EAAKI,MAAN,yBACA,kBAACJ,EAAA,EAAKK,QAAN,CACEE,KAAK,WACLrK,MAAO4H,EAAO0D,gBACdhB,SAAUzB,KAEd,kBAAC1B,EAAD,CACEoD,OAAK,EACLF,KAAK,SACLjD,UAAWyD,EACXxD,WA7FJO,EAAOgD,KAAKpH,OAAS,GACrBoE,EAAOgB,SAASpF,OAAS,GACzBoE,EAAOgB,WAAahB,EAAO0D,kBAuFzB,YAjDF,0BAAMvB,SAAU0B,GACd,kBAAC3B,EAAA,EAAKE,MAAN,CAAYC,UAAU,SACpB,kBAACH,EAAA,EAAKI,MAAN,cACA,kBAACJ,EAAA,EAAKK,QAAN,CACEC,WAAS,EACTC,KAAK,QACLrK,MAAO4H,EAAOe,MACd2B,SAAUzB,KAEd,kBAAC1B,EAAD,CACEoD,OAAK,EACLF,KAAK,SACLjD,UAAW2D,EACX1D,WA1DCO,EAAOe,MAAMnF,OAAS,IAsDzB,uBCrEO,SAASqI,KACtB,IAAMtD,EAAUC,cADuB,EAEHd,EAAc,CAChDkB,SAAU,GACVkD,YAAa,GACbR,gBAAiB,KALoB,mBAEhC1D,EAFgC,KAExBiB,EAFwB,OAOHzJ,oBAAS,GAPN,mBAOhC2M,EAPgC,KAOpBC,EAPoB,iDAiBvC,WAAiClE,GAAjC,eAAAgB,EAAA,6DACEhB,EAAMiB,iBACNiD,GAAc,GAFhB,kBAI8BhD,IAAKE,2BAJnC,cAIU+C,EAJV,gBAKUjD,IAAKkD,eACTD,EACArE,EAAOkE,YACPlE,EAAOgB,UARb,OAWIL,EAAQsB,KAAK,aAXjB,kDAaI7B,EAAQ,EAAD,IACPgE,GAAc,GAdlB,2DAjBuC,sBAmCvC,OACE,kBAACzK,EAAA,EAAD,CAAWC,GAAG,YACZ,kBAACsI,EAAA,EAAD,CAAMC,SArC6B,6CAsCjC,kBAACD,EAAA,EAAKE,MAAN,CAAYC,UAAU,eACpB,kBAACH,EAAA,EAAKI,MAAN,qBACA,kBAACJ,EAAA,EAAKK,QAAN,CACEE,KAAK,WACLC,SAAUzB,EACV7I,MAAO4H,EAAOkE,eAElB,6BACA,kBAAChC,EAAA,EAAKE,MAAN,CAAYC,UAAU,YACpB,kBAACH,EAAA,EAAKI,MAAN,qBACA,kBAACJ,EAAA,EAAKK,QAAN,CACEE,KAAK,WACLC,SAAUzB,EACV7I,MAAO4H,EAAOgB,YAElB,kBAACkB,EAAA,EAAKE,MAAN,CAAYC,UAAU,mBACpB,kBAACH,EAAA,EAAKI,MAAN,yBACA,kBAACJ,EAAA,EAAKK,QAAN,CACEE,KAAK,WACLC,SAAUzB,EACV7I,MAAO4H,EAAO0D,mBAElB,kBAACnE,EAAD,CACEoD,OAAK,EACLF,KAAK,SACLhD,WApDJO,EAAOkE,YAAYtI,OAAS,GAC5BoE,EAAOgB,SAASpF,OAAS,GACzBoE,EAAOgB,WAAahB,EAAO0D,iBAmDvBlE,UAAW2E,GAJb,qBC3DO,SAASI,KAAU,IAAD,EACKzE,EAAc,CAChDiB,MAAO,GACPC,SAAU,GACV0C,gBAAiB,GACjBc,iBAAkB,KALW,mBACxBxE,EADwB,KAChBiB,EADgB,KAOzBN,EAAUC,cAPe,EAQDpJ,mBAAS,MARR,mBAQxBiN,EARwB,KAQfC,EARe,KASvB7D,EAAyBlL,IAAzBkL,qBATuB,EAUGrJ,oBAAS,GAVZ,mBAUxBgI,EAVwB,KAUbsB,EAVa,cAwBhB6D,EAxBgB,8EAwB/B,WAA4BzE,GAA5B,eAAAgB,EAAA,6DACEhB,EAAMiB,iBACNL,GAAa,GAFf,kBAI0BM,IAAKwD,OAAO,CAChCC,SAAU7E,EAAOe,MACjBC,SAAUhB,EAAOgB,WANvB,OAIUyD,EAJV,OAQI3D,GAAa,GACb4D,EAAWD,GATf,kDAWIrE,EAAQ,EAAD,IACPU,GAAa,GAZjB,2DAxB+B,+BAwChBgE,EAxCgB,8EAwC/B,WAAwC5E,GAAxC,SAAAgB,EAAA,6DACEhB,EAAMiB,iBACNL,GAAa,GAFf,kBAIUM,IAAK2D,cAAc/E,EAAOe,MAAOf,EAAOwE,kBAJlD,uBAKUpD,IAAKC,OAAOrB,EAAOe,MAAOf,EAAOgB,UAL3C,OAMIH,GAAqB,GACrBY,IAAIC,KAAK,0BAA2B,2BAA4B,CAAEC,KAAM,CAAEZ,MAAOf,EAAOe,MAAOa,WAAY,0CACxGjJ,KADH,uCACQ,WAAMkJ,GAAN,SAAAX,EAAA,sDACAW,EAASC,QAAUD,EAASE,UAAYF,EAASE,SAASnI,GAC5DwH,IAAKE,2BACF3I,MAAK,SAAA4I,GAAI,OAAIH,IAAKY,qBAAqBT,EAAM,CAAE,4BAA6BM,EAASE,SAASnI,QAC9FjB,MAAK,SAAAqM,GAAI,OAAIjM,QAAQC,IAAIgM,MACzBlM,OAAM,SAAAmM,GAAG,OAAIlM,QAAQC,IAAIiM,MACnBpD,EAASxB,OAClBtH,QAAQC,IAAI6I,EAASxB,OAPnB,2CADR,uDAWAM,EAAQsB,KAAK,KAlBjB,kDAoBI7B,EAAQ,EAAD,IACPU,GAAa,GArBjB,2DAxC+B,sBAkI/B,OACE,yBAAK/G,UAAU,UACA,OAAZ0K,EA1CH,kBAAC9K,EAAA,EAAD,CAAWC,GAAG,UACZ,uCACA,kBAACsI,EAAA,EAAD,CAAMC,SAAUwC,GACd,kBAACzC,EAAA,EAAKE,MAAN,CAAYC,UAAU,SACpB,kBAACH,EAAA,EAAKI,MAAN,cACA,kBAACJ,EAAA,EAAKK,QAAN,CACEC,WAAS,EACTC,KAAK,QACLrK,MAAO4H,EAAOe,MACd2B,SAAUzB,KAGd,kBAACiB,EAAA,EAAKE,MAAN,CAAYC,UAAU,YACpB,kBAACH,EAAA,EAAKI,MAAN,iBACA,kBAACJ,EAAA,EAAKK,QAAN,CACEE,KAAK,WACLrK,MAAO4H,EAAOgB,SACd0B,SAAUzB,KAGd,kBAACiB,EAAA,EAAKE,MAAN,CAAYC,UAAU,mBACpB,kBAACH,EAAA,EAAKI,MAAN,yBACA,kBAACJ,EAAA,EAAKK,QAAN,CACEE,KAAK,WACLC,SAAUzB,EACV7I,MAAO4H,EAAO0D,mBAGlB,kBAACnE,EAAD,CACEoD,OAAK,EACLF,KAAK,SACLjD,UAAWA,EACXC,WA5GJO,EAAOe,MAAMnF,OAAS,GACtBoE,EAAOgB,SAASpF,OAAS,GACzBoE,EAAOgB,WAAahB,EAAO0D,kBAsGzB,aAnDF,0BAAMvB,SAAU2C,GACd,kBAAC5C,EAAA,EAAKE,MAAN,CAAYC,UAAU,oBACpB,kBAACH,EAAA,EAAKI,MAAN,0BACA,kBAACJ,EAAA,EAAKK,QAAN,CACEC,WAAS,EACTC,KAAK,MACLC,SAAUzB,EACV7I,MAAO4H,EAAOwE,mBAChB,kBAACtC,EAAA,EAAKsB,KAAN,+CAEF,kBAACjE,EAAD,CACEoD,OAAK,EACLF,KAAK,SACLjD,UAAWA,EACXC,WA5DCO,EAAOwE,iBAAiB5I,OAAS,IAwDpC,Y,0HClEO,SAASsJ,KACtB,IAAMC,EAASC,uBACTC,EAAWC,yBAFqB,EAId9N,wBAASwH,GAJK,mBAI/BuC,EAJ+B,KAIzBgE,EAJyB,KAMhCC,EAAQ,CACZ,mBAAoB,CAClB,mBAAoB,CAClBC,MAAO,CACLC,OAAQ,CACNC,IAAK,IACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,kCAINC,UAAW,CACTH,IAAK,IAEPI,QAAS,CACPJ,IAAK,GACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,kCAING,OAAQ,CACNL,IAAK,GACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,mCAKRI,UAAW,CACTC,KAAM,IAAIhO,KAAK,cACfsN,MAAO,GAETW,WAAY,CACVvI,MAAO,GACPlD,OAAQ,IACR0L,MAAO,IAETC,KAAM,CACJzI,MAAO,GACPlD,OAAQ,KAEVkC,YAAa,2DACbb,MAAO,4BAET,oBAAqB,CACnB0J,MAAO,CACLC,OAAQ,CACNC,IAAK,IACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,kCAINC,UAAW,CACTH,IAAK,KAEPI,QAAS,CACPJ,IAAK,IACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,kCAING,OAAQ,CACNL,IAAK,GACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,mCAKRI,UAAW,CACTC,KAAM,IAAIhO,KAAK,cACfsN,MAAO,GAETW,WAAY,CACVvI,MAAO,IACPlD,OAAQ,IACR0L,MAAO,KAETC,KAAM,CACJzI,MAAO,IACPlD,OAAQ,KAEVkC,YAAa,wCACbb,MAAO,8BAET,qBAAsB,CACpB0J,MAAO,CACLC,OAAQ,CACNC,IAAK,KACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,kCAINC,UAAW,CACTH,IAAK,KAEPI,QAAS,CACPJ,IAAK,IACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,kCAING,OAAQ,CACNL,IAAK,IACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,mCAKRI,UAAW,CACTC,KAAM,IAAIhO,KAAK,cACfsN,MAAO,GAETW,WAAY,CACVvI,MAAO,IACPlD,OAAQ,IACR0L,MAAO,KAETC,KAAM,CACJzI,MAAO,IACPlD,OAAQ,KAEVkC,YAAa,yDACbb,MAAO,8BAET,oBAAqB,CACnB0J,MAAO,CACLC,OAAQ,CACNC,IAAK,KACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,kCAINC,UAAW,CACTH,IAAK,KAEPI,QAAS,CACPJ,IAAK,IACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,kCAING,OAAQ,CACNL,IAAK,IACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,mCAKRI,UAAW,CACTC,KAAM,IAAIhO,KAAK,cACfsN,MAAO,GAETW,WAAY,CACVvI,MAAO,IACPlD,OAAQ,IACR0L,MAAO,KAETC,KAAM,CACJzI,MAAO,IACPlD,OAAQ,KAEVkC,YAAa,+DACbb,MAAO,+BAGX,uBAAwB,CACtB,QAAW,CACT0J,MAAO,CACLC,OAAQ,CACNC,IAAK,IACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,kCAINC,UAAW,CACTH,IAAK,IAEPI,QAAS,CACPJ,IAAK,GACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,kCAING,OAAQ,CACNL,IAAK,GACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,mCAKRI,UAAW,CACTC,KAAM,IAAIhO,KAAK,cACfsN,MAAO,GAET5I,YAAa,gFACbb,MAAO,mBAET,qBAAsB,CACpB0J,MAAO,CACLC,OAAQ,CACNC,IAAK,IACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,kCAINC,UAAW,CACTH,IAAK,KAEPI,QAAS,CACPJ,IAAK,GACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,kCAING,OAAQ,CACNL,IAAK,GACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,mCAKRI,UAAW,CACTC,KAAM,IAAIhO,KAAK,cACfsN,MAAO,GAET5I,YAAa,2EACbb,MAAO,oBAET,qBAAsB,CACpB0J,MAAO,CACLC,OAAQ,CACNC,IAAK,IACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,kCAINC,UAAW,CACTH,IAAK,KAEPI,QAAS,CACPJ,IAAK,GACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,kCAING,OAAQ,CACNL,IAAK,GACLR,OAAQ,CACNS,QAAS,iCACTC,gBAAiB,CACf,mCAKRI,UAAW,CACTC,KAAM,IAAIhO,KAAK,cACfsN,MAAO,GAET5I,YAAa,uCACbb,MAAO,qBAITuK,EAAY,IAAIpO,KACpBoO,EAAUC,SAAS,GAAG,EAAE,EAAE,GAC1BD,EAAUE,QAAQF,EAAUG,UAAY,GACxC,IAAIC,EAAU,IAAIxO,KAClBwO,EAAQH,SAAS,GAAG,EAAE,EAAE,GACxBG,EAAQC,SAASL,EAAUM,WAAa,IA7UF,MA8UFpP,mBAAS,CAC3CjB,KAAM,GACNsQ,WAAY,GACZ9F,MAAO,GACP+F,UAAW,GACXC,QAAS,GACTb,KAAMI,EAAUU,cAChBC,OAAQ,GACR7Q,GAAIsQ,EAAQM,cACZE,KAAK,GAAD,OAAKC,OAAOC,KAAK5B,GAAO,GAAxB,YAA8B2B,OAAOC,KAAK5B,EAAM2B,OAAOC,KAAK5B,GAAO,KAAK6B,MAAK,SAAAC,GAAC,OAAI9B,EAAM2B,OAAOC,KAAK5B,GAAO,IAAI8B,GAAGrB,UAAUT,MAAQ,MACxI+B,iBAAkB,SAClBC,OAAQ,GACRC,eAAe,IA1VqB,mBA8U/BzH,EA9U+B,KA8UvBiB,EA9UuB,OA4VJzJ,oBAAS,GA5VL,mBA4V/BgI,EA5V+B,KA4VpBsB,EA5VoB,OA6VNtJ,oBAAS,GA7VH,mBA6V/BkQ,EA7V+B,aA8V0BlQ,oBAAS,IA9VnC,mBA8V/BmQ,EA9V+B,KA8VLC,EA9VK,OA+VRpQ,mBAAS,IA/VD,mBA+V/BqQ,EA/V+B,KA+VtBC,EA/VsB,OAgWAtQ,oBAAS,GAhWT,mBAgW/BuQ,EAhW+B,KAgWlBC,EAhWkB,OAiWExQ,oBAAS,GAjWX,mBAiW/ByQ,EAjW+B,KAiWjBC,EAjWiB,OAkWU1Q,mBAAS,IAlWnB,oBAkW/B2Q,GAlW+B,MAkWbC,GAlWa,SAmWgB5Q,mBAAS,IAnWzB,qBAmW/B6Q,GAnW+B,MAmWVC,GAnWU,SAoWJ9Q,mBAAS,CAAC+Q,YAAa,KAAMC,UAAW,GAAIjS,KAAM,GAAIwQ,QAAS,KApW3D,qBAoW/B0B,GApW+B,MAoWpBC,GApWoB,SAqWjB,WAAqF,IAApFC,EAAmF,uDAAnE,GAAIC,EAA+D,uDAA7C,GACpDC,EAAeC,iBAAO,IAAIC,KAAqB,CACnDC,SAAUL,EACVM,WAAYL,KAEd,MAAO,CAACC,GAEUK,GAAbC,GA5W+B,wBA8WV3R,mBAAS,CAAEwL,UAAMhE,EAAWoK,WAAOpK,EAAWqK,aAASrK,EAAWsB,aAAStB,EAAWsK,SAAU,CAAEC,QAAS,EAAGC,OAAQ,KA9W5G,qBA8W/BhC,GA9W+B,MA8WvBiC,GA9WuB,MA+WtCjR,qBAAU,WACFwH,EAAOwH,QAAUxH,EAAOwH,OAAO5L,OAAS,GAC5C6F,IAAIC,KAAK,oBAAqB,qBAAsB,CAAEC,KAAM,CAAE6F,OAAQxH,EAAOwH,UAC1E7O,MAAK,SAAAkJ,GACJ9I,QAAQC,IAAI6I,GACNA,EAASxB,OAAkC,qBAAxBwB,EAASxB,MAAM2C,KACtCyG,IAAU,SAAAC,GAAC,sBAAUA,EAAV,CAAaL,SAAS,EAAMD,OAAO,EAAO9I,QAAQ,+BAAD,OAAiCN,EAAOwH,aACzF3F,EAAS2F,QAAU3F,EAAS2F,OAAO4B,OAC9CK,IAAU,SAAAC,GAAC,sBACNA,EADM,CAETJ,SAAU,CACRC,QAAS1H,EAAS2F,OAAOmC,aAAe,EACxCH,OAAQ3H,EAAS2F,OAAOoC,YAAc,GAExCP,SAAS,EACTD,OAAO,EACP9I,QAAQ,0BAAD,OAA4BuB,EAAS2F,OAAOjR,cAIxDuC,MAAMC,QAAQC,OAElB,CAACgH,EAAOwH,SAEX,IAAMqC,GAAa,CACjBjQ,QAAIoF,EACJ8K,SAAU,MACVN,OAAQ,CACNO,KAAM,EACNC,SAAU,EACVC,MAAO,GAETX,SAAU,CACRC,QAAS,EACTC,OAAQ,GAEVU,IAAK,CACHX,QAAS,GACTC,OAAQ,IArZ0B,GAwZZhS,mBAASqS,IAxZG,qBAwZ/BpE,GAxZ+B,MAwZxB0E,GAxZwB,MA2ZhCC,GAAiB,CACrBzE,IAAK,gBAqFP,SAAS0E,KAAW,IAAD,EACMrK,EAAOkH,KAAKoD,MAAM,KADxB,mBACZC,EADY,KACFrD,EADE,KAEjB,OAAO1B,EAAM+E,GAAUrD,GASzB,SAASsD,GAAiBD,EAAUrD,GAC7BlH,EAAOkH,OAAP,UAAmBqD,EAAnB,YAA+BrD,IAAY1B,EAAM+E,GAAUrD,GAAMjB,UAAUT,MAAQ,GACtFvE,GAAkB,SAAAwJ,GAAC,sBAASA,EAAT,CAAYvD,KAAK,GAAD,OAAKqD,EAAL,YAAiBrD,QA9flB,SAkgBvBwD,GAlgBuB,iFAkgBtC,WAAqCxK,GAArC,6BAAAgB,EAAA,wDAEwBhB,EAAMC,OAApBvG,EAFV,EAEUA,GAAIxB,EAFd,EAEcA,MACNmQ,EAAsB,gBAAP3O,EAAwBxB,EAAQqQ,GAAUF,YACzDC,EAAoB,cAAP5O,EAAsBxB,EAAQqQ,GAAUD,UAC3DE,GAAa,CAAEH,cAAaC,cACtBmC,EAA4B,CAChCC,GAAI,qBACJC,GAAI,mBACJC,GAAI,kBACJC,GAAI,oBACJC,GAAI,kBACJC,GAAI,iBACJC,GAAI,iBACJC,GAAI,iBACJC,GAAI,iBACJC,GAAI,oBACJC,GAAI,iBACJC,GAAI,8BACJC,GAAI,oEACJC,GAAI,iBACJC,GAAI,oBACJC,GAAI,mBACJC,GAAI,kCACJC,GAAI,iBACJC,GAAI,mBACJC,GAAI,iBACJC,GAAI,sBACJC,GAAI,mBACJC,GAAI,iBACJC,GAAI,mBACJC,GAAI,iBACJC,GAAI,oBAEF,UAAG9D,GAAH,OAAiBC,GAAY8D,MAAM3B,EAA0BpC,KAC/DD,GAAuB,eAClBD,GADiB,CAEpBxB,WAAW,GAAD,OAAK0B,GAAL,OAAmBC,EAAnB,4BAAgDD,EAAhD,0BAER,eAAgBJ,KACgDA,GAA7DtB,WAAe0F,EADgB,YAC8BpE,GAD9B,gBAEpCC,GAAoBmE,IAEtB3E,GAA4B,GAC5BnG,IAAIC,KAAK,iBAAkB,kBAAmB,CAAEC,KAAM,CAAE4G,cAAaC,eAClE7P,MAAK,SAAAkJ,GAEJ,GADA+F,GAA4B,GACxB/F,EAASC,QAAUD,EAAS2K,QAAU3K,EAAS2K,OAAOpD,MAAO,CAK/D,GAJAd,GAAuB,eAClBD,GADiB,CAEpBxB,WAAW,GAAD,OAAK0B,GAAL,OAAmBC,EAAnB,gCAER,eAAgBL,GAAkB,CAC8BA,GAA7DtB,WADgC,IACjB0F,EADgB,YAC8BpE,GAD9B,gBAEpCC,GAAoBmE,GAEtB7D,GAAa,CACXU,MAAOvH,EAAS2K,OAAOpD,MACvB7S,KAAMsL,EAAS2K,OAAOjW,KACtBwQ,QAASlF,EAAS2K,OAAOzF,QACzBwB,YAAa1G,EAAS2K,OAAOjE,YAC7BC,UAAW3G,EAAS2K,OAAOhE,iBAExB,GAAI3G,EAAS2K,SAAW3K,EAAS2K,OAAOpD,OAK7C,GAJAhB,GAAoB,eACfD,GADc,CAEjBtB,WAAW,GAAD,OAAK0B,GAAL,OAAmBC,EAAnB,oCAER,eAAgBH,GAAqB,CACiCA,GAAnExB,WADmC,IACpB4F,EADmB,YACiCpE,GADjC,gBAEvCC,GAAuBmE,SAIzB1T,QAAQC,IAAK6I,EAASxB,MAASwB,EAASxB,MAAQwB,MAGnD/I,OAAO,SAAAuH,GACNtH,QAAQC,IAAIqH,QAGhB+H,GAAoB,eACfD,GADc,CAEjBtB,WAAW,GAAD,OAAK0B,GAAL,OAAmBC,EAAnB,mCAAuDD,EAAvD,0BAER,eAAgBF,KACsDA,GAAnExB,WAAe4F,EADmB,YACiCpE,GADjC,gBAEvCC,GAAuBmE,KAvF7B,4CAlgBsC,sBA8lBtC,SAASC,GAAT,GAAgH,EAApEC,WAAoE,EAAxDC,gBAAwD,EAAvCC,UAAuC,EAA5BjH,QAA4B,EAAnBC,gBAI7F,SAASiH,GAAT,GAAkG,IAApEH,EAAmE,EAAnEA,WAAYC,EAAuD,EAAvDA,gBAAiBhH,EAAsC,EAAtCA,QAASC,EAA6B,EAA7BA,gBAAiBkH,EAAY,EAAZA,SACnF,OACEtL,IAAIC,KAAK,8BAA+B,+BAAgC,CAAEC,KAAM,CAAEgL,aAAYC,kBAAiBhH,UAASC,kBAAiBkH,cAEtIpU,MAAK,SAACQ,GACL,IAAKA,EAAO2I,QAAU3I,EAAOkH,MAC3B,MAAMlH,EAAOkH,MAGf,OADAtH,QAAQC,IAAI,8BAA+BG,GACpCA,KAERR,MAAK,SAACQ,GACL,MAAO,CACLyT,gBAAiBA,EACjBhH,QAASA,EACTC,gBAAiBA,EACjBmH,aAAc7T,EAAO6T,iBAMxBrU,KAAKsU,IAILtU,KAAKuU,IAELvU,KAAKwU,IACLrU,OAAM,SAACuH,GAMNtH,QAAQC,IAAIqH,MAKpB,SAAS4M,GAAT,GAAiI,IAA9ED,EAA6E,EAA7EA,aAAcI,EAA+D,EAA/DA,QAASxH,EAAsD,EAAtDA,QAASC,EAA6C,EAA7CA,gBAAiB+G,EAA4B,EAA5BA,gBAAiBS,EAAW,EAAXA,QACnH,GAAIL,GAAwC,WAAxBA,EAAalL,OAE/B,MAAO,CAAEkL,eAAcpH,UAASC,kBAAiB+G,mBAKnD,IAAIU,EAAgBF,EAChBA,EAAQG,eACRP,EAAaQ,eAAeD,eAEhC,MAC2B,oBAAzBD,EAAcxL,SACD,IAAZuL,GAA6C,4BAAzBC,EAAcxL,OAE5BqD,EACJsI,mBAAmBH,EAAcI,cAAe,CAAEC,eAAgBf,IAClEjU,MAAK,SAACQ,GACL,GAAIA,EAAOkH,MAIT,MAAMlH,EAEN,GAAoC,cAAhCA,EAAOmU,cAAcxL,OAGvB,MAAO,CACL8D,QAASA,EACTC,gBAAiBA,EACjBmH,aAAcA,EACdI,QAASA,EACTR,gBAAiBA,MAKxB9T,OAAM,SAACuH,GAINtH,QAAQC,IAAIqH,MAIT,CAAE2M,eAAcpH,UAASC,kBAAiB+G,mBAIrD,SAASO,GAAuBhU,GAE1BA,EAAO6T,aAAalL,OAO1B,SAASoL,GAAT,GAAmG,IAA5DF,EAA2D,EAA3DA,aAAcJ,EAA6C,EAA7CA,gBAAiBhH,EAA4B,EAA5BA,QAASC,EAAmB,EAAnBA,gBAC7E,GAA4B,WAAxBmH,EAAalL,OAEf,MAAO,CAAEkL,eAAcpH,UAASgH,mBAC3B,GAEL,4BADAI,EAAaQ,eAAeD,eAAezL,OAW3C,MALA8L,aAAaC,QAAQ,kBAAmBb,EAAaQ,eAAe5T,IACpEgU,aAAaC,QACX,mCACAb,EAAaQ,eAAeD,eAAezL,QAEvC,CAAEzB,MAAO,CAAEC,QAAS,4BAE1B,MAAO,CAAE0M,eAAcpH,UAASC,kBAAiB+G,mBAIrD,SAASF,GAAT,GAAiH,IAArEC,EAAoE,EAApEA,WAAYC,EAAwD,EAAxDA,gBAAiBC,EAAuC,EAAvCA,UAAWjH,EAA4B,EAA5BA,QAA4B,EAAnBC,gBAC3F,OACEpE,IAAIC,KACF,wBACA,yBACA,CACEC,KAAM,CAAEgL,aAAYC,kBAAiBC,eAItClU,MAAK,SAACQ,GACL,GAAIA,EAAOkH,MAET,MAAMlH,EAER,OAAOA,KAIRR,MAAK,SAACQ,GACL,MAAO,CAGLiU,QAASjU,EACTyT,gBAAiBA,EACjBhH,QAASA,EACTyH,SAAS,MAMZ1U,KAAKsU,IAELtU,KAAKwU,IACLrU,OAAM,SAACuH,GAMNtH,QAAQC,IAAIqH,MAKpB,SAASyN,GAAmBvF,EAAawF,GACvC,OAAQxF,GACN,IAAK,KACH,MAAO,CACLyF,MAAOD,EAAYzB,MAAM,gCAAiB,GAC1C2B,KAAMF,EAAYzB,MAAM,gCAAsB,GAC9C4B,MAAOH,EAAYzB,MAAM,8BAAe,GACxC6B,YAAaJ,EAAYzB,MAAM,gBAAgB,GAC/C8B,QAAS7F,GAGb,QACE,MAAO,CACLyF,MAAOD,EACPK,QAAS7F,IAvxBqB,8CA6xBtC,WAA4BrI,GAA5B,SAAAgB,EAAA,sDACEhB,EAAMiB,iBACNL,GAAa,GAIbM,IAAKE,2BAA2B3I,KAAhC,uCAAqC,WAAM4I,GAAN,uCAAAL,EAAA,yDACnCE,IAAKY,qBAAqBT,EACxB,CACEhL,KAAOkS,GAAUlS,MAAQyJ,EAAOzJ,KAChC8X,aAAcrO,EAAO8G,UACrBC,QAAU0B,GAAU1B,SAAW/G,EAAO+G,QACtC,oBAAsB0B,GAAUW,MAAX,UAAuBX,GAAUF,aAAjC,OAA+CE,GAAUD,WAAc,OAE7F7P,MAAK,SAAAkJ,GAAQ,OAAI9I,QAAQC,IAAI,uCAAwC6I,MACrE/I,OAAM,SAAAuH,GAAK,OAAItH,QAAQC,IAAI,oCAAqCqH,MAYnEoB,IAAIC,KAAK,0BAA2B,2BAClC,CACEC,KAAK,aACHC,WAAY,uCACZ+K,WAAYpL,EAAKC,WAAW,+BACvBiH,GAAUW,OAASX,GAAUlS,MAASyJ,EAAOzJ,OAAS,CAAEA,KAAOkS,GAAUlS,MAAQyJ,EAAOzJ,MAH3F,GAIEyJ,EAAO8G,WAAc,CAAEwH,MAAOtO,EAAO8G,WAJvC,IAKG2B,GAAUW,OAASX,GAAU1B,SAAY/G,EAAO+G,UAAY,CAAEA,QAAS+G,GAAmBrF,GAAUF,YAAaE,GAAU1B,UAL9H,GAME0B,GAAUW,OAAU,CAAEmF,MAAO,CAAE9L,KAAM,SAAUrK,MAAM,GAAD,OAAKqQ,GAAUF,aAAf,OAA6BE,GAAUD,gBAGlG7P,MAAK,SAAAkJ,GAAQ,OAAI9I,QAAQC,IAAI,gDAAiD6I,MAC9E/I,OAAM,SAAAuH,GAAK,OAAItH,QAAQC,IAAI,6CAA8CqH,MAGvE8E,GAAWE,EApCmB,wDAuC7BmJ,EAAcnJ,EAASoJ,WAAWC,gBAClCC,EAAmCf,aAAagB,QACpD,oCAzCiC,SA2CIzJ,EAAO0J,oBAAoB,CAChEpM,KAAM,OACNvG,KAAMsS,IA7C2B,mBA2C3BnO,EA3C2B,EA2C3BA,MAAOyO,EA3CoB,EA2CpBA,eAIXzO,EA/C+B,iBAgDjCtH,QAAQC,IAAI,qCAAsCqH,GAhDjB,KAiDzBA,EAAMoC,KAjDmB,OAkD1B,qBAlD0B,+BAmDzB,SAAU4F,KACiDA,GAAxDnM,KAAS6S,EADmB,YAC4B1G,GAD5B,UAEjCC,GAAuByG,IAEzB3G,GAAoB,eACfD,GADc,CAEjBjM,KAAMmE,EAAMC,WAEdQ,GAAa,GA3DgB,yFAiEjC/H,QAAQC,IAAI,iCAAkC8V,GAE9CxG,GAAuB,eAAKD,GAAN,CAA2BnM,MAAM,KACnD,SAAUiM,KAC2CA,GAAlDjM,KAAS8S,EADgB,YACyB7G,GADzB,UAE9BC,GAAoB4G,IAGhBpC,EAAkBkC,EAAclV,GAChC+S,EAAapL,EAAKC,WAAW,6BAC7BoE,EAAUyE,KAAU5E,MAAMzF,EAAOuH,kBAAkBpC,OAAOS,QAC1DC,EAAkBwE,KAAU5E,MAAMzF,EAAOuH,kBAAkBpC,OAAOU,gBAClEkH,EAAWkC,KAAOjP,EAAO5J,IAAIoE,OAAO,KACD,4BAArCmU,GAEI9B,EAAYe,aAAagB,QAAQ,mBACvClC,GAAiC,CAC/BC,aACAC,kBACAC,YACAjH,UACAC,qBAIFiH,GAAmB,CAAEH,aAAYC,kBAAiBhH,UAASC,kBAAiBkH,aACzEpU,MAAK,SAAAkJ,GACJf,GAAa,MAGdhI,OAAM,SAAAuH,GAAK,OAAItH,QAAQC,IAAI,6BAA8BqH,MA/F7B,4CAArC,uDAqGCvH,OAAM,SAAAuH,GAAK,OAAItH,QAAQC,IAAI,wCAAyCqH,MA3GvE,4CA7xBsC,sBA24BtC,OA7eA7H,qBAAU,WACR,IAAM0O,EAAOmD,KACPN,EAAO7C,EAAKzB,MAAMzF,EAAOuH,kBAAlB,IACP+B,EAAc9B,GAAO8B,SAASC,QAChC,CACEA,QAAS/B,GAAO8B,SAASC,QACzBC,OAASO,GAAQvC,GAAO8B,SAASC,QAAU,MAE7C/B,GAAO8B,SACLY,EAAOhD,EAAKzB,MAAMzF,EAAOuH,kBAAkBpC,OAAOU,gBAAgBjK,OACpE,CACE2N,QAhBW,GAiBXC,OAAS,IAACO,EAAOT,EAASE,SAE5B,CACED,QAAS,EACTC,OAAQ,GAERQ,EAAYD,EAAOT,EAASE,OAC5BS,EAASD,EAAWE,EAAIV,OAC9BW,GAAS,CACPvQ,GAAIsN,EAAKzB,MAAMzF,EAAOuH,kBAAkBpC,OAAOS,QAC/CkE,SA1Ba,MA2BbN,OAAQ,CACNO,OACAC,WACAC,SAEFX,WACAY,UAED,CAAC1C,GAAO8B,SAAUtJ,EAAOuH,iBAAkBvH,EAAOkH,OAErD1O,qBAAU,WACH+I,GACHH,IAAKE,2BACF3I,MAAK,SAAA2O,GACJ/B,EAAQ+B,MAETxO,MAAMC,QAAQC,QAGrBR,qBAAU,WACJ+I,GAAQA,EAAKC,aACfP,GAAkB,SAAAwJ,GAAC,sBACdA,EADc,CAEjBlU,KAAOgL,EAAKC,WAAWjL,KAAQgL,EAAKC,WAAWjL,KAAOkU,EAAElU,KACxDwK,MAAQQ,EAAKC,WAAWT,MAASQ,EAAKC,WAAWjL,KAAOkU,EAAE1J,MAC1DgG,QAAUxF,EAAKC,WAAWuF,QAAWxF,EAAKC,WAAWuF,QAAU0D,EAAE1D,QACjED,UAAYvF,EAAKC,WAAW6M,aAAgB9M,EAAKC,WAAW6M,aAAe5D,EAAE3D,UAC7ED,WAAa,sBAAuBtF,EAAKC,WAAcD,EAAKC,WAAW,qBAAuBiJ,EAAE5D,gBAE9F,sBAAuBtF,EAAKC,aAE9B0G,GAAgB,GAChBQ,IAAa,SAAAwG,GAAC,MAAK,CACjB3G,YAAahH,EAAKC,WAAW,qBAAqBpG,MAAM,EAAG,GAC3DoN,UAAWjH,EAAKC,WAAW,qBAAqBpG,MAAM,GACtDgO,OAAO,EACP7S,KAAMgL,EAAKC,WAAWjL,KACtBwQ,QAASxF,EAAKC,WAAWuF,gBAI9B,CAACxF,IACJ/I,qBAAU,WACRsP,GAAW,SAAAqH,GAAC,sBACPA,EADO,CAEVtI,YAAY,EACZtQ,MAAM,EACNwQ,SAAS,SAEV,CAAC0B,KAsaFf,EAEM,oCACE,kBAAC/N,EAAA,EAAD,CAAWC,GAAG,aACZ,kBAACsI,EAAA,EAAD,CAAMC,SAh5BoB,6CAg5BIpI,UAAU,WAAWqV,YAAU,GAC3D,kBAACtV,EAAA,EAAD,KACE,kBAACE,EAAA,EAAD,KACE,kBAACkI,EAAA,EAAKE,MAAN,KACE,kBAACF,EAAA,EAAKmN,MAAN,CACE5M,KAAK,WACL6M,MAAM,gCACNC,QAAStH,EACTvF,SAAU,WAAOwF,GAAiBD,OAGpCA,EAEM,oCACE,kBAAC/F,EAAA,EAAKI,MAAN,oBACA,kBAACJ,EAAA,EAAKE,MAAN,CAAYrI,UAAU,eACpB,kBAACmI,EAAA,EAAKK,QAAN,CACEjG,MAAO,CAAEuD,YAAa,QACtBjG,GAAG,cACH4V,GAAG,SACHpX,MAAOqQ,GAAUF,YACjB7F,SAAUgI,IAER,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAMrP,KAAI,SAAAkN,GAAW,OAC3K,4BAAQ/M,IAAK+M,GACVA,OAKT,kBAACrG,EAAA,EAAKK,QAAN,CACEjG,MAAO,CAAEuD,YAAa,QACtBjG,GAAG,YACH6I,KAAK,OACLgN,YAAY,UACZrX,MAAOqQ,GAAUD,UACjB9F,SAAUgI,GACVgF,QAASjH,GAAUW,QAAUnB,EAC7B0H,WAAchI,GAA8B,eAAgBQ,KAE5DR,EACE,kBAAChI,EAAA,EAAD,CAASrD,MAAO,CAAEsT,WAAY,QAAUhQ,UAAU,SAASnF,KAAK,OAChE,KAEJ,kBAACyH,EAAA,EAAKsB,KAAN,CAAWzJ,UAAU,cAArB,sCACqC,uBAAGpD,KAAK,8CAAR,iDADrC,2GAGA,kBAACuL,EAAA,EAAKsB,KAAN,CAAWlH,MAAO,CAACuT,MAAO,sBACvBxH,GAAoBxB,YAEvB,kBAAC3E,EAAA,EAAKsB,KAAN,CAAWzJ,UAAU,eAClBoO,GAAiBtB,cAK1B,KAEN,kBAAC3E,EAAA,EAAKE,MAAN,CAAYC,UAAU,QACpB,kBAACH,EAAA,EAAKI,MAAN,cACA,kBAACJ,EAAA,EAAKK,QAAN,CACEE,KAAK,OACLgN,YAAY,6BACZrX,MAAQqQ,GAAUlS,MAAQyJ,EAAOzJ,KACjCmZ,QAASvG,GAAU2G,QAAQC,WAAW,QACtCJ,UAAa,SAAU9H,IAAcsB,GAAU2G,QAAQC,WAAW,QAClErN,SAAU,SAAAwM,GAAM,IAAD,EAAsBA,EAAE/O,OAAfvG,EAAT,EAASA,GAAIxB,EAAb,EAAaA,MAAmB6I,GAAkB,SAAAwJ,GAAC,sBAASA,EAAT,eAAa7Q,EAAKxB,OAAU0P,EAAW,eAAID,EAAL,CAActR,MAAM,KAAQ4S,GAAU2G,QAAQE,eAAe,SACrKvQ,SAA+B,KAAnBgJ,GAAUlS,MAAiBkS,GAAUW,QAEnD,kBAAClH,EAAA,EAAKsB,KAAN,CAAWzJ,UAAU,cAArB,uNAGA,kBAACmI,EAAA,EAAKsB,KAAN,KAEK,SAAUqE,EACPsB,GAAU2G,QAAQxP,QAChB,OACCmI,GAAUlS,MAAQyJ,EAAOzJ,KAC1B,WACA,CACEwD,UAAW,cACXiP,SAAU,CACRiH,SAAU,0BAIhB,OAIV,kBAAC/N,EAAA,EAAKE,MAAN,CAAYC,UAAU,aACpB,kBAACH,EAAA,EAAKI,MAAN,mBACA,kBAACJ,EAAA,EAAKK,QAAN,CACEE,KAAK,QACLgN,YAAY,mBACZrX,MAAO4H,EAAO8G,UACd4I,QAASvG,GAAU2G,QAAQC,WAAW,aACtCJ,UAAa,cAAe9H,IAAcsB,GAAU2G,QAAQC,WAAW,aACvErN,SAAU,SAAAwM,GAAM,IAAD,EAAsBA,EAAE/O,OAAfvG,EAAT,EAASA,GAAIxB,EAAb,EAAaA,MAAmB6I,GAAkB,SAAAwJ,GAAC,sBAASA,EAAT,eAAa7Q,EAAKxB,OAAU0P,EAAW,eAAID,EAAL,CAAcf,WAAW,KAAQqC,GAAU2G,QAAQE,eAAe,gBAE5K,kBAAC9N,EAAA,EAAKsB,KAAN,CAAWzJ,UAAU,cAArB,6FAGA,kBAACmI,EAAA,EAAKsB,KAAN,KAEK,cAAeqE,EACZsB,GAAU2G,QAAQxP,QAChB,YACAN,EAAO8G,UACP,iBACA,CACE/M,UAAW,cACXiP,SAAU,CACRiH,SAAU,sCAIhB,OAIV,kBAAC/N,EAAA,EAAKE,MAAN,CAAYC,UAAU,WACpB,kBAACH,EAAA,EAAKI,MAAN,gBACA,kBAACJ,EAAA,EAAKK,QAAN,CACEiN,GAAG,WACHU,KAAM,EACN9X,MAAQqQ,GAAU1B,SAAW/G,EAAO+G,QACpC2I,SAAWjH,GAAUW,QAAUnB,MAAmBjI,EAAO+G,QACzDrE,SAAU,SAAAwM,GAAM,IAAD,EAAsBA,EAAE/O,OAAfvG,EAAT,EAASA,GAAIxB,EAAb,EAAaA,MAAmB6I,GAAkB,SAAAwJ,GAAC,sBAASA,EAAT,eAAa7Q,EAAKxB,QACpFqH,SAAkC,KAAtBgJ,GAAU1B,SAAoB0B,GAAUW,QAEtD,kBAAClH,EAAA,EAAKsB,KAAN,CAAWzJ,UAAU,cAArB,wFAKJ,kBAACC,EAAA,EAAD,KACE,kBAACkI,EAAA,EAAKE,MAAN,CAAYC,UAAU,QACpB,kBAACH,EAAA,EAAKI,MAAN,mBACA,4BAEI6E,OAAOC,KAAK5B,GAAOnK,KAAI,SAAAkP,GAAQ,OAC7B,wBACE/O,IAAK+O,EACLxQ,UAAWiG,EAAOkH,KAAKiJ,WAAW5F,GAAY,GAAK,cACnD,8BAAOA,EAAP,KAEEpD,OAAOC,KAAK5B,EAAM+E,IAAWlP,KAAI,SAAAZ,GAAI,OACnC,kBAACyH,EAAA,EAAKmN,MAAN,CAAY7T,IAAKf,GACf,kBAACyH,EAAA,EAAKmN,MAAMe,MAAZ,CACE9T,MAAO,CAAC+T,OAAQ,WAChB5N,KAAK,QACLhD,SAAqD,IAA1C+F,EAAM+E,GAAU9P,GAAMwL,UAAUT,MAC3C+J,QAASvP,EAAOkH,OAAP,UAAmBqD,EAAnB,YAA+B9P,GACxCiI,SAAU,WAAO8H,GAAiBD,EAAU9P,MAC9C,kBAACyH,EAAA,EAAKmN,MAAM/M,MAAZ,CACEhG,MAAO,CAAE+T,OAAmD,IAA1C7K,EAAM+E,GAAU9P,GAAMwL,UAAUT,MAAe,cAAgB,WACjFzL,UAAYiG,EAAOkH,OAAP,UAAmBqD,EAAnB,YAA+B9P,GAAU,SAAW,aAChE6V,QAAS,WAAO9F,GAAiBD,EAAU9P,KAH7C,UAIMA,GAJN,OAIwD,IAA1C+K,EAAM+E,GAAU9P,GAAMwL,UAAUT,MAAe,mBAAqB,eAUlG,kBAACtD,EAAA,EAAKE,MAAN,KACE,kBAACtI,EAAA,EAAD,KACE,kBAACE,EAAA,EAAD,KACE,kBAACkI,EAAA,EAAKI,MAAN,oBACA,6BACA,kBAAC,oBAAD,CACEiO,cAAc,cACdC,KAAMvB,KAAOjP,EAAOkG,MACpBuK,aAAc,SAAAvB,GAAOjO,GAAkB,SAAAwJ,GAAC,sBAAUA,EAAV,CAAavE,KAAMgJ,EAAElI,cAAe5Q,GAAI8Y,EAAEwB,IAAI1Q,EAAOiH,OAAQ,KAAKD,oBAC1G2J,QAAS5I,EACT6I,cAAe,gBAAGD,EAAH,EAAGA,QAAH,OAAiB3I,EAAe2I,IAC/C/W,GAAG,UAGP,kBAACI,EAAA,EAAD,KACE,kBAACkI,EAAA,EAAKI,MAAN,KAA0C,WAA5BtC,EAAOuH,iBAAiC,QAAU,SAAhE,cACA,6BACA,kBAACrF,EAAA,EAAKK,QAAN,CACE3I,GAAG,SACH6I,KAAK,SACLoO,IAAK,EACLvW,IAAkC,WAA5B0F,EAAOuH,iBAAiCnN,KAAK0W,MAAMC,GAzkCxD,GA0kCD3Y,MAAoC,WAA5B4H,EAAOuH,iBAAiCnN,KAAK0W,MAAM9Q,EAAOiH,OAAO,IAAMjH,EAAOiH,OACtFvE,SACE,SAAAwM,GACE,IAAMjI,EAAsC,WAA5BjH,EAAOuH,iBAAyH,GAAvFnN,KAAKE,IAAIF,KAAKyW,IAAIG,SAAS9B,EAAE/O,OAAO/H,OAAQgC,KAAK0W,MAAMC,IAA2B,GAAW3W,KAAKE,IAAIF,KAAKyW,IAAIG,SAAS9B,EAAE/O,OAAO/H,OA7kC7L,IA6kC0N,GACvN6I,GACE,SAAAwJ,GAAC,sBAEMA,EAFN,CAGGxD,SACA7Q,GAAI6Y,KAAOjP,EAAOkG,MAAMwK,IAAIzJ,EAAQ,KAAKD,uBAQvD,kBAAChN,EAAA,EAAD,KACE,kBAACkI,EAAA,EAAKI,MAAN,kBAGA,6BACC3H,KAAKC,oBAAeoE,EAAW,CAAEnE,KAAM,UAAWC,MAAO,QAASC,IAAK,YAAaP,OAAO,IAAItC,KAAK8H,EAAO5J,KAE7E,WAA5B4J,EAAOuH,iBAEF,kBAACrF,EAAA,EAAKsB,KAAN,CAAWzJ,UAAU,UAArB,UACMK,KAAK0W,MAAM9Q,EAAOiH,OAAS,IADjC,iBAC8C7M,KAAK0W,MAAM9Q,EAAOiH,OAAS,IAAM,EAAK,IAAM,GAD1F,WAIF,OAIV,kBAAC/E,EAAA,EAAKsB,KAAN,CAAWzJ,UAAU,cAArB,kDA5mCO,GA4mCP,YACsH,GAAtCK,KAAK0W,MAAMC,GAD3F,sJAIF,kBAAC7O,EAAA,EAAKE,MAAN,CAAYC,UAAU,UACpB,kBAACH,EAAA,EAAKI,MAAN,uBACA,kBAACJ,EAAA,EAAKK,QAAN,CACEE,KAAK,OACLrK,MAAO4H,EAAOwH,OACdkI,UAAWlI,GAAO4B,MAClBuG,YAAanI,GAAO6B,QACpB5J,WAAY+H,GAAO4B,MACnB1G,SACE,SAAAwM,GAAM,IAAD,EACiBA,EAAE/O,OAAfvG,EADJ,EACIA,GAAIxB,EADR,EACQA,MACX6I,GAAkB,SAAAwJ,GAAC,sBAASA,EAAT,eAAa7Q,EAAKxB,UAI3C,kBAAC8J,EAAA,EAAKsB,KAAN,CAAWzJ,UAAcyN,GAAOlH,QAAekH,GAAO6B,QAAW,cAAgB,eAAkB,cAE5F7B,GAAOlH,QACNkH,GAAOlH,QACP,gDAIV,kBAAC4B,EAAA,EAAKE,MAAN,KACE,kBAACF,EAAA,EAAKmN,MAAN,KACE,kBAACnN,EAAA,EAAKmN,MAAMe,MAAZ,CACE9T,MAAO,CAAC+T,OAAQ,WAChB5N,KAAK,QACLhD,UAAU,EACV8P,QAAqC,WAA5BvP,EAAOuH,iBAChB7E,SAAU,SAAAwM,GAAOjO,GAAkB,SAAAwJ,GAAC,sBAAUA,EAAV,CAAalD,iBAAkB,iBACrE,kBAACrF,EAAA,EAAKmN,MAAM/M,MAAZ,CACEhG,MAAO,CAAE+T,OAAuC,IAA9BhG,KAAUpE,UAAUT,MAAe,cAAgB,WACrEzL,UAAwC,WAA5BiG,EAAOuH,iBAAiC,SAAW,aAC/D+I,QAAS,SAAApB,GAAOjO,GAAkB,SAAAwJ,GAAC,sBAAUA,EAAV,CAAalD,iBAAkB,gBAHpE,oBAImB,6CAAS0J,OAAOC,WAAW7G,KAAU5E,MAAMO,OAAOL,KAAKwL,QAAQ,GAA/D,QAJnB,eAOF,kBAACjP,EAAA,EAAKmN,MAAN,KACE,kBAACnN,EAAA,EAAKmN,MAAMe,MAAZ,CACE9T,MAAO,CAAC+T,OAAQ,WAChB5N,KAAK,QACLhD,UAAU,EACV8P,QAAqC,WAA5BvP,EAAOuH,iBAChB7E,SAAU,SAAAwM,GAAOjO,GAAkB,SAAAwJ,GAAC,sBAAUA,EAAV,CAAalD,iBAAkB,iBACrE,kBAACrF,EAAA,EAAKmN,MAAM/M,MAAZ,CACEhG,MAAO,CAAE+T,OAAuC,IAA9BhG,KAAUpE,UAAUT,MAAe,cAAgB,WACrEzL,UAAwC,WAA5BiG,EAAOuH,iBAAiC,SAAW,aAC/D+I,QAAS,SAAApB,GAAOjO,GAAkB,SAAAwJ,GAAC,sBAAUA,EAAV,CAAalD,iBAAkB,gBAHpE,mBAIkB,6CAAS0J,OAAOC,WAAW7G,KAAU5E,MAAMC,OAAOC,KAAKwL,QAAQ,GAA/D,QAJlB,cAOF,kBAACjP,EAAA,EAAKsB,KAAN,CAAWzJ,UAAU,cAArB,2FAEE,6BAFF,iBAGgB,6CAASkX,OAAOC,WAAW7G,KAAU5E,MAAMO,OAAOL,KAAKwL,QAAQ,GAA/D,QAHhB,eAMF,6BACA,kBAACC,GAAA,EAAD,CAAO3W,KAAK,MACV,+BACE,4BACE,wBAAIV,UAAU,cAAd,eAGA,wBAAIA,UAAU,yBAAd,OAGA,wBAAIA,UAAU,yBAAd,cAGA,wBAAIA,UAAU,yBAAd,YAKJ,+BACE,4BACE,wBAAIsX,QAAQ,IAAItX,UAAU,cACvBkV,KAAOjP,EAAOkG,MAAM1L,OAAO,eAD9B,YAGGyU,KAAOjP,EAAOkG,MAAMwK,IAAI,EAAgC,WAA5B1Q,EAAOuH,iBAAiC,IAAM,KAAK/M,OAAO,iBAG3F,4BACE,4BACGwF,EAAOkH,MAEV,wBAAInN,UAAU,cAAd,KAGA,wBAAIA,UAAU,cACXqQ,GAAc,IACd6G,OAAOC,WAAWzL,GAAM+D,OAAOO,MAAMoH,QAAQ,IAEhD,wBAAIpX,UAAU,cACXqQ,GAAc,IACd6G,OAAOC,WAAWzL,GAAM+D,OAAOO,MAAMoH,QAAQ,KAI/C1L,GAAM6D,SAASE,OAEV,4BACE,wBAAI6H,QAAQ,IAAItX,UAAU,cAA1B,aACa0L,GAAM6D,SAASC,QAD5B,MAGA,wBAAIxP,UAAU,cACXqQ,GAAc,IACd6G,OAAOC,WAAWzL,GAAM6D,SAASE,QAAQ2H,QAAQ,KAIxD,KAEN,4BACE,wBAAIE,QAAQ,IAAItX,UAAU,cAA1B,YAGA,wBAAIA,UAAU,cACXqQ,GAAc,IACd6G,OAAOC,WAAWzL,GAAM+D,OAAOQ,UAAUmH,QAAQ,KAInD1L,GAAMyE,IAAIV,OAEL,4BACE,wBAAI6H,QAAQ,IAAItX,UAAU,yBAA1B,mBACmB0L,GAAMyE,IAAIX,QAD7B,MAGA,wBAAIxP,UAAU,cACXqQ,GAAc,IACd6G,OAAOC,WAAWzL,GAAMyE,IAAIV,QAAQ2H,QAAQ,KAInD,KAEN,4BACE,wBAAIE,QAAQ,IAAItX,UAAU,cAA1B,SAGA,wBAAIA,UAAU,cACXqQ,GAAc,IACd6G,OAAOC,WAAWzL,GAAM+D,OAAOS,OAAOkH,QAAQ,OAKvD,6BACA,kBAACjP,EAAA,EAAKE,MAAN,KACE,kBAACF,EAAA,EAAKI,MAAN,sBACA,kBAAC,eAAD,CACE1I,GAAG,wBACH8I,SAAU,WACR,GAAI,SAAUyF,GAAkB,CACyBA,GAAlDjM,KAD0B,IACjB8S,EADgB,YACyB7G,GADzB,UAE9BC,GAAoB4G,KAGxBsC,QAAS,CACPhV,MAAO,CACLyN,KAAM,CACJ8F,MAAO,kBACP0B,WAAY,qBACZC,cAAe,cACfC,SAAU,OACV,gBAAiB,CACf5B,MAAO,WAET6B,UAAW,WAEbrI,QAAS,CACPwG,MAAO,UACP6B,UAAW,eAInB,kBAACxP,EAAA,EAAKsB,KAAN,CAAWzJ,UAAU,eAClBoO,GAAiBjM,MAEpB,kBAACgG,EAAA,EAAKsB,KAAN,CAAWzJ,UAAU,cAArB,gEACiEiG,EAAOiH,QAAqC,WAA5BjH,EAAOuH,iBAAiC,GAAK,GAD9H,IACiK,WAA5BvH,EAAOuH,iBAAiC,QAAU,SADvL,IACiM,6BAE3LvH,EAAOiH,QAAqC,WAA5BjH,EAAOuH,iBAAiC,GAAK,GAAM,EAE/D,kIAAqI,WAA5BvH,EAAOuH,iBAAiC,OAAS,QAA1J,KAGA,2HAKZ,kBAACrF,EAAA,EAAKE,MAAN,KACE,kBAACF,EAAA,EAAKmN,MAAN,CACE5M,KAAK,WACL6M,MACE,8DAAmC,uBAAG3Y,KAAK,SAASwJ,OAAO,UAAxB,wBAAnC,KAEFoP,QAASvP,EAAOyH,cAChB/E,SAAU,WAAOzB,GAAkB,SAAAwJ,GAAC,sBAASA,EAAT,CAAYhD,eAAgBgD,EAAEhD,yBAI1E,kBAAClI,EAAD,CACEkD,KAAK,SACL1I,UAAU,cACVyF,UAAWA,EACXC,WA71B8B,IAAzC0H,OAAOC,KAAKe,IAAkBvM,QAC3BuN,GAAU2G,QAAQ6B,YAClBxM,GAAUE,GACXrF,EAAOyH,gBAs1BA,qBASJ,kBAAC9N,EAAA,EAAD,CAAWC,GAAG,cACZ,kBAACgY,GAAA,EAAD,CAAMC,UAAW7R,EAAOkH,KAAKoD,MAAM,KAAK,GAAIwH,SAAU,SAACvH,GAAD,OAv1BlE,SAAyBA,GAClBvK,EAAOkH,KAAKiJ,WAAW5F,IAC1BC,GAAiBD,EAAUpD,OAAOC,KAAK5B,EAAM+E,IAAWlD,MAAK,SAAAC,GAAC,OAAI9B,EAAM+E,GAAUjD,GAAGrB,UAAUT,MAAQ,MAq1B3BuM,CAAgBxH,KAEhFpD,OAAOC,KAAK5B,GAAOnK,KAAI,SAAAkP,GAAQ,OAC7B,kBAACyH,GAAA,EAAD,CAAKxW,IAAK+O,EAAU0H,SAAU1H,EAAU9O,MAAO8O,GAC7C,kBAAC2H,GAAA,EAAD,KAEE/K,OAAOC,KAAK5B,EAAM+E,IAAWlP,KAAI,SAAAZ,GAAI,OACnC,kBAAC2B,EAAA,EAAD,CACEZ,IAAKf,EACLV,UAAYiG,EAAOkH,OAAP,UAAmBqD,EAAnB,YAA+B9P,GAAU,SAAW,aAChE6V,QAAS,kBAAM9F,GAAiBD,EAAW9P,KAC3C,kBAAC2B,EAAA,EAAKC,OAAN,CACEC,MAAO,CAAC+T,OAAQ,WAChBb,GAAG,OACH,0BAAMzV,UAAS,mCAA+ByL,EAAM+E,GAAU9P,GAAMwL,UAAUT,MAAQ,EAAK,OAAUA,EAAM+E,GAAU9P,GAAMwL,UAAUT,MAAQ,EAAK,MAAQ,SAA1J,cACa,gCAASA,EAAM+E,GAAU9P,GAAMwL,UAAUT,SAGxD,kBAACpJ,EAAA,EAAK+V,IAAN,CACEC,QAAQ,MACRtW,IAAK0J,EAAM+E,GAAU9P,GAAMsB,MAC3BhC,UAAU,UACVuC,MAAO,CAAC+T,OAAQ,UAAWzS,MAAO,OAAQyU,QAAUrS,EAAOkH,OAAP,UAAmBqD,EAAnB,YAA+B9P,GAAU,EAAI,MACnG,kBAAC2B,EAAA,EAAKM,KAAN,KACE,kBAACN,EAAA,EAAKO,MAAN,KACGlC,GAEH,kBAAC2B,EAAA,EAAKoH,KAAN,KACGgC,EAAM+E,GAAU9P,GAAMmC,aAEzB,kBAACR,EAAA,EAAKoH,KAAN,CAAWgM,GAAG,OACZ,+CACA,4BACE,wBAAIzV,UAAU,kBAAd,eAAkCkX,OAAOC,WAAW1L,EAAM+E,GAAU9P,GAAMgL,MAAMM,QAAQJ,KAAKwL,QAAQ,GAArG,gBACA,wBAAIpX,UAAU,kBAAd,eAAkCkX,OAAOC,WAAW1L,EAAM+E,GAAU9P,GAAMgL,MAAMK,UAAUH,KAAKwL,QAAQ,GAAvG,kBACA,wBAAIpX,UAAU,gBACZ,6CAASkX,OAAOC,WAAW1L,EAAM+E,GAAU9P,GAAMgL,MAAMC,OAAOC,KAAKwL,QAAQ,GAA3E,QADF,WAGA,wBAAIpX,UAAU,gBACZ,6CAASkX,OAAOC,WAAW1L,EAAM+E,GAAU9P,GAAMgL,MAAMO,OAAOL,KAAKwL,QAAQ,GAA3E,QADF,cAMF3L,EAAM+E,GAAU9P,GAAM0L,YACtB,kBAAC/J,EAAA,EAAKoH,KAAN,CAAWgM,GAAG,OACZ,+CACA,4BAEIrI,OAAOC,KAAK5B,EAAM+E,GAAU9P,GAAM0L,YAAY9K,KAAI,SAAAiX,GAAI,OACpD,wBAAI9W,IAAK8W,GAAOA,EAAhB,KAAwB9M,EAAM+E,GAAU9P,GAAM0L,WAAWmM,GAAM,IAA/D,aAGJ,sCAEM9M,EAAM+E,GAAU9P,GAAM0L,WAAWvI,MAAQ,KAAQ4H,EAAM+E,GAAU9P,GAAM0L,WAAWC,MAAQ,MAAM+K,QAAQ,GAF9G,KAGK,mCAEL,wCAEM3L,EAAM+E,GAAU9P,GAAM0L,WAAWvI,MAAQ,KAAQ4H,EAAM+E,GAAU9P,GAAM0L,WAAWzL,OAAS,MAAQ8K,EAAM+E,GAAU9P,GAAM0L,WAAWC,MAAQ,MAAM+K,QAAQ,GAFhK,KAGK,oCAGP,6CACA,4BAEIhK,OAAOC,KAAK5B,EAAM+E,GAAU9P,GAAM4L,MAAMhL,KAAI,SAAAiX,GAAI,OAC9C,wBAAI9W,IAAK8W,GAAOA,EAAhB,KAAwB9M,EAAM+E,GAAU9P,GAAM4L,KAAKiM,GAAM,IAAzD,0BAe1B,4BACE,wBAAIvY,UAAU,gBACZ,iDADF,6BAGA,wBAAIA,UAAU,gBACZ,mDADF,+CAOR,kBAAC4F,EAAA,EAAD,CAASC,UAAU,WC17CZ,SAAS2S,KAAe,IAAD,EACM/a,wBAASwH,GADf,mBAC7BwT,EAD6B,KACdC,EADc,KAepC,OAZAja,qBAAU,WACHga,GACH/Q,IAAIC,KAAK,4BAA6B,6BAA8B,CAAEC,KAAM,CAAEC,WAAY,0CACvFjJ,MAAK,SAAAkJ,GACAA,EAASC,QAAUD,EAAS2Q,eAC9BC,EAAiB5Q,EAAS2Q,kBAG7B1Z,MAAMC,QAAQC,QAKnBwZ,EAEM,oCACE,4BAEIA,EAAcxN,KAAK3J,KAAI,SAAA2R,GAAY,OACjC,wBAAIxR,IAAKwR,EAAapT,IAAtB,iBACiBoT,EAAapT,GAAG,6BAC9BqV,KAAiC,IAA1BjC,EAAa0F,YAAmBlY,SAF1C,YAIGyU,KAAkC,IAA3BjC,EAAa2F,aAAoBnY,SACzC,4BAEIwS,EAAa4F,MAAM5N,KAAK3J,KAAI,SAAAwX,GAAgB,OAC1C,wBAAIrX,IAAKqX,EAAiBjZ,IACvBiZ,EAAiBpN,MAAMqN,SAASlc,QAAQ,UAAW,IAAI,6BACvDqa,OAAOC,WAAW2B,EAAiBpN,MAAMsN,YAAc,KAAK5B,QAAQ,GAFvE,IAE4E0B,EAAiBpN,MAAMqE,SAFnG,MAEgH+I,EAAiBpN,MAAMuN,UAAUC,SAAS,uCASxK,6BACG5Z,KAAK6Z,UAAUV,EAAe,KAAM,KAI3C,KClDO,SAASW,KACtB,OACE,yBAAKpZ,UAAU,YACb,uDCYS,SAASqZ,KACtB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,KAChB,kBAACnc,EAAD,OAEF,kBAAC,IAAD,CAAOkc,OAAK,EAACC,KAAK,YAChB,kBAACvU,EAAD,OAEF,kBAAC,IAAD,CAAOsU,OAAK,EAACC,KAAK,UAChB,kBAAChU,EAAD,OAEF,kBAACjJ,EAAD,CAAsBgd,OAAK,EAACC,KAAK,UAC/B,kBAAC5S,EAAD,OAEF,kBAACrK,EAAD,CAAsBgd,OAAK,EAACC,KAAK,gBAC/B,kBAAC7P,EAAD,OAEF,kBAACpN,EAAD,CAAsBgd,OAAK,EAACC,KAAK,WAC/B,kBAAC/O,GAAD,OAEF,kBAAC1O,EAAD,CAAoBwd,OAAK,EAACC,KAAK,gBAC7B,kBAACpO,GAAD,OAEF,kBAACrP,EAAD,CAAoBwd,OAAK,EAACC,KAAK,iBAC7B,kBAACf,GAAD,OAEF,kBAAC1c,EAAD,CAAoBwd,OAAK,EAACC,KAAK,aAC7B,kBAAC1Q,EAAD,OAEF,kBAAC/M,EAAD,CAAoBwd,OAAK,EAACC,KAAK,mBAC7B,kBAACzQ,EAAD,OAEF,kBAAChN,EAAD,CAAoBwd,OAAK,EAACC,KAAK,sBAC7B,kBAACrP,GAAD,OAEF,kBAAC,IAAD,KACE,kBAACkP,GAAD,Q,aCgGOI,OArIf,WACE,IAAM5S,EAAUC,cAGV4S,EAAcC,UAAU,6BAExBC,EAAgBC,YACjBC,aAAD,wBAJgB,gBAIhB,6GAJgB,gBAIhB,iBAEuCJ,GACtCK,cAAaC,YAAd,8CAPgB,gBAOhB,iBAC6DN,GAD7D,gCAPgB,gBAOhB,iBAE+CA,GAG7CO,EAAaJ,aAAYC,aAAb,wBAZE,gBAYF,gHAZE,gBAYF,iBAE6BJ,GAjBlC,EAmBmChc,oBAAS,GAnB5C,mBAmBNwc,EAnBM,KAmBYC,EAnBZ,OAoBmCzc,oBAAS,GApB5C,mBAoBNrB,EApBM,KAoBW0K,EApBX,iDAwBb,sBAAAK,EAAA,+EAEUE,IAAK8S,iBAFf,OAGIrT,GAAqB,GAHzB,+CAMc,oBAAN,MACFT,EAAQ,EAAD,IAPb,OAUE6T,GAAoB,GAVtB,0DAxBa,kEAqCb,sBAAA/S,EAAA,sEACQE,IAAK+S,UADb,OAEEtT,GAAqB,GACrBF,EAAQsB,KAAK,UAHf,4CArCa,sBA2Cb,OArBAzJ,qBAAU,YAtBG,mCAsBK4b,KAAa,KAsB5BJ,GACD,oCACE,kBAACra,EAAA,EAAD,CAAWE,OAAK,GACd,kBAACC,EAAA,EAAD,KACE,kBAAC+B,EAAA,EAAD,CAAOC,IAAK,YAAa/B,UAAU,YAErC,kBAACsa,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAKva,UAAU,WACb,8BACE,kBAAC,IAAD,CAAiBA,UAAU,2BAA2BiK,KAAK,UAD7D,OAGE,0BAAMjK,UAAU,cAAhB,QAHF,IAG2C,mDAH3C,OAKE,uBAAGpD,KAAMod,GACP,kBAAC,IAAD,CAAiB/P,KAAM,CAAC,MAAO,SAAU6L,MAAM,aANnD,YAUE,uBAAG1P,OAAO,SAASxJ,KAAM+c,GACvB,kBAAC,IAAD,CAAiB1P,KAAM,CAAC,MAAO,mBAAoB6L,MAAM,eAI/D,kBAACyE,EAAA,EAAD,CAAKva,UAAU,UACb,kBAAC,gBAAD,CAAe3D,GAAG,WAChB,kBAACme,EAAA,EAAD,eAEF,kBAAC,gBAAD,CAAene,GAAG,SAChB,kBAACme,EAAA,EAAD,kBAEF,kBAAC,gBAAD,CAAene,GAAG,gBAChB,kBAACme,EAAA,EAAD,CAASxa,UAAU,OAAnB,aAEF,kBAAC,gBAAD,CAAe3D,GAAG,iBAChB,kBAACme,EAAA,EAAD,mBAGJ,kBAACD,EAAA,EAAD,CAAKva,UAAU,WAEX5D,EAEM,oCACE,kBAAC,gBAAD,CAAeC,GAAG,aAChB,kBAACme,EAAA,EAAD,iBAEF,kBAACA,EAAA,EAAD,CAASjE,QAzFhB,4CAyFO,YAGJ,oCACE,kBAAC,gBAAD,CAAela,GAAG,WAChB,kBAACme,EAAA,EAAD,iBAEF,kBAAC,gBAAD,CAAene,GAAG,UAChB,kBAACme,EAAA,EAAD,oBAOhB,kBAAC9e,EAAW+e,SAAZ,CAAqBpc,MAAO,CAAEjC,kBAAiB0K,yBAC7C,kBAACuS,GAAD,OAEF,kBAACzZ,EAAA,EAAD,CAAWC,GAAG,SAASC,OAAK,GAC1B,kBAACF,EAAA,EAAD,KACE,kBAACG,EAAA,EAAD,CAAKC,UAAU,uDACb,kBAACC,EAAA,EAAD,CAAKC,GAAI,GACP,kBAAC,gBAAD,CAAe7D,GAAG,YAChB,kBAACme,EAAA,EAAD,CAAS/E,GAAG,KAAZ,YAFJ,YAOE,kBAAC,gBAAD,CAAepZ,GAAG,UAChB,kBAACme,EAAA,EAAD,CAAS/E,GAAG,KAAZ,yBARJ,YAaE,uBAAG7Y,KAAK,6BAAR,sBACA,6BAdF,mE,mBC/HG,GACT,CACF8d,OAAQ,YACRC,OAAQ,+DAHG,GAKD,CACVD,OAAQ,YACRE,IAAK,8DAPM,GASJ,CACPF,OAAQ,YACRG,aAAc,sBACdC,cAAe,6BACfC,iBAAkB,kD,8BCDFC,QACW,cAA7Bte,OAAOC,SAASmH,UAEe,UAA7BpH,OAAOC,SAASmH,UAEhBpH,OAAOC,SAASmH,SAASyO,MACvB,2DCCN0I,KAAQtE,IAAIuE,KAASC,KAAkBC,MAEvC,IAAMC,GAAgBC,aAAW,+GAEjCC,KAAQC,UAAU,CAChBnU,KAAM,CACJoU,iBAAiB,EACjBC,OAAQC,GAAejB,OACvBkB,WAAYD,GAAed,aAC3BgB,eAAgBF,GAAeZ,iBAC/Be,oBAAqBH,GAAeb,eAEtCiB,QAAS,CACPL,OAAQC,GAAUjB,OAClBsB,OAAQL,GAAUhB,OAClBkB,eAAgBF,GAAeZ,kBAEjCrT,IAAK,CACHuU,UAAW,CACT,CACEzf,KAAM,oBACN0f,SAAUP,GAAkBf,IAC5Bc,OAAQC,GAAkBjB,QAE5B,CACEle,KAAM,iBACN0f,SAAUP,GAAkBf,IAC5Bc,OAAQC,GAAkBjB,QAE5B,CACEle,KAAM,0BACN0f,SAAUP,GAAkBf,IAC5Bc,OAAQC,GAAkBjB,QAE5B,CACEle,KAAM,0BACN0f,SAAUP,GAAkBf,IAC5Bc,OAAQC,GAAkBjB,QAE5B,CACEle,KAAM,8BACN0f,SAAUP,GAAkBf,IAC5Bc,OAAQC,GAAkBjB,QAE5B,CACEle,KAAM,4BACN0f,SAAUP,GAAkBf,IAC5Bc,OAAQC,GAAkBjB,QAS5B,CACEle,KAAM,wBACN0f,SAAUP,GAAkBf,IAC5Bc,OAAQC,GAAkBjB,YAMlCyB,IAASC,OACP,kBAAC,gBAAD,KACE,kBAAC,YAAD,CAAUhR,OAAQiQ,IAChB,kBAAC,GAAD,QAGJgB,SAASC,eAAe,SDyCpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrB7d,MAAK,SAAA8d,GACJA,EAAaC,gBAEd5d,OAAM,SAAAuH,GACLtH,QAAQsH,MAAMA,EAAMC,c","file":"static/js/main.1fc5326d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/privacy.bf6275f6.md\";","module.exports = __webpack_public_path__ + \"static/media/terms.a65f2484.md\";","import { useContext, createContext } from 'react';\n\nexport const AppContext = createContext(null);\n\nexport function useAppContext() {\n  return useContext(AppContext);\n}\n","import React from 'react';\nimport { Route, Redirect, useLocation } from 'react-router-dom';\nimport { useAppContext } from '../libs/contextLib';\n\nexport default function AuthenticatedRoute({ children, ...rest }) {\n  const { pathname, search } = useLocation();\n  const { isAuthenticated } = useAppContext();\n  return (\n    <Route {...rest}>\n      {isAuthenticated ? (\n        children\n      ) : (\n        <Redirect to={\n          `/login?redirect=${pathname}${search}`\n        } />\n      )}\n    </Route>\n  );\n}\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { useAppContext } from '../libs/contextLib';\n\nfunction querystring(name, url = window.location.href) {\n  name = name.replace(/[[]]/g, \"\\\\$&\");\n\n  const regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\", \"i\");\n  const results = regex.exec(url);\n\n  if (!results) {\n    return null;\n  }\n  if (!results[2]) {\n    return \"\";\n  }\n\n  return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n}\n\nexport default function UnauthenticatedRoute({ children, ...rest }) {\n  const { isAuthenticated } = useAppContext();\n  const redirect = querystring(\"redirect\");\n  return (\n    <Route {...rest}>\n      {!isAuthenticated ? (\n        children\n      ) : (\n        <Redirect to={redirect === \"\" || redirect === null ? \"/\" : redirect} />\n      )}\n    </Route>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport Image from 'react-bootstrap/Image';\nimport GoogleMapReact from 'google-map-react';\nimport Thermometer from 'react-thermometer-component';\n\nexport default function Home() {\n  const lairImages = ['/lair-baby.png', '/lair-mama.png', '/lair-papa.png'];\n  const lairIcons = ['/lair-baby-icon.png', '/lair-mama-icon.png', '/lair-papa-icon.png'];\n  const bikeImages = ['/bike-rack.png', '/bike-small.png', '/bike-large.png'];\n  const bikeIcons = ['/bike-rack-icon.png', '/bike-small-icon.png', '/bike-large-icon.png'];\n\n  const CopyApi = 'https://raw.githubusercontent.com/bearslairs/bearslairs-data/master/copy';\n  const UbiBotApi = 'https://api.ubibot.io/channels/13604?api_key=609210eb2306427a88d662d48ddb578d';\n  const [content, setContent] = useState({ language: 'en', copy: { carousel: [], blurbs: [], cards: []}});\n  const [climate, setClimate] = useState({ temperature: { created_at: Date.now(), value: 0 }, humidity: { created_at: Date.now(), value: 0 }});\n\n  useEffect(() => {\n    fetch(CopyApi + '/' + content.language + '/home.json')\n      .then(responseCopyApi => responseCopyApi.json())\n      .then((copy) => {\n        setContent({\n          language: content.language,\n          copy: copy\n        });\n      })\n      .catch(console.log);\n  }, [content]);\n  useEffect(() => {\n    fetch(UbiBotApi)\n      .then(responseUbiBotApi => responseUbiBotApi.json())\n      .then((container) => {\n        if (container.result === 'success') {\n          let lastValues = JSON.parse(container.channel.last_values);\n          setClimate({\n            temperature: lastValues.field1,\n            humidity: lastValues.field2\n          });\n        }\n      })\n      .catch(console.log);\n  }, [climate]);\n\n  return (\n    <>\n      <Container id=\"header\" fluid>\n        <h2>\n          secure self storage in bansko<br />\n          with access at your convenience\n        </h2>\n      </Container>\n      <Container id=\"environment\">\n        <h3>\n          real-time environment monitoring\n        </h3>\n        <p>\n          we monitor temperature, humidity and light within the facility and publish those readings at\n          &nbsp;\n          <a href=\"https://space.ubibot.io/space/user/device/channel-id/13604\">\n            ubibot.io/bearslairs-bansko\n          </a>,\n          <br />\n          so our customers can stay informed of the environmetal conditions of their self-storage.\n          The latest readings taken were:\n        </p>\n        <Row className=\"justify-content-xl-center justify-content-md-center\">\n          <Col xl=\"auto\" md=\"auto\">\n            <Thermometer\n              theme=\"dark\"\n              value={(Math.round(climate.temperature.value * 10) / 10)}\n              max={(climate.temperature.value * 1.3)}\n              steps=\"3\"\n              format=\"°C\"\n              size=\"large\"\n              height=\"200\"\n            />\n          </Col>\n          <Col xl=\"auto\" md=\"auto\">\n            <h4>temperature</h4>\n            {\n              new Intl.DateTimeFormat(\"en-GB\", {\n                year: \"numeric\",\n                month: \"long\",\n                day: \"2-digit\",\n                hour: 'numeric',\n                minute: 'numeric',\n                second: 'numeric',\n                timeZone: 'Europe/Sofia'\n              }).format(new Date(climate.temperature.created_at))\n            }:&nbsp;\n            <strong>{(Math.round(climate.temperature.value * 10) / 10)}°C</strong>\n            <h4>humidity</h4>\n            {\n              new Intl.DateTimeFormat(\"en-GB\", {\n                year: \"numeric\",\n                month: \"long\",\n                day: \"2-digit\",\n                hour: 'numeric',\n                minute: 'numeric',\n                second: 'numeric',\n                timeZone: 'Europe/Sofia'\n              }).format(new Date(climate.humidity.created_at))\n            }:&nbsp;\n            <strong>{climate.humidity.value}%</strong>\n          </Col>\n        </Row>\n      </Container>\n      <Container id=\"about\" fluid>\n        {\n          content.copy.blurbs.slice(0, 1).map((blurb, blurbIndex) => (\n            <Container key={blurbIndex}>\n              <h3>{blurb.title}</h3>\n              <Row className=\"justify-content-xl-center justify-content-md-center\">\n              {\n                blurb.copy.map((paragraph, paragraphIndex) => (\n                  <Col xl={(12 / blurb.copy.length)} key={paragraphIndex}>\n                    <Image src={paragraph.image} />\n                    <p>{paragraph.text}</p>\n                  </Col>\n                ))\n              }\n              </Row>\n            </Container>\n          ))\n        }\n      </Container>\n      <Container id=\"security\" fluid>\n        <Container>\n          <Row className=\"justify-content-xl-center justify-content-md-center\">\n            {\n              content.copy.blurbs.slice(1, 2).map((blurb, blurbIndex) => (\n                <Col xl={7} key={blurbIndex}>\n                  <h3>{blurb.title}</h3>\n                  {\n                    blurb.copy.map((paragraph, paragraphIndex) => (\n                      <p key={paragraphIndex}>\n                        {paragraph}\n                      </p>\n                    ))\n                  }\n                  <LinkContainer to=\"/booking/new\">\n                    <Button>book now</Button>\n                  </LinkContainer>\n                </Col>\n              ))\n            }\n          </Row>\n        </Container>\n      </Container>\n      <Container id=\"lair\">\n        <h3>\n          choose your lair\n        </h3>\n        <Row className=\"justify-content-xl-center justify-content-md-center\">\n          {\n            content.copy.cards.slice(0, 3).map((card, cardIndex) => (\n              <Col key={cardIndex}>\n              <Card className=\"h-100\">\n                <Card.Header>\n                  {card.title}\n                </Card.Header>\n                <div style={{height: '200px', backgroundImage: 'url(' + lairImages[cardIndex] + ')'}}>\n                  <Image src={lairIcons[cardIndex]} alt={card.image.alt} style={{marginTop: '25px'}} />\n                </div>\n                <Card.Body>\n                  <Card.Title>\n                    {card.description.join(' ')}\n                  </Card.Title>\n                  <hr />\n                  <ul style={{lmargin: 0, padding: 0}}>\n                    {\n                      card.features.map((feature, featureIndex) => (\n                        <li key={featureIndex} style={{listStyleType: 'none', fontWeight: 600, margin: 0, padding: 0}}>\n                          {feature.text}\n                          <ul style={{lmargin: 0, padding: 0}}>\n                            {\n                              feature.details.map((detail, detailIndex) => (\n                                <li key={detailIndex} style={{listStyleType: 'none', fontWeight: 'normal', margin: 0, padding: 0}}>\n                                  {detail}\n                                </li>\n                              ))\n                            }\n                          </ul>\n                        </li>\n                      ))\n                    }\n                  </ul>\n                </Card.Body>\n                <Card.Footer>\n                  <LinkContainer to={card.button.link}>\n                    <Button>{card.button.text}</Button>\n                  </LinkContainer>\n                </Card.Footer>\n              </Card>\n              </Col>\n            ))\n          }\n        </Row>\n      </Container>\n      <Container id=\"adaptive\" fluid>\n        {\n          content.copy.blurbs.slice(2, 3).map((blurb, blurbIndex) => (\n            <Container key={blurbIndex}>\n              <h3>{blurb.title}</h3>\n              <Row className=\"justify-content-xl-center justify-content-md-center\">\n                <Col xl={7}>\n                  <p>{blurb.copy[0]}</p>\n                </Col>\n              </Row>\n              <blockquote className=\"blockquote\">\n                <p>{blurb.copy[1]}</p>\n              </blockquote>\n            </Container>\n          ))\n        }\n      </Container>\n      <Container id=\"bike\" fluid>\n        {\n          content.copy.blurbs.slice(3, 4).map((blurb, blurbIndex) => (\n            <Container key={blurbIndex}>\n              <h3>{blurb.title}</h3>\n              <Row className=\"justify-content-xl-center justify-content-md-center\">\n                <Col xl={8}>\n                  <p>{blurb.copy[0]}</p>\n                </Col>\n              </Row>\n            </Container>\n          ))\n        }\n        <Container>\n          <Row>\n            {\n              content.copy.cards.slice(3, 6).map((card, cardIndex) => (\n                <Col key={cardIndex}>\n                  <Card className=\"h-100\">\n                    <Card.Header>\n                      {card.title}\n                    </Card.Header>\n                    <div style={{height: '200px', backgroundImage: 'url(' + bikeImages[cardIndex] + ')'}}>\n                      <Image src={bikeIcons[cardIndex]} alt={card.image.alt} style={{marginTop: '25px'}} />\n                    </div>\n                    <Card.Body>\n                      <Card.Title>\n                        {card.description.join(' ')}\n                      </Card.Title>\n                      <hr />\n                      <ul style={{lmargin: 0, padding: 0}}>\n                        {\n                          card.features.map((feature, featureIndex) => (\n                            <li key={featureIndex} style={{listStyleType: 'none', fontWeight: 600, margin: 0, padding: 0}}>\n                              {feature.text}\n                              <ul style={{margin: 0, padding: 0}}>\n                                {\n                                  feature.details.map((detail, detailIndex) => (\n                                    <li key={detailIndex} style={{listStyleType: 'none', fontWeight: 'normal', margin: 0, padding: 0}}>\n                                      {detail}\n                                    </li>\n                                  ))\n                                }\n                              </ul>\n                            </li>\n                          ))\n                        }\n                      </ul>\n                    </Card.Body>\n                    <Card.Footer>\n                      <LinkContainer to={card.button.link}>\n                        <Button>{card.button.text}</Button>\n                      </LinkContainer>\n                    </Card.Footer>\n                  </Card>\n                </Col>\n              ))\n            }\n          </Row>\n        </Container>\n      </Container>\n      <Container id=\"facility\" fluid>\n        {\n          content.copy.blurbs.slice(4, 5).map((blurb, blurbIndex) => (\n            <Container key={blurbIndex}>\n              <h3>{blurb.title}</h3>\n              <Row className=\"justify-content-xl-center justify-content-md-center\">\n              {\n                blurb.copy.map((paragraph, paragraphIndex) => (\n                  <Col xl={(12 / blurb.copy.length)} key={paragraphIndex}>\n                    <Image src={paragraph.image} />\n                    <p>{paragraph.text}</p>\n                  </Col>\n                ))\n              }\n              </Row>\n              <Row className=\"justify-content-xl-center justify-content-md-center\">\n                <Col xl=\"auto\" md=\"auto\">\n                  <LinkContainer to=\"/booking/new\">\n                    <Button>book now</Button>\n                  </LinkContainer>\n                </Col>\n              </Row>\n            </Container>\n          ))\n        }\n      </Container>\n      <Container id=\"map\" fluid>\n        <div style={{ height: '650px', width: '100%' }}>\n          {\n            (window.location.hostname === 'localhost')\n              ? null\n              : (\n                  <GoogleMapReact\n                    bootstrapURLKeys={{ key: 'AIzaSyCKw8by28pNI5tlimezyyjgtXz_Nvkq2-Y' }}\n                    defaultCenter={{ lat: 41.820582, lng: 23.478257 }}\n                    defaultZoom={ 14 }\n                    onGoogleApiLoaded={({map, maps}) => {\n                      let marker = new maps.Marker({\n                        position: { lat: 41.820582, lng: 23.478257 },\n                        map,\n                        title: 'Bears Lairs, Bansko',\n                        description: 'secure, self-storage in bansko with access at your convenience',\n                        link: {\n                          url: 'https://www.google.com/maps/place/Bears+Lairs/@41.8223813,23.4681867,15z/data=!4m5!3m4!1s0x0:0xadd4ea4c0b9a3216!8m2!3d41.820631!4d23.478215',\n                          text: 'maps.google.com/Bears+Lairs'\n                        }\n                      });\n                      let infoWindow = new maps.InfoWindow({\n                        content: '<h4><img src=\"favicon-32x32.png\" style=\"margin-right: 6px;\" class=\"rounded-circle\" />' + marker.title + '</h4><p>' + marker.description + '<br /><a href=\"' + marker.link.url + '\">' + marker.link.text + '</a></p>'\n                      });\n                      infoWindow.open(map, marker);\n                      marker.addListener('click', () => {\n                        map.setZoom(14);\n                        map.setCenter(marker.getPosition());\n                        infoWindow.open(map, marker);\n                      });\n                    }} />\n                )\n          }\n        </div>\n      </Container>\n    </>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport Container from 'react-bootstrap/Container';\nimport markdownFile from '../privacy.md';\n\nexport default function Privacy() {\n  const [markdownContent, setMarkdownContent] = useState(undefined);\n  useEffect(() => { fetch(markdownFile).then(reader => reader.text()).then(setMarkdownContent); });\n  return (\n    <Container id=\"policy\">\n      <ReactMarkdown source={markdownContent} />\n    </Container>\n  );\n}","import React, { useState, useEffect } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport Container from 'react-bootstrap/Container';\nimport markdownFile from '../terms.md';\n\nexport default function Terms() {\n  const [markdownContent, setMarkdownContent] = useState(undefined);\n  useEffect(() => { fetch(markdownFile).then(reader => reader.text()).then(setMarkdownContent); });\n  return (\n    <Container id=\"policy\">\n      <ReactMarkdown source={markdownContent} />\n    </Container>\n  );\n}","import React from 'react';\nimport Button from 'react-bootstrap/Button';\nimport Spinner from 'react-bootstrap/Spinner';\n\nexport default function LoaderButton({\n  isLoading,\n  disabled = false,\n  ...props\n}) {\n  return (\n    <Button disabled={disabled || isLoading} {...props}>\n      {isLoading && <Spinner animation=\"border\" size=\"sm\" style={{marginRight: '0.7em'}} />}\n      {props.children}\n    </Button>\n  );\n}\n","import { useState } from 'react';\n\nexport function useFormFields(initialState) {\n  const [fields, setValues] = useState(initialState);\n\n  return [\n    fields,\n    function(event) {\n      setValues({\n        ...fields,\n        [event.target.id]: event.target.value\n      });\n    }\n  ];\n}\n","export function onError(error) {\n  let message = error.toString();\n\n  // Auth errors\n  if (!(error instanceof Error) && error.message) {\n    message = error.message;\n  }\n\n  alert(message);\n}\n","import React, { useState } from 'react';\nimport { API, Auth } from 'aws-amplify';\nimport { Link, useHistory } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport Form from 'react-bootstrap/Form';\nimport LoaderButton from '../components/LoaderButton';\nimport { useAppContext } from '../libs/contextLib';\nimport { useFormFields } from '../libs/hooksLib';\nimport { onError } from '../libs/errorLib';\n\nexport default function Login() {\n  const history = useHistory();\n  const { userHasAuthenticated } = useAppContext();\n  const [isLoading, setIsLoading] = useState(false);\n  const [fields, handleFieldChange] = useFormFields({ email: '', password: '' });\n\n  function validateForm() {\n    return fields.email.length > 0 && fields.password.length > 0;\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    setIsLoading(true);\n    try {\n      await Auth.signIn(fields.email, fields.password);\n      userHasAuthenticated(true);\n\n      // create and associate a stripe customer id if user doesn't have one\n      let user = await Auth.currentAuthenticatedUser();\n      let { attributes } = user;\n      if (!('custom:stripe_customer_id' in attributes)) {\n        API.post('billing/customer/create', '/billing/customer/create', { body: { email: fields.email, facilityId: '7edad966-198d-4ee2-8802-02f188e8f62c' } })\n          .then(async(response) => {\n            if (response.status && response.customer && response.customer.id) {\n              await Auth.updateUserAttributes(user, { 'custom:stripe_customer_id': response.customer.id });\n            } else if (response.error) {\n              console.log(response.error);\n            }\n          });\n      }\n\n      history.push('/');\n    } catch (e) {\n      onError(e);\n      setIsLoading(false);\n    }\n  }\n\n\n  return (\n    <Container id=\"login\">\n      <h2>log in</h2>\n      <Form onSubmit={handleSubmit}>\n        <Form.Group controlId=\"email\">\n          <Form.Label>Email</Form.Label>\n          <Form.Control\n            autoFocus\n            type=\"email\"\n            value={fields.email}\n            onChange={handleFieldChange} />\n        </Form.Group>\n        <Form.Group controlId=\"password\">\n          <Form.Label>Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            value={fields.password}\n            onChange={handleFieldChange} />\n        </Form.Group>\n        <LoaderButton\n          block\n          type=\"submit\"\n          isLoading={isLoading}\n          disabled={!validateForm()}>\n          log-in\n        </LoaderButton>\n        <Link to=\"/login/reset\">forgot password?</Link>\n        <Link to=\"/signup\">sign-up</Link>\n      </Form>\n    </Container>\n  );\n}\n","import React from 'react';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport LoaderButton from '../components/LoaderButton';\n\nexport default function Settings() {\n  return (\n    <div className=\"Settings\">\n      <LinkContainer to=\"/settings/password\">\n        <LoaderButton block>\n          Change Password\n        </LoaderButton>\n      </LinkContainer>\n    </div>\n  );\n}","import React, { useState } from 'react';\nimport { Auth } from 'aws-amplify';\nimport { useHistory } from 'react-router-dom';\nimport Form from 'react-bootstrap/Form';\nimport LoaderButton from '../components/LoaderButton';\nimport { useFormFields } from '../libs/hooksLib';\nimport { onError } from '../libs/errorLib';\n\nexport default function ChangeEmail() {\n  const history = useHistory();\n  const [codeSent, setCodeSent] = useState(false);\n  const [fields, handleFieldChange] = useFormFields({\n    code: '',\n    email: '',\n  });\n  const [isConfirming, setIsConfirming] = useState(false);\n  const [isSendingCode, setIsSendingCode] = useState(false);\n\n  function validateEmailForm() {\n    return fields.email.length > 0;\n  }\n\n  function validateConfirmForm() {\n    return fields.code.length > 0;\n  }\n\n  async function handleUpdateClick(event) {\n    event.preventDefault();\n    setIsSendingCode(true);\n    try {\n      const user = await Auth.currentAuthenticatedUser();\n      await Auth.updateUserAttributes(user, { email: fields.email });\n      setCodeSent(true);\n    } catch (error) {\n      onError(error);\n      setIsSendingCode(false);\n    }\n  }\n\n  async function handleConfirmClick(event) {\n    event.preventDefault();\n    setIsConfirming(true);\n    try {\n      await Auth.verifyCurrentUserAttributeSubmit('email', fields.code);\n      history.push('/settings');\n    } catch (error) {\n      onError(error);\n      setIsConfirming(false);\n    }\n  }\n\n  function renderUpdateForm() {\n    return (\n      <Form onSubmit={handleUpdateClick}>\n        <Form.Group controlId=\"email\">\n          <Form.Label>Email</Form.Label>\n          <Form.Control\n            autoFocus\n            type=\"email\"\n            value={fields.email}\n            onChange={handleFieldChange} />\n        </Form.Group>\n        <LoaderButton\n          block\n          type=\"submit\"\n          isLoading={isSendingCode}\n          disabled={!validateEmailForm()}>\n          Update Email\n        </LoaderButton>\n      </Form>\n    );\n  }\n\n  function renderConfirmationForm() {\n    return (\n      <Form onSubmit={handleConfirmClick}>\n        <Form.Group controlId=\"code\">\n          <Form.Label>Confirmation Code</Form.Label>\n          <Form.Control\n            autoFocus\n            type=\"tel\"\n            value={fields.code}\n            onChange={handleFieldChange} />\n          <Form.Text>\n            Please check your email ({fields.email}) for the confirmation code.\n          </Form.Text>\n        </Form.Group>\n        <LoaderButton\n          block\n          type=\"submit\"\n          isLoading={isConfirming}\n          disabled={!validateConfirmForm()}>\n          Confirm\n        </LoaderButton>\n      </Form>\n    );\n  }\n\n  return (\n    <div>\n      {!codeSent ? renderUpdateForm() : renderConfirmationForm()}\n    </div>\n  );\n}","import React, { useState } from 'react';\nimport { Auth } from 'aws-amplify';\nimport { Link } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport Form from 'react-bootstrap/Form';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n//import { faOk } from '@fortawesome/free-solid-svg-icons'\nimport LoaderButton from '../components/LoaderButton';\nimport { useFormFields } from '../libs/hooksLib';\nimport { onError } from '../libs/errorLib';\n\nexport default function ResetPassword() {\n  const [fields, handleFieldChange] = useFormFields({\n    code: '',\n    email: '',\n    password: '',\n    confirmPassword: '',\n  });\n  const [codeSent, setCodeSent] = useState(false);\n  const [confirmed, setConfirmed] = useState(false);\n  const [isConfirming, setIsConfirming] = useState(false);\n  const [isSendingCode, setIsSendingCode] = useState(false);\n\n  function validateCodeForm() {\n    return fields.email.length > 0;\n  }\n\n  function validateResetForm() {\n    return (\n      fields.code.length > 0 &&\n      fields.password.length > 0 &&\n      fields.password === fields.confirmPassword\n    );\n  }\n\n  async function handleSendCodeClick(event) {\n    event.preventDefault();\n\n    setIsSendingCode(true);\n\n    try {\n      await Auth.forgotPassword(fields.email);\n      setCodeSent(true);\n    } catch (error) {\n      onError(error);\n      setIsSendingCode(false);\n    }\n  }\n\n  async function handleConfirmClick(event) {\n    event.preventDefault();\n\n    setIsConfirming(true);\n\n    try {\n      await Auth.forgotPasswordSubmit(\n        fields.email,\n        fields.code,\n        fields.password\n      );\n      setConfirmed(true);\n    } catch (error) {\n      onError(error);\n      setIsConfirming(false);\n    }\n  }\n\n  function renderRequestCodeForm() {\n    return (\n      <form onSubmit={handleSendCodeClick}>\n        <Form.Group controlId=\"email\">\n          <Form.Label>Email</Form.Label>\n          <Form.Control\n            autoFocus\n            type=\"email\"\n            value={fields.email}\n            onChange={handleFieldChange} />\n        </Form.Group>\n        <LoaderButton\n          block\n          type=\"submit\"\n          isLoading={isSendingCode}\n          disabled={!validateCodeForm()}>\n          Send Confirmation\n        </LoaderButton>\n      </form>\n    );\n  }\n\n  function renderConfirmationForm() {\n    return (\n      <form onSubmit={handleConfirmClick}>\n        <Form.Group controlId=\"code\">\n          <Form.Label>Confirmation Code</Form.Label>\n          <Form.Control\n            autoFocus\n            type=\"tel\"\n            value={fields.code}\n            onChange={handleFieldChange} />\n          <Form.Text>\n            Please check your email ({fields.email}) for the confirmation code.\n          </Form.Text>\n        </Form.Group>\n        <hr />\n        <Form.Group controlId=\"password\">\n          <Form.Label>New Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            value={fields.password}\n            onChange={handleFieldChange} />\n        </Form.Group>\n        <Form.Group controlId=\"confirmPassword\">\n          <Form.Label>Confirm Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            value={fields.confirmPassword}\n            onChange={handleFieldChange} />\n        </Form.Group>\n        <LoaderButton\n          block\n          type=\"submit\"\n          isLoading={isConfirming}\n          disabled={!validateResetForm()}>\n          Confirm\n        </LoaderButton>\n      </form>\n    );\n  }\n\n  function renderSuccessMessage() {\n    return (\n      <div className=\"success\">\n        <FontAwesomeIcon icon=\"ok\" />\n        <p>Your password has been reset.</p>\n        <p>\n          <Link to=\"/login\">\n            Click here to login with your new credentials.\n          </Link>\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <Container id=\"password\">\n      <h2>password reset</h2>\n      {!codeSent\n        ? renderRequestCodeForm()\n        : !confirmed\n        ? renderConfirmationForm()\n        : renderSuccessMessage()}\n    </Container>\n  );\n}","import React, { useState } from 'react';\nimport { Auth } from 'aws-amplify';\nimport { useHistory } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport Form from 'react-bootstrap/Form';\nimport LoaderButton from '../components/LoaderButton';\nimport { useFormFields } from '../libs/hooksLib';\nimport { onError } from '../libs/errorLib';\n\nexport default function ChangePassword() {\n  const history = useHistory();\n  const [fields, handleFieldChange] = useFormFields({\n    password: '',\n    oldPassword: '',\n    confirmPassword: '',\n  });\n  const [isChanging, setIsChanging] = useState(false);\n\n  function validateForm() {\n    return (\n      fields.oldPassword.length > 0 &&\n      fields.password.length > 0 &&\n      fields.password === fields.confirmPassword\n    );\n  }\n\n  async function handleChangeClick(event) {\n    event.preventDefault();\n    setIsChanging(true);\n    try {\n      const currentUser = await Auth.currentAuthenticatedUser();\n      await Auth.changePassword(\n        currentUser,\n        fields.oldPassword,\n        fields.password\n      );\n\n      history.push('/settings');\n    } catch (error) {\n      onError(error);\n      setIsChanging(false);\n    }\n  }\n\n  return (\n    <Container id=\"password\">\n      <Form onSubmit={handleChangeClick}>\n        <Form.Group controlId=\"oldPassword\">\n          <Form.Label>Old Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            onChange={handleFieldChange}\n            value={fields.oldPassword} />\n        </Form.Group>\n        <hr />\n        <Form.Group controlId=\"password\">\n          <Form.Label>New Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            onChange={handleFieldChange}\n            value={fields.password} />\n        </Form.Group>\n        <Form.Group controlId=\"confirmPassword\">\n          <Form.Label>Confirm Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            onChange={handleFieldChange}\n            value={fields.confirmPassword} />\n        </Form.Group>\n        <LoaderButton\n          block\n          type=\"submit\"\n          disabled={!validateForm()}\n          isLoading={isChanging}>\n          Change Password\n        </LoaderButton>\n      </Form>\n    </Container>\n  );\n}","import React, { useState } from 'react';\nimport { API, Auth } from 'aws-amplify';\nimport { useHistory } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport Form from 'react-bootstrap/Form';\nimport LoaderButton from '../components/LoaderButton';\nimport { useAppContext } from '../libs/contextLib';\nimport { useFormFields } from '../libs/hooksLib';\nimport { onError } from '../libs/errorLib';\n\nexport default function Signup() {\n  const [fields, handleFieldChange] = useFormFields({\n    email: '',\n    password: '',\n    confirmPassword: '',\n    confirmationCode: '',\n  });\n  const history = useHistory();\n  const [newUser, setNewUser] = useState(null);\n  const { userHasAuthenticated } = useAppContext();\n  const [isLoading, setIsLoading] = useState(false);\n\n  function validateForm() {\n    return (\n      fields.email.length > 0 &&\n      fields.password.length > 0 &&\n      fields.password === fields.confirmPassword\n    );\n  }\n\n  function validateConfirmationForm() {\n    return fields.confirmationCode.length > 0;\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    setIsLoading(true);\n    try {\n      const newUser = await Auth.signUp({\n        username: fields.email,\n        password: fields.password\n      });\n      setIsLoading(false);\n      setNewUser(newUser);\n    } catch (e) {\n      onError(e);\n      setIsLoading(false);\n    }\n  }\n\n  async function handleConfirmationSubmit(event) {\n    event.preventDefault();\n    setIsLoading(true);\n    try {\n      await Auth.confirmSignUp(fields.email, fields.confirmationCode);\n      await Auth.signIn(fields.email, fields.password);\n      userHasAuthenticated(true);\n      API.post('billing/customer/create', '/billing/customer/create', { body: { email: fields.email, facilityId: '7edad966-198d-4ee2-8802-02f188e8f62c' } })\n        .then(async(response) => {\n          if (response.status && response.customer && response.customer.id) {\n            Auth.currentAuthenticatedUser()\n              .then(user => Auth.updateUserAttributes(user, { 'custom:stripe_customer_id': response.customer.id }))\n              .then(data => console.log(data))\n              .catch(err => console.log(err));\n          } else if (response.error) {\n            console.log(response.error);\n          }\n        });\n      history.push(\"/\");\n    } catch (e) {\n      onError(e);\n      setIsLoading(false);\n    }\n  }\n\n  function renderConfirmationForm() {\n    return (\n      <form onSubmit={handleConfirmationSubmit}>\n        <Form.Group controlId=\"confirmationCode\">\n          <Form.Label>Confirmation Code</Form.Label>\n          <Form.Control\n            autoFocus\n            type=\"tel\"\n            onChange={handleFieldChange}\n            value={fields.confirmationCode} />\n          <Form.Text>Please check your email for the code.</Form.Text>\n        </Form.Group>\n        <LoaderButton\n          block\n          type=\"submit\"\n          isLoading={isLoading}\n          disabled={!validateConfirmationForm()}>\n          verify\n        </LoaderButton>\n      </form>\n    );\n  }\n\n  function renderForm() {\n    return (\n    <Container id=\"signup\">\n      <h2>sign up</h2>\n      <Form onSubmit={handleSubmit}>\n        <Form.Group controlId=\"email\">\n          <Form.Label>Email</Form.Label>\n          <Form.Control\n            autoFocus\n            type=\"email\"\n            value={fields.email}\n            onChange={handleFieldChange}\n          />\n        </Form.Group>\n        <Form.Group controlId=\"password\">\n          <Form.Label>Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            value={fields.password}\n            onChange={handleFieldChange}\n          />\n        </Form.Group>\n        <Form.Group controlId=\"confirmPassword\">\n          <Form.Label>Confirm Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            onChange={handleFieldChange}\n            value={fields.confirmPassword}\n          />\n        </Form.Group>\n        <LoaderButton\n          block\n          type=\"submit\"\n          isLoading={isLoading}\n          disabled={!validateForm()}>\n          sign-up\n        </LoaderButton>\n      </Form>\n    </Container>\n    );\n  }\n\n  return (\n    <div className=\"Signup\">\n      {newUser === null ? renderForm() : renderConfirmationForm()}\n    </div>\n  );\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport Form from 'react-bootstrap/Form';\nimport Table from 'react-bootstrap/Table';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport Card from 'react-bootstrap/Card';\nimport CardDeck from 'react-bootstrap/CardDeck';\nimport Spinner from 'react-bootstrap/Spinner';\nimport LoaderButton from '../components/LoaderButton';\nimport 'react-dates/initialize';\nimport { SingleDatePicker } from 'react-dates';\nimport 'react-dates/lib/css/_datepicker.css';\nimport moment from 'moment';\nimport { API, Auth } from 'aws-amplify';\nimport SimpleReactValidator from 'simple-react-validator';\nimport { useStripe, useElements, CardElement } from '@stripe/react-stripe-js';\n\n\nexport default function CreateBooking() {\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const [user, setUser] = useState(undefined);\n  const maxTenancyInMonths = 36;\n  const units = {\n    'enclosed lockers': {\n      'baby bear (tiny)': {\n        price: {\n          yearly: {\n            bgn: 165,\n            stripe: {\n              priceId: 'price_1HUQPyLWkJbcmCTlhflpj73Z',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          },\n          quarterly: {\n            bgn: 75\n          },\n          monthly: {\n            bgn: 30,\n            stripe: {\n              priceId: 'price_1HUQJuLWkJbcmCTl107bvSmv',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          },\n          corona: {\n            bgn: 15,\n            stripe: {\n              priceId: 'price_1HUQJuLWkJbcmCTl45YXBzw8',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          }\n        },\n        available: {\n          from: new Date('2021-01-01'),\n          units: 0\n        },\n        dimensions: {\n          width: 50,\n          height: 200,\n          depth: 50\n        },\n        door: {\n          width: 50,\n          height: 200\n        },\n        description: 'a safe place for snowboards, skis, winter gear and boots',\n        image: '/locker-50w-230h-50d.png'\n      },\n      'mama bear (small)': {\n        price: {\n          yearly: {\n            bgn: 550,\n            stripe: {\n              priceId: 'price_1HUQPyLWkJbcmCTlHMdvpMU3',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          },\n          quarterly: {\n            bgn: 250\n          },\n          monthly: {\n            bgn: 100,\n            stripe: {\n              priceId: 'price_1HP5T4LWkJbcmCTlj7FbHXD0',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          },\n          corona: {\n            bgn: 50,\n            stripe: {\n              priceId: 'price_1HP5T4LWkJbcmCTlxM869xeq',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          }\n        },\n        available: {\n          from: new Date('2020-08-01'),\n          units: 3\n        },\n        dimensions: {\n          width: 100,\n          height: 230,\n          depth: 250\n        },\n        door: {\n          width: 100,\n          height: 200\n        },\n        description: 'space for bicycles, boxes and luggage',\n        image: '/locker-100w-230h-250d.png'\n      },\n      'mama bear (medium)': {\n        price: {\n          yearly: {\n            bgn: 1100,\n            stripe: {\n              priceId: 'price_1HUQPyLWkJbcmCTlZkpN5H4E',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          },\n          quarterly: {\n            bgn: 500\n          },\n          monthly: {\n            bgn: 200,\n            stripe: {\n              priceId: 'price_1HP5T4LWkJbcmCTlHGJfSw7g',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          },\n          corona: {\n            bgn: 100,\n            stripe: {\n              priceId: 'price_1HP5T4LWkJbcmCTljPMcyGlp',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          }\n        },\n        available: {\n          from: new Date('2020-08-01'),\n          units: 3\n        },\n        dimensions: {\n          width: 200,\n          height: 230,\n          depth: 250\n        },\n        door: {\n          width: 200,\n          height: 200\n        },\n        description: 'space for bicycles, boxes, small furniture and luggage',\n        image: '/locker-200w-230h-250d.png'\n      },\n      'papa bear (large)': {\n        price: {\n          yearly: {\n            bgn: 1320,\n            stripe: {\n              priceId: 'price_1HUQPyLWkJbcmCTlVOqTLc7P',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          },\n          quarterly: {\n            bgn: 600\n          },\n          monthly: {\n            bgn: 240,\n            stripe: {\n              priceId: 'price_1HPR7rLWkJbcmCTlJSPWVGa9',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          },\n          corona: {\n            bgn: 120,\n            stripe: {\n              priceId: 'price_1HPR7rLWkJbcmCTljV8rxWUo',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          }\n        },\n        available: {\n          from: new Date('2020-08-01'),\n          units: 2\n        },\n        dimensions: {\n          width: 270,\n          height: 230,\n          depth: 250\n        },\n        door: {\n          width: 140,\n          height: 200\n        },\n        description: 'our largest locker. big enough for a quad bike and tool shop',\n        image: '/locker-270w-230h-250d.png'\n      }\n    },\n    'bike racks & parking': {\n      'bicycle': {\n        price: {\n          yearly: {\n            bgn: 110,\n            stripe: {\n              priceId: 'price_1HUQPyLWkJbcmCTlvtUKumM4',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          },\n          quarterly: {\n            bgn: 51\n          },\n          monthly: {\n            bgn: 20,\n            stripe: {\n              priceId: 'price_1HP5TILWkJbcmCTlcVsJBVg5',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          },\n          corona: {\n            bgn: 10,\n            stripe: {\n              priceId: 'price_1HP5KKLWkJbcmCTlkSlNJzNb',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          }\n        },\n        available: {\n          from: new Date('2021-03-01'),\n          units: 0\n        },\n        description: 'dry storage on the rack for bikes with easy access to the pirin national park',\n        image: '/bike-small.png'\n      },\n      'motorcycle (small)': {\n        price: {\n          yearly: {\n            bgn: 330,\n            stripe: {\n              priceId: 'price_1HUQPyLWkJbcmCTlijwpfJHk',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          },\n          quarterly: {\n            bgn: 150\n          },\n          monthly: {\n            bgn: 60,\n            stripe: {\n              priceId: 'price_1HP5KKLWkJbcmCTlPQWNBBzV',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          },\n          corona: {\n            bgn: 30,\n            stripe: {\n              priceId: 'price_1HP5KKLWkJbcmCTl9BZlKKi8',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          }\n        },\n        available: {\n          from: new Date('2020-08-01'),\n          units: 4\n        },\n        description: 'indoor parking for small to medium scooters and enduro bikes up to 500cc',\n        image: '/bike-medium.png'\n      },\n      'motorcycle (large)': {\n        price: {\n          yearly: {\n            bgn: 440,\n            stripe: {\n              priceId: 'price_1HUQPyLWkJbcmCTlzMiJvvBa',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          },\n          quarterly: {\n            bgn: 200\n          },\n          monthly: {\n            bgn: 80,\n            stripe: {\n              priceId: 'price_1HP5KKLWkJbcmCTliyir2cGp',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          },\n          corona: {\n            bgn: 40,\n            stripe: {\n              priceId: 'price_1HP5KKLWkJbcmCTlsrJrz7hh',\n              defaultTaxRates: [\n                'txr_1HVCMiLWkJbcmCTlGDokfTh3'\n              ]\n            }\n          }\n        },\n        available: {\n          from: new Date('2020-08-01'),\n          units: 4\n        },\n        description: 'indoor parking for large motorcycles',\n        image: '/bike-large.png'\n      }\n    }\n  };\n  let startDate = new Date();\n  startDate.setHours(14,0,0,0);\n  startDate.setDate(startDate.getDate() + 1);\n  let endDate = new Date();\n  endDate.setHours(12,0,0,0);\n  endDate.setMonth(startDate.getMonth() + 12);\n  const [fields, handleFieldChange] = useState({\n    name: '',\n    vat_number: '',\n    email: '',\n    telephone: '',\n    address: '',\n    from: startDate.toISOString(),\n    months: 12,\n    to: endDate.toISOString(),\n    unit: `${Object.keys(units)[0]}/${Object.keys(units[Object.keys(units)[0]]).find(u => units[Object.keys(units)[0]][u].available.units > 0)}`,\n    paymentFrequency: 'corona',\n    coupon: '',\n    termsAccepted: false\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [showForm, setShowForm] = useState(true);\n  const [isVatNumberLookupRunning, setIsVatNumberLookupRunning] = useState(false);\n  const [touched, setTouched] = useState({});\n  const [focusedDate, setFocusedDate] = useState(false);\n  const [showVatInput, setShowVatInput] = useState(false);\n  const [validationErrors, setValidationErrors] = useState({});\n  const [validationSuccesses, setValidationSuccesses] = useState({});\n  const [vatEntity, setVatEntity] = useState({countryCode: 'BG', vatNumber: '', name: '', address: ''});\n  const useValidator = (customMessage = {}, customValidator = {}): [SimpleReactValidator/*, Function*/] => {\n    const validatorRef = useRef(new SimpleReactValidator({\n      messages: customMessage, \n      validators: customValidator,\n    }));\n    return [validatorRef];\n  };\n  const [validator] = useValidator();\n\n  const [coupon, setCoupon] = useState({ code: undefined, valid: undefined, invalid: undefined, message: undefined, discount: { percent: 0, amount: 0 } });\n  useEffect(() => {\n    if (!!fields.coupon && fields.coupon.length > 9) {\n      API.post('validation/coupon', '/validation/coupon', { body: { coupon: fields.coupon } })\n        .then(response => {\n          console.log(response);\n          if (!!response.error && (response.error.code === 'resource_missing')) {\n            setCoupon(c => ({ ...c, invalid: true, valid: false, message: `Unrecognised discount code: ${fields.coupon}` }));\n          } else if (!!response.coupon && response.coupon.valid) {\n            setCoupon(c => ({\n              ...c,\n              discount: {\n                percent: response.coupon.percent_off || 0,\n                amount: response.coupon.amount_off || 0\n              },\n              invalid: false,\n              valid: true,\n              message: `Discount code applied: ${response.coupon.name}`\n            }));\n          }\n        })\n        .catch(console.log);\n    }\n  }, [fields.coupon]);\n\n  const blankPrice = {\n    id: undefined,\n    currency: 'bgn',\n    amount: {\n      base: 0,\n      subtotal: 0,\n      total: 0\n    },\n    discount: {\n      percent: 0,\n      amount: 0\n    },\n    vat: {\n      percent: 20,\n      amount: 0\n    }\n  };\n  const [price, setPrice] = useState(blankPrice);\n  const vatPercent = 20;\n  const currency = 'bgn';\n  const currencySymbol = {\n    bgn: 'лв'\n  };\n  useEffect(() => {\n    const unit = getUnit();\n    const base = unit.price[fields.paymentFrequency][currency];\n    const discount = (!!coupon.discount.percent)\n      ? {\n          percent: coupon.discount.percent,\n          amount: (base * (coupon.discount.percent / 100))\n        }\n      : coupon.discount;\n    const vat = (unit.price[fields.paymentFrequency].stripe.defaultTaxRates.length)\n      ? {\n          percent: vatPercent,\n          amount: ((base - discount.amount) * (vatPercent / 100))\n        }\n      : {\n          percent: 0,\n          amount: 0\n        };\n    const subtotal = (base - discount.amount);\n    const total = (subtotal + vat.amount);\n    setPrice({\n      id: unit.price[fields.paymentFrequency].stripe.priceId,\n      currency: currency,\n      amount: {\n        base,\n        subtotal,\n        total\n      },\n      discount,\n      vat\n    });\n  }, [coupon.discount, fields.paymentFrequency, fields.unit]);\n\n  useEffect(() => {\n    if (!user) {\n      Auth.currentAuthenticatedUser()\n        .then(u => {\n          setUser(u);\n        })\n        .catch(console.log);\n    }\n  });\n  useEffect(() => {\n    if (user && user.attributes) {\n      handleFieldChange(f => ({\n        ...f,\n        name: (user.attributes.name) ? user.attributes.name : f.name,\n        email: (user.attributes.email) ? user.attributes.name : f.email,\n        address: (user.attributes.address) ? user.attributes.address : f.address,\n        telephone: (user.attributes.phone_number) ? user.attributes.phone_number : f.telephone,\n        vat_number: ('custom:vat_number' in user.attributes) ? user.attributes['custom:vat_number'] : f.vat_number,\n      }));\n      if ('custom:vat_number' in user.attributes) {\n        // todo: rerun vat vies validation here.\n        setShowVatInput(true);\n        setVatEntity(e => ({\n          countryCode: user.attributes['custom:vat_number'].slice(0, 2),\n          vatNumber: user.attributes['custom:vat_number'].slice(2),\n          valid: true,\n          name: user.attributes.name,\n          address: user.attributes.address\n        }));\n      }\n    }\n  }, [user]);\n  useEffect(() => {\n    setTouched(t => ({\n      ...t,\n      vat_number: true,\n      name: true,\n      address: true\n    }));\n  }, [vatEntity]);\n\n  function validateForm() {\n    return (\n      (Object.keys(validationErrors).length === 0)\n      && (validator.current.allValid())\n      && (stripe && elements)\n      && fields.termsAccepted\n    );\n  }\n\n  function getUnit() {\n    let [category, unit] = fields.unit.split('/');\n    return units[category][unit];\n  }\n\n  function handleTabSelect(category) {\n    if (!fields.unit.startsWith(category)) {\n      handleCardSelect(category, Object.keys(units[category]).find(u => units[category][u].available.units > 0));\n    }\n  }\n\n  function handleCardSelect(category, unit) {\n    if ((fields.unit !== `${category}/${unit}`) && (units[category][unit].available.units > 0)) {\n      handleFieldChange(f => ({...f, unit: `${category}/${unit}`}));\n    }\n  }\n\n  async function handleVatNumberChange(event) {\n    //let tidiedVatNumber = (event.target.value || '').trim().replace(/ /g, '').toUpperCase();\n    const { id, value } = event.target;\n    const countryCode = (id === 'countryCode') ? value : vatEntity.countryCode;\n    const vatNumber = (id === 'vatNumber') ? value : vatEntity.vatNumber;\n    setVatEntity({ countryCode, vatNumber });\n    const vatNumberFormatValidators = {\n      AT: /^ATU[A-Z0-9]{9,9}$/,\n      BE: /^BE[0-9]{10,10}$/,\n      BG: /^BG[0-9]{9,10}$/,\n      CY: /^CY[A-Z0-9]{9,9}$/,\n      CZ: /^CZ[0-9]{8,10}$/,\n      DE: /^DE[0-9]{9,9}$/,\n      DK: /^DK[0-9]{8,8}$/,\n      EE: /^EE[0-9]{9,9}$/,\n      EL: /^EL[0-9]{9,9}$/,\n      ES: /^ES[A-Z0-9]{9,9}$/,\n      FI: /^FI[0-9]{8,8}$/,\n      FR: /^FR[A-Z0-9]{2,2}[0-9]{9,9}$/,\n      GB: /^GB[0-9]{9,9}$|^GB[0-9]{12,12}$|^GBGD[0-9]{3,3}$|^GBHA[0-9]{3,3}$/,\n      HU: /^HU[0-9]{8,8}$/,\n      IE: /^IE[A-Z0-9]{8,8}$/,\n      IT: /^IT[0-9]{11,11}$/,\n      LT: /^LT[0-9]{9,9}$|^LT[0-9]{12,12}$/,\n      LU: /^LU[0-9]{8,8}$/,\n      LV: /^LV[0-9]{11,11}$/,\n      MT: /^MT[0-9]{8,8}$/,\n      NL: /^NL[A-Z0-9]{12,12}$/,\n      PL: /^PL[0-9]{10,10}$/,\n      PT: /^PT[0-9]{9,9}$/,\n      SE: /^SE[0-9]{12,12}$/,\n      SI: /^SI[0-9]{8,8}$/,\n      SK: /^SK[0-9]{10,10}$/\n    };\n    if (`${countryCode}${vatNumber}`.match(vatNumberFormatValidators[countryCode])) {\n      setValidationSuccesses({\n        ...validationSuccesses,\n        vat_number: `${countryCode}${vatNumber} matches a known ${countryCode} VAT number format.`\n      });\n      if ('vat_number' in validationErrors) {\n        let {vat_number, ...validationErrorsWithVatNumberErrorsRemoved} = validationErrors;\n        setValidationErrors(validationErrorsWithVatNumberErrorsRemoved);\n      }\n      setIsVatNumberLookupRunning(true);\n      API.post('validation/vat', '/validation/vat', { body: { countryCode, vatNumber } })\n        .then(response => {\n          setIsVatNumberLookupRunning(false);\n          if (response.status && response.entity && response.entity.valid) {\n            setValidationSuccesses({\n              ...validationSuccesses,\n              vat_number: `${countryCode}${vatNumber} is registered with VIES.`\n            });\n            if ('vat_number' in validationErrors) {\n              let {vat_number, ...validationErrorsWithVatNumberErrorsRemoved} = validationErrors;\n              setValidationErrors(validationErrorsWithVatNumberErrorsRemoved);\n            }\n            setVatEntity({\n              valid: response.entity.valid,\n              name: response.entity.name,\n              address: response.entity.address,\n              countryCode: response.entity.countryCode,\n              vatNumber: response.entity.vatNumber\n            });\n          } else if (response.entity && !response.entity.valid) {\n            setValidationErrors({\n              ...validationErrors,\n              vat_number: `${countryCode}${vatNumber} is not registered with VIES.`\n            });\n            if ('vat_number' in validationSuccesses) {\n              let {vat_number, ...validationSuccessesWithVatNumberSuccessesRemoved} = validationSuccesses;\n              setValidationSuccesses(validationSuccessesWithVatNumberSuccessesRemoved);\n            }\n          }\n          else {\n            console.log((response.error) ? response.error : response);\n          }\n        })\n        .catch (error => {\n          console.log(error);\n        });\n    } else {\n      setValidationErrors({\n        ...validationErrors,\n        vat_number: `${countryCode}${vatNumber} does not match a known ${countryCode} VAT number format.`\n      });\n      if ('vat_number' in validationSuccesses) {\n        let {vat_number, ...validationSuccessesWithVatNumberSuccessesRemoved} = validationSuccesses;\n        setValidationSuccesses(validationSuccessesWithVatNumberSuccessesRemoved);\n      }\n    }\n  }\n\n  function retryInvoiceWithNewPaymentMethod({ customerId, paymentMethodId, invoiceId, priceId, defaultTaxRates }) {\n    return;\n  }\n\n  function createSubscription({ customerId, paymentMethodId, priceId, defaultTaxRates, cancelAt }) {\n    return (\n      API.post('billing/subscription/create', '/billing/subscription/create', { body: { customerId, paymentMethodId, priceId, defaultTaxRates, cancelAt } })\n        // If the card is declined, display an error to the user.\n        .then((result) => {\n          if (!result.status && result.error) {\n            throw result.error; // error associating payment method with customer\n          }\n          console.log('[createSubscription result]', result);\n          return result;\n        })\n        .then((result) => {\n          return {\n            paymentMethodId: paymentMethodId,\n            priceId: priceId,\n            defaultTaxRates: defaultTaxRates,\n            subscription: result.subscription,\n          };\n        })\n        // Some payment methods require a customer to be on session\n        // to complete the payment process. Check the status of the\n        // payment intent to handle these actions.\n        .then(handlePaymentThatRequiresCustomerAction)\n        // If attaching this card to a Customer object succeeds,\n        // but attempts to charge the customer fail, you\n        // get a requires_payment_method error.\n        .then(handleRequiresPaymentMethod)\n        // No more actions required. Provision your service for the user.\n        .then(onSubscriptionComplete)\n        .catch((error) => {\n          // An error has happened. Display the failure to the user here.\n          // We utilize the HTML element we created.\n\n          // todo: implement error ui\n          //showCardError(error);\n          console.log(error)\n        })\n    );\n  }\n\n  function handlePaymentThatRequiresCustomerAction({ subscription, invoice, priceId, defaultTaxRates, paymentMethodId, isRetry }) {\n    if (subscription && subscription.status === 'active') {\n      // subscription is active, no customer actions required.\n      return { subscription, priceId, defaultTaxRates, paymentMethodId };\n    }\n\n    // if it's a first payment attempt, the payment intent is on the subscription latest invoice.\n    // if it's a retry, the payment intent will be on the invoice itself.\n    let paymentIntent = invoice\n      ? invoice.payment_intent\n      : subscription.latest_invoice.payment_intent;\n\n    if (\n      paymentIntent.status === 'requires_action' ||\n      (isRetry === true && paymentIntent.status === 'requires_payment_method')\n    ) {\n      return stripe\n        .confirmCardPayment(paymentIntent.client_secret, { payment_method: paymentMethodId })\n        .then((result) => {\n          if (result.error) {\n            // start code flow to handle updating the payment details.\n            // display error message in your UI.\n            // the card was declined (i.e. insufficient funds, card has expired, etc).\n            throw result;\n          } else {\n            if (result.paymentIntent.status === 'succeeded') {\n              // show a success message to customer.\n              // there's a risk of the customer closing the window before the callback. watch webhook endpoints to mitigate.\n              return {\n                priceId: priceId,\n                defaultTaxRates: defaultTaxRates,\n                subscription: subscription,\n                invoice: invoice,\n                paymentMethodId: paymentMethodId,\n              };\n            }\n          }\n        })\n        .catch((error) => {\n          \n          // todo: implement error ui\n          // displayError(error);\n          console.log(error);\n        });\n    } else {\n      // No customer action needed.\n      return { subscription, priceId, defaultTaxRates, paymentMethodId };\n    }\n  }\n\n  function onSubscriptionComplete(result) {\n    // Payment was successful.\n    if (result.subscription.status === 'active') {\n      // Change your UI to show a success message to your customer.\n      // Call your backend to grant access to your service based on\n      // `result.subscription.items.data[0].price.product` the customer subscribed to.\n    }\n  }\n\n  function handleRequiresPaymentMethod({ subscription, paymentMethodId, priceId, defaultTaxRates }) {\n    if (subscription.status === 'active') {\n      // subscription is active, no customer actions required.\n      return { subscription, priceId, paymentMethodId };\n    } else if (\n      subscription.latest_invoice.payment_intent.status ===\n      'requires_payment_method'\n    ) {\n      // Using localStorage to manage the state of the retry here,\n      // feel free to replace with what you prefer.\n      // Store the latest invoice ID and status.\n      localStorage.setItem('latestInvoiceId', subscription.latest_invoice.id);\n      localStorage.setItem(\n        'latestInvoicePaymentIntentStatus',\n        subscription.latest_invoice.payment_intent.status\n      );\n      throw { error: { message: 'Your card was declined.' } };\n    } else {\n      return { subscription, priceId, defaultTaxRates, paymentMethodId };\n    }\n  }\n\n  function retryInvoiceWithNewPaymentMethod({ customerId, paymentMethodId, invoiceId, priceId, defaultTaxRates }) {\n    return (\n      API.post(\n        'billing/invoice/retry',\n        '/billing/invoice/retry',\n        {\n          body: { customerId, paymentMethodId, invoiceId }\n        }\n      )\n        // If the card is declined, display an error to the user.\n        .then((result) => {\n          if (result.error) {\n            // The card had an error when trying to attach it to a customer.\n            throw result;\n          }\n          return result;\n        })\n        // Normalize the result to contain the object returned by Stripe.\n        // Add the additional details we need.\n        .then((result) => {\n          return {\n            // Use the Stripe 'object' property on the\n            // returned result to understand what object is returned.\n            invoice: result,\n            paymentMethodId: paymentMethodId,\n            priceId: priceId,\n            isRetry: true,\n          };\n        })\n        // Some payment methods require a customer to be on session\n        // to complete the payment process. Check the status of the\n        // payment intent to handle these actions.\n        .then(handlePaymentThatRequiresCustomerAction)\n        // No more actions required. Provision your service for the user.\n        .then(onSubscriptionComplete)\n        .catch((error) => {\n          // An error has happened. Display the failure to the user here.\n          // We utilize the HTML element we created.\n\n          // todo: implement error ui\n          // displayError(error);\n          console.log(error);\n        })\n    );\n  }\n\n  function parseStripeAddress(countryCode, viesAddress) {\n    switch (countryCode) {\n      case 'BG':\n        return {\n          line1: viesAddress.match(/^(.*)\\sобл\\./i)[1],\n          city: viesAddress.match(/гр\\.(.*)\\s[0-9]+$/i)[1],\n          state: viesAddress.match(/обл\\.(.*),/i)[1],\n          postal_code: viesAddress.match(/\\s([0-9]*)$/i)[1],\n          country: countryCode\n        };\n        break;\n      default:\n        return {\n          line1: viesAddress,\n          country: countryCode\n        };\n        break;\n    }\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    setIsLoading(true);\n    //setShowForm(false);\n\n    // associate name, address, telephone, vat number with cognito user\n    Auth.currentAuthenticatedUser().then(async(user) => {\n      Auth.updateUserAttributes(user,\n        {\n          name: (vatEntity.name || fields.name),\n          phone_number: fields.telephone,\n          address: (vatEntity.address || fields.address),\n          'custom:vat_number': (vatEntity.valid) ? `${vatEntity.countryCode}${vatEntity.vatNumber}` : null\n        })\n        .then(response => console.log('[Auth.updateUserAttributes response]', response))\n        .catch(error => console.log('[Auth.updateUserAttributes error]', error));\n      /*\n      todo:\n      - generate invoice\n      - create stripe subscription\n      - trigger stripe payment method collection\n      - confirm booking\n        - show confirmation\n        - send email confirmation\n      */\n\n      // associate name, address, telephone, vat number with stripe customer\n      API.post('billing/customer/update', '/billing/customer/update',\n        {\n          body: {\n            facilityId: '7edad966-198d-4ee2-8802-02f188e8f62c',\n            customerId: user.attributes['custom:stripe_customer_id'],\n            ...((vatEntity.valid && vatEntity.name) || fields.name) && { name: (vatEntity.name || fields.name) },\n            ...(fields.telephone) && { phone: fields.telephone },\n            ...((vatEntity.valid && vatEntity.address) || fields.address) && { address: parseStripeAddress(vatEntity.countryCode, vatEntity.address) },\n            ...(vatEntity.valid) && { taxId: { type: 'eu_vat', value: `${vatEntity.countryCode}${vatEntity.vatNumber}` } }\n          }\n        })\n        .then(response => console.log('[API.post (billing/customer/update) response]', response))\n        .catch(error => console.log('[API.post (billing/customer/update) error]', error));\n\n      // begin stripe subscription specific processing\n      if (!stripe || !elements) {\n        return;\n      }\n      const cardElement = elements.getElement(CardElement);\n      const latestInvoicePaymentIntentStatus = localStorage.getItem(\n        'latestInvoicePaymentIntentStatus'\n      );\n      const { error, paymentMethod } = await stripe.createPaymentMethod({\n        type: 'card',\n        card: cardElement,\n      });\n      if (error) {\n        console.log('[stripe.createPaymentMethod error]', error);\n        switch (error.type) {\n          case 'validation_error':\n            if ('card' in validationSuccesses) {\n              let {card, ...validationSuccessesWithCardSuccessesRemoved} = validationSuccesses;\n              setValidationSuccesses(validationSuccessesWithCardSuccessesRemoved);\n            }\n            setValidationErrors({\n              ...validationErrors,\n              card: error.message\n            });\n            setIsLoading(false);\n            break;\n          default:\n            break;\n        }\n      } else {\n        console.log('[stripe.PaymentMethod created]', paymentMethod);\n\n        setValidationSuccesses({ ...validationSuccesses, card: true });\n        if ('card' in validationErrors) {\n          let {card, ...validationErrorsWithCardErrorsRemoved} = validationErrors;\n          setValidationErrors(validationErrorsWithCardErrorsRemoved);\n        }\n\n        const paymentMethodId = paymentMethod.id;\n        const customerId = user.attributes['custom:stripe_customer_id'];\n        const priceId = getUnit().price[fields.paymentFrequency].stripe.priceId;\n        const defaultTaxRates = getUnit().price[fields.paymentFrequency].stripe.defaultTaxRates;\n        const cancelAt = moment(fields.to).format('X');\n        if (latestInvoicePaymentIntentStatus === 'requires_payment_method') {\n          // Update the payment method and retry invoice payment\n          const invoiceId = localStorage.getItem('latestInvoiceId');\n          retryInvoiceWithNewPaymentMethod({\n            customerId,\n            paymentMethodId,\n            invoiceId,\n            priceId,\n            defaultTaxRates\n          });\n        } else {\n          // Create the subscription\n          createSubscription({ customerId, paymentMethodId, priceId, defaultTaxRates, cancelAt })\n            .then(response => {\n              setIsLoading(false);\n              //response.subscription.id\n            })\n            .catch(error => console.log('[createSubscription error]', error));\n        }\n      }\n      // end stripe subscription specific processing\n\n    })\n    .catch(error => console.log('[Auth.currentAuthenticatedUser error]', error));\n  }\n\n  return (\n    showForm\n      ? (\n          <>\n            <Container id=\"book-form\">\n              <Form onSubmit={handleSubmit} className=\"clearfix\" noValidate>\n                <Row>\n                  <Col>\n                    <Form.Group>\n                      <Form.Check\n                        type=\"checkbox\"\n                        label=\"Do you require a VAT invoice?\"\n                        checked={showVatInput}\n                        onChange={() => {setShowVatInput(!showVatInput)}} />\n                    </Form.Group>\n                    {\n                      showVatInput\n                        ? (\n                            <>\n                              <Form.Label>VAT Number:</Form.Label>\n                              <Form.Group className=\"form-inline\">\n                                <Form.Control\n                                  style={{ marginRight: '10px' }}\n                                  id=\"countryCode\"\n                                  as=\"select\"\n                                  value={vatEntity.countryCode}\n                                  onChange={handleVatNumberChange}>\n                                  {\n                                    ['AT', 'BE', 'BG', 'CY', 'CZ', 'DE', 'DK', 'EE', 'EL',  'ES', 'FI', 'FR', 'GB', 'HU', 'IE', 'IT', 'LT', 'LU', 'LV', 'MT', 'NL', 'PL', 'PT', 'SE', 'SI', 'SK'].map(countryCode => (\n                                      <option key={countryCode}>\n                                        {countryCode}\n                                      </option>\n                                    ))\n                                  }\n                                </Form.Control>\n                                <Form.Control\n                                  style={{ marginRight: '10px' }}\n                                  id=\"vatNumber\"\n                                  type=\"text\"\n                                  placeholder=\"9999999\"\n                                  value={vatEntity.vatNumber}\n                                  onChange={handleVatNumberChange}\n                                  isValid={vatEntity.valid || !showVatInput}\n                                  isInvalid={((!isVatNumberLookupRunning) && ('vat_number' in validationErrors))} />\n                                {\n                                  isVatNumberLookupRunning\n                                  ? <Spinner style={{ marginLeft: '10px' }} animation=\"border\" size=\"sm\" />\n                                  : null\n                                }\n                                <Form.Text className=\"text-muted\">\n                                  VAT numbers are validated with the <a href=\"https://ec.europa.eu/taxation_customs/vies\">European Commission VIES VAT number validator</a>. On verification, your invoice will be addressed to the company name and address registered with VIES.\n                                </Form.Text>\n                                <Form.Text style={{color: 'rgb(123, 179, 44)'}}>\n                                  {validationSuccesses.vat_number}\n                                </Form.Text>\n                                <Form.Text className=\"text-danger\">\n                                  {validationErrors.vat_number}\n                                </Form.Text>\n                              </Form.Group>\n                            </>\n                          )\n                        : null\n                    }\n                    <Form.Group controlId=\"name\">\n                      <Form.Label>Name:</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        placeholder=\"individual or company name\"\n                        value={(vatEntity.name || fields.name)}\n                        isValid={validator.current.fieldValid('name')}\n                        isInvalid={(('name' in touched) && (!validator.current.fieldValid('name')))}\n                        onChange={e => { const {id, value} = e.target; handleFieldChange(f => ({...f, [id]: value})); setTouched({...touched, name: true}); validator.current.showMessageFor('name'); }}\n                        disabled={((vatEntity.name !== '') && (vatEntity.valid))}\n                      />\n                      <Form.Text className=\"text-muted\">\n                        This name will appear on your invoice. Use your own name or if your company will claim a VAT rebate, check the VAT invoice box above and we'll use the company name associated with your EU registered, VAT number.\n                      </Form.Text>\n                      <Form.Text>\n                        {\n                          ('name' in touched)\n                            ? validator.current.message(\n                                'name',\n                                (vatEntity.name || fields.name),\n                                'required',\n                                {\n                                  className: 'text-danger',\n                                  messages: {\n                                    required: 'Please enter a name.'\n                                  }\n                                }\n                              )\n                            : null\n                        }\n                      </Form.Text>\n                    </Form.Group>\n                    <Form.Group controlId=\"telephone\">\n                      <Form.Label>Telephone:</Form.Label>\n                      <Form.Control\n                        type=\"phone\"\n                        placeholder=\"+359 555 123 456\"\n                        value={fields.telephone}\n                        isValid={validator.current.fieldValid('telephone')}\n                        isInvalid={(('telephone' in touched) && (!validator.current.fieldValid('telephone')))}\n                        onChange={e => { const {id, value} = e.target; handleFieldChange(f => ({...f, [id]: value})); setTouched({...touched, telephone: true}); validator.current.showMessageFor('telephone'); }}\n                      />\n                      <Form.Text className=\"text-muted\">\n                        This number will receive communications about your self-storage and related billing only.\n                      </Form.Text>\n                      <Form.Text>\n                        {\n                          ('telephone' in touched)\n                            ? validator.current.message(\n                                'telephone',\n                                fields.telephone,\n                                'required|phone',\n                                {\n                                  className: 'text-danger',\n                                  messages: {\n                                    required: 'Please enter a telephone number.'\n                                  }\n                                }\n                              )\n                            : null\n                        }\n                      </Form.Text>\n                    </Form.Group>\n                    <Form.Group controlId=\"address\">\n                      <Form.Label>Address</Form.Label>\n                      <Form.Control\n                        as=\"textarea\"\n                        rows={3}\n                        value={(vatEntity.address || fields.address)}\n                        isValid={((vatEntity.valid || !showVatInput) && !!fields.address)}\n                        onChange={e => { const {id, value} = e.target; handleFieldChange(f => ({...f, [id]: value})); }}\n                        disabled={((vatEntity.address !== '') && (vatEntity.valid))}\n                      />\n                      <Form.Text className=\"text-muted\">\n                        This address will appear on invoices only. We do not send postal mail of any kind.\n                      </Form.Text>\n                    </Form.Group>\n                  </Col>\n                  <Col>\n                    <Form.Group controlId=\"unit\">\n                      <Form.Label>Unit Type:</Form.Label>\n                      <ul>\n                        {\n                          Object.keys(units).map(category => (\n                            <li\n                              key={category}\n                              className={fields.unit.startsWith(category) ? '' : 'text-muted'}>\n                              <span>{category}:</span>\n                              {\n                                Object.keys(units[category]).map(size => (\n                                  <Form.Check key={size}>\n                                    <Form.Check.Input\n                                      style={{cursor: 'pointer'}}\n                                      type=\"radio\"\n                                      disabled={(units[category][size].available.units === 0)}\n                                      checked={fields.unit === `${category}/${size}`}\n                                      onChange={() => {handleCardSelect(category, size);}} />\n                                    <Form.Check.Label\n                                      style={{ cursor: (units[category][size].available.units === 0) ? 'not-allowed' : 'pointer' }}\n                                      className={(fields.unit === `${category}/${size}`) ? 'active' : 'text-muted'}\n                                      onClick={() => {handleCardSelect(category, size);}}>\n                                      {`${size}${(units[category][size].available.units === 0) ? ' - not available' : ''}`}\n                                    </Form.Check.Label>\n                                  </Form.Check>\n                                ))\n                              }\n                            </li>\n                          ))\n                        }\n                      </ul>\n                    </Form.Group>\n                    <Form.Group>\n                      <Row>\n                        <Col>\n                          <Form.Label>Start Date:</Form.Label>\n                          <br />\n                          <SingleDatePicker\n                            displayFormat=\"MMM DD YYYY\"\n                            date={moment(fields.from)}\n                            onDateChange={e => { handleFieldChange(f => ({ ...f, from: e.toISOString(), to: e.add(fields.months, 'M').toISOString() }));}}\n                            focused={focusedDate}\n                            onFocusChange={({ focused }) => setFocusedDate(focused)}\n                            id=\"from\"\n                          />\n                        </Col>\n                        <Col>\n                          <Form.Label>{(fields.paymentFrequency === 'yearly') ? 'Years' : 'Months'} Required:</Form.Label>\n                          <br />\n                          <Form.Control\n                            id=\"months\"\n                            type=\"number\"\n                            min={1}\n                            max={(fields.paymentFrequency === 'yearly') ? Math.floor(maxTenancyInMonths/12) : maxTenancyInMonths}\n                            value={(fields.paymentFrequency === 'yearly') ? Math.floor(fields.months/12) : fields.months}\n                            onChange={\n                              e => {\n                                const months = (fields.paymentFrequency === 'yearly') ? (Math.max(Math.min(parseInt(e.target.value), Math.floor(maxTenancyInMonths / 12)), 1) * 12) : Math.max(Math.min(parseInt(e.target.value), maxTenancyInMonths), 1);\n                                handleFieldChange(\n                                  f => (\n                                    {\n                                      ...f,\n                                      months,\n                                      to: moment(fields.from).add(months, 'M').toISOString()\n                                    }\n                                  )\n                                );\n                              }\n                            }\n                          />\n                        </Col>\n                        <Col>\n                          <Form.Label>\n                            End Date:\n                          </Form.Label>\n                          <br />\n                          {Intl.DateTimeFormat(undefined, { year: 'numeric', month: 'short', day: 'numeric' }).format(new Date(fields.to))}\n                          {\n                            (fields.paymentFrequency === 'yearly')\n                              ? (\n                                  <Form.Text className=\"active\">\n                                    {`${Math.floor(fields.months / 12)} month${(Math.floor(fields.months / 12) > 1) ? 's' : ''} free!`}\n                                  </Form.Text>\n                                )\n                              : null\n                          }\n                        </Col>\n                      </Row>\n                      <Form.Text className=\"text-muted\">\n                        Self-storage may be reserved for between 1 and {maxTenancyInMonths} months ({(Math.floor(maxTenancyInMonths / 12) * 13)} months for annual payment customers). Subject to availability, you may amend your booking to change to an earlier or later end date at any time.\n                      </Form.Text>\n                    </Form.Group>\n                    <Form.Group controlId=\"coupon\">\n                      <Form.Label>discount code:</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        value={fields.coupon}\n                        isValid={!!coupon.valid}\n                        isInvalid={!!coupon.invalid}\n                        disabled={!!coupon.valid}\n                        onChange={\n                          e => {\n                            const {id, value} = e.target;\n                            handleFieldChange(f => ({...f, [id]: value}));\n                          }\n                        }\n                      />\n                      <Form.Text className={(!!coupon.message) ? ((!!coupon.invalid) ? 'text-danger' : 'text-success') : 'text-muted'}>\n                        {\n                          (!!coupon.message)\n                            ? coupon.message\n                            : 'If you have a discount code, enter it here.'\n                        }\n                      </Form.Text>\n                    </Form.Group>\n                    <Form.Group>\n                      <Form.Check>\n                        <Form.Check.Input\n                          style={{cursor: 'pointer'}}\n                          type=\"radio\"\n                          disabled={false}\n                          checked={fields.paymentFrequency !== 'yearly'}\n                          onChange={e => { handleFieldChange(f => ({ ...f, paymentFrequency: 'corona' })); }} />\n                        <Form.Check.Label\n                          style={{ cursor: (getUnit().available.units === 0) ? 'not-allowed' : 'pointer' }}\n                          className={(fields.paymentFrequency !== 'yearly') ? 'active' : 'text-muted'}\n                          onClick={e => { handleFieldChange(f => ({ ...f, paymentFrequency: 'corona' })); }}>\n                          monthly payment: <span>лв{Number.parseFloat(getUnit().price.corona.bgn).toFixed(2)} bgn</span> per month\n                        </Form.Check.Label>\n                      </Form.Check>\n                      <Form.Check>\n                        <Form.Check.Input\n                          style={{cursor: 'pointer'}}\n                          type=\"radio\"\n                          disabled={false}\n                          checked={fields.paymentFrequency === 'yearly'}\n                          onChange={e => { handleFieldChange(f => ({ ...f, paymentFrequency: 'yearly' })); }} />\n                        <Form.Check.Label\n                          style={{ cursor: (getUnit().available.units === 0) ? 'not-allowed' : 'pointer' }}\n                          className={(fields.paymentFrequency === 'yearly') ? 'active' : 'text-muted'}\n                          onClick={e => { handleFieldChange(f => ({ ...f, paymentFrequency: 'yearly' })); }}>\n                          annual payment: <span>лв{Number.parseFloat(getUnit().price.yearly.bgn).toFixed(2)} bgn</span> per year\n                        </Form.Check.Label>\n                      </Form.Check>\n                      <Form.Text className=\"text-muted\">\n                        Customers choosing the annual payment option will receive 12 months for the price of 11.\n                        <br />\n                        - A saving of <span>лв{Number.parseFloat(getUnit().price.corona.bgn).toFixed(2)} bgn</span> per year.\n                      </Form.Text>\n                    </Form.Group>\n                    <hr />\n                    <Table size=\"sm\">\n                      <thead>\n                        <tr>\n                          <th className=\"text-muted\">\n                            description\n                          </th>\n                          <th className=\"text-muted text-right\">\n                            qty\n                          </th>\n                          <th className=\"text-muted text-right\">\n                            unit price\n                          </th>\n                          <th className=\"text-muted text-right\">\n                            amount\n                          </th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <tr>\n                          <td colSpan=\"4\" className=\"text-muted\">\n                            {moment(fields.from).format('MMM D, YYYY')}\n                            &nbsp;-&nbsp;\n                            {moment(fields.from).add(1, (fields.paymentFrequency === 'yearly') ? 'Y' : 'M').format('MMM D, YYYY')}\n                          </td>\n                        </tr>\n                        <tr>\n                          <td>\n                            {fields.unit}\n                          </td>\n                          <td className=\"text-right\">\n                            1\n                          </td>\n                          <td className=\"text-right\">\n                            {currencySymbol[currency]}\n                            {Number.parseFloat(price.amount.base).toFixed(2)}\n                          </td>\n                          <td className=\"text-right\">\n                            {currencySymbol[currency]}\n                            {Number.parseFloat(price.amount.base).toFixed(2)}\n                          </td>\n                        </tr>\n                        {\n                          (price.discount.amount)\n                            ? (\n                                <tr>\n                                  <td colSpan=\"3\" className=\"text-right\">\n                                    discount ({price.discount.percent}%)\n                                  </td>\n                                  <td className=\"text-right\">\n                                    {currencySymbol[currency]}\n                                    {Number.parseFloat(price.discount.amount).toFixed(2)}\n                                  </td>\n                                </tr>\n                              )\n                            : null\n                        }\n                        <tr>\n                          <td colSpan=\"3\" className=\"text-right\">\n                            subtotal\n                          </td>\n                          <td className=\"text-right\">\n                            {currencySymbol[currency]}\n                            {Number.parseFloat(price.amount.subtotal).toFixed(2)}\n                          </td>\n                        </tr>\n                        {\n                          (price.vat.amount)\n                            ? (\n                                <tr>\n                                  <td colSpan=\"3\" className=\"text-muted text-right\">\n                                    VAT - Bulgaria ({price.vat.percent}%)\n                                  </td>\n                                  <td className=\"text-right\">\n                                    {currencySymbol[currency]}\n                                    {Number.parseFloat(price.vat.amount).toFixed(2)}\n                                  </td>\n                                </tr>\n                              )\n                            : null\n                        }\n                        <tr>\n                          <td colSpan=\"3\" className=\"text-right\">\n                            total\n                          </td>\n                          <td className=\"text-right\">\n                            {currencySymbol[currency]}\n                            {Number.parseFloat(price.amount.total).toFixed(2)}\n                          </td>\n                        </tr>\n                      </tbody>\n                    </Table>\n                    <hr />\n                    <Form.Group>\n                      <Form.Label>Payment Card:</Form.Label>\n                      <CardElement\n                        id=\"stripe-payment-method\"\n                        onChange={() => {\n                          if ('card' in validationErrors) {\n                            let {card, ...validationErrorsWithCardErrorsRemoved} = validationErrors;\n                            setValidationErrors(validationErrorsWithCardErrorsRemoved);\n                          }\n                        }}\n                        options={{\n                          style: {\n                            base: {\n                              color: 'rgb(48, 11, 11)',\n                              fontFamily: 'Roboto, sans-serif',\n                              fontSmoothing: 'antialiased',\n                              fontSize: \"16px\",\n                              '::placeholder': {\n                                color: '#aab7c4',\n                              },\n                              iconColor: '#ff3399',\n                            },\n                            invalid: {\n                              color: \"#fa755a\",\n                              iconColor: \"#fa755a\",\n                            },\n                          },\n                        }} />\n                      <Form.Text className=\"text-danger\">\n                        {validationErrors.card}\n                      </Form.Text>\n                      <Form.Text className=\"text-muted\">\n                        You have requested use of self-storage space for a period of {(fields.months/((fields.paymentFrequency === 'yearly') ? 12 : 1))} {(fields.paymentFrequency === 'yearly') ? 'years' : 'months'}.<br />\n                        {\n                          ((fields.months/((fields.paymentFrequency === 'yearly') ? 12 : 1)) > 1)\n                            ? (\n                                <span>Subscription payments will be debited from your chosen payment method today and will repeat each {(fields.paymentFrequency === 'yearly') ? 'year' : 'month'}.</span>\n                              )\n                            : (\n                                <span>One payment will be debited from your chosen payment method, when you submit this form.</span>\n                              )\n                        }\n                      </Form.Text>\n                    </Form.Group>\n                    <Form.Group>\n                      <Form.Check\n                        type=\"checkbox\"\n                        label={(\n                          <span>I have read and accepted the <a href=\"/terms\" target=\"_blank\">terms and conditions</a>.</span>\n                          )}\n                        checked={fields.termsAccepted}\n                        onChange={() => {handleFieldChange(f => ({...f, termsAccepted: !f.termsAccepted}))}} />\n                    </Form.Group>\n                  </Col>\n                </Row>\n                <LoaderButton\n                  type=\"submit\"\n                  className=\"float-right\"\n                  isLoading={isLoading}\n                  disabled={!validateForm()}>\n                  reserve and pay\n                </LoaderButton>\n              </Form>\n            </Container>\n            <Container id=\"book-units\">\n              <Tabs activeKey={fields.unit.split('/')[0]} onSelect={(category) => handleTabSelect(category)}>\n                {\n                  Object.keys(units).map(category => (\n                    <Tab key={category} eventKey={category} title={category}>\n                      <CardDeck>\n                      {\n                        Object.keys(units[category]).map(size => (\n                          <Card\n                            key={size}\n                            className={(fields.unit === `${category}/${size}`) ? 'active' : 'text-muted'}\n                            onClick={() => handleCardSelect(category,  size)}>\n                            <Card.Header\n                              style={{cursor: 'pointer'}}\n                              as=\"div\">\n                              <span className={`float-right availability-${(units[category][size].available.units < 1) ? 'zero' : (units[category][size].available.units < 3) ? 'low' : 'high'}`}>\n                                available: <strong>{units[category][size].available.units}</strong>\n                              </span>\n                            </Card.Header>\n                            <Card.Img\n                              variant=\"top\"\n                              src={units[category][size].image}\n                              className=\"mx-auto\"\n                              style={{cursor: 'pointer', width: '100%', opacity: (fields.unit === `${category}/${size}`) ? 1 : 0.2}} />\n                            <Card.Body>\n                              <Card.Title>\n                                {size}\n                              </Card.Title>\n                              <Card.Text>\n                                {units[category][size].description}\n                              </Card.Text>\n                              <Card.Text as=\"div\">\n                                <strong>unit price:</strong>\n                                <ul>\n                                  <li className=\"price inactive\">лв{Number.parseFloat(units[category][size].price.monthly.bgn).toFixed(2)} bgn monthly</li>\n                                  <li className=\"price inactive\">лв{Number.parseFloat(units[category][size].price.quarterly.bgn).toFixed(2)} bgn quarterly</li>\n                                  <li className=\"price active\">\n                                    <span>лв{Number.parseFloat(units[category][size].price.yearly.bgn).toFixed(2)} bgn</span> yearly\n                                  </li>\n                                  <li className=\"price active\">\n                                    <span>лв{Number.parseFloat(units[category][size].price.corona.bgn).toFixed(2)} bgn</span> monthly\n                                  </li>\n                                </ul>\n                              </Card.Text>\n                              {\n                                units[category][size].dimensions &&\n                                <Card.Text as=\"div\">\n                                  <strong>locker size</strong>\n                                  <ul>\n                                    {\n                                      Object.keys(units[category][size].dimensions).map(prop => (\n                                        <li key={prop}>{prop}: {units[category][size].dimensions[prop]/100} meter</li>\n                                      ))\n                                    }\n                                    <li>\n                                      area: {\n                                        ((units[category][size].dimensions.width / 100) * (units[category][size].dimensions.depth / 100)).toFixed(1)\n                                      } m<sup>2</sup>\n                                    </li>\n                                    <li>\n                                      volume: {\n                                        ((units[category][size].dimensions.width / 100) * (units[category][size].dimensions.height / 100) * (units[category][size].dimensions.depth / 100)).toFixed(1)\n                                      } m<sup>3</sup>\n                                    </li>\n                                  </ul>\n                                  <strong>door size</strong>\n                                  <ul>\n                                    {\n                                      Object.keys(units[category][size].door).map(prop => (\n                                        <li key={prop}>{prop}: {units[category][size].door[prop]/100} meter</li>\n                                      ))\n                                    }\n                                  </ul>\n                                </Card.Text>\n                              }\n                            </Card.Body>\n                          </Card>\n                        ))\n                      }\n                      </CardDeck>\n                    </Tab>\n                  ))\n                }\n              </Tabs>\n              <ul>\n                <li className=\"price active\">\n                  <span>opening special</span>: 50% off monthly prices!\n                </li>\n                <li className=\"price active\">\n                  <span>annual prepayment</span>: Twelve months for the price of eleven!\n                </li>\n              </ul>\n            </Container>\n          </>\n        )\n      : <Spinner animation=\"border\" />\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport Spinner from 'react-bootstrap/Spinner';\nimport moment from 'moment';\nimport { API, Auth } from 'aws-amplify';\n\n\nexport default function BookingList() {\n  const [subscriptions, setSubscriptions] = useState(undefined);\n\n  useEffect(() => {\n    if (!subscriptions) {\n      API.post('billing/subscription/list', '/billing/subscription/list', { body: { facilityId: '7edad966-198d-4ee2-8802-02f188e8f62c' } })\n        .then(response => {\n          if (response.status && response.subscriptions) {\n            setSubscriptions(response.subscriptions);\n          }\n        })\n        .catch(console.log)\n    }\n  });\n  \n  return (\n    subscriptions\n      ? (\n          <>\n            <ul>\n              {\n                subscriptions.data.map(subscription => (\n                  <li key={subscription.id}>\n                    subscription: {subscription.id}<br />\n                    {moment(subscription.start_date * 1000).format()}\n                    &nbsp;-&nbsp;\n                    {moment(subscription.canceled_at * 1000).format()}\n                    <ul>\n                      {\n                        subscription.items.data.map(subscriptionItem => (\n                          <li key={subscriptionItem.id}>\n                            {subscriptionItem.price.nickname.replace('corona ', '')}<br />\n                            {Number.parseFloat(subscriptionItem.price.unit_amount / 100).toFixed(2)} {subscriptionItem.price.currency} / {subscriptionItem.price.recurring.interval}<br />\n                          </li>\n                        ))\n                      }\n                    </ul>\n                  </li>\n                ))\n              }\n            </ul>\n            <pre>\n              {JSON.stringify(subscriptions, null, 2)}\n            </pre>\n          </>\n        )\n      : null\n  );\n}\n\n\n","import React from 'react';\n\nexport default function NotFound() {\n  return (\n    <div className=\"NotFound\">\n      <h3>Sorry, page not found!</h3>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport AuthenticatedRoute from './components/AuthenticatedRoute';\nimport UnauthenticatedRoute from './components/UnauthenticatedRoute';\nimport Home from './containers/Home';\nimport Privacy from './containers/Privacy';\nimport Terms from './containers/Terms';\nimport Login from './containers/Login';\nimport Settings from './containers/Settings';\nimport ChangeEmail from './containers/ChangeEmail';\nimport ResetPassword from './containers/ResetPassword';\nimport ChangePassword from './containers/ChangePassword';\nimport Signup from './containers/Signup';\nimport CreateBooking from './containers/CreateBooking';\nimport BookingList from './containers/BookingList';\nimport NotFound from './containers/NotFound';\n\nexport default function Routes() {\n  return (\n    <Switch>\n      <Route exact path=\"/\">\n        <Home />\n      </Route>\n      <Route exact path=\"/privacy\">\n        <Privacy />\n      </Route>\n      <Route exact path=\"/terms\">\n        <Terms />\n      </Route>\n      <UnauthenticatedRoute exact path=\"/login\">\n        <Login />\n      </UnauthenticatedRoute>\n      <UnauthenticatedRoute exact path=\"/login/reset\">\n        <ResetPassword />\n      </UnauthenticatedRoute>\n      <UnauthenticatedRoute exact path=\"/signup\">\n        <Signup />\n      </UnauthenticatedRoute>\n      <AuthenticatedRoute exact path=\"/booking/new\">\n        <CreateBooking />\n      </AuthenticatedRoute>\n      <AuthenticatedRoute exact path=\"/booking/list\">\n        <BookingList />\n      </AuthenticatedRoute>\n      <AuthenticatedRoute exact path=\"/settings\">\n        <Settings />\n      </AuthenticatedRoute>\n      <AuthenticatedRoute exact path=\"/settings/email\">\n        <ChangeEmail />\n      </AuthenticatedRoute>\n      <AuthenticatedRoute exact path=\"/settings/password\">\n        <ChangePassword />\n      </AuthenticatedRoute>\n      <Route>\n        <NotFound />\n      </Route>\n    </Switch>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { Auth } from 'aws-amplify';\nimport { useHistory } from 'react-router-dom';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport Container from 'react-bootstrap/Container';\nimport Image from 'react-bootstrap/Image';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Nav from 'react-bootstrap/Nav';\nimport Navbar from 'react-bootstrap/Navbar';\nimport NavItem from 'react-bootstrap/NavItem';\nimport Routes from './Routes';\nimport { AppContext } from './libs/contextLib';\nimport { onError } from './libs/errorLib';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { isMobile, isAndroid, isFirefox, isSafari } from 'react-device-detect';\n\nfunction App() {\n  const history = useHistory();\n\n  const phoneNumber = '+359877804825';\n  const textMessage = encodeURI('I\\'d like to book a locker');\n\n  const whatsappLink = (isMobile)\n    ? (isAndroid)\n      ? `intent://send/${phoneNumber}#Intent;scheme=smsto;package=com.whatsapp;action=android.intent.action.SENDTO;end`\n      : `https://wa.me/${phoneNumber}?text=${textMessage}`\n    : (isFirefox || isSafari)\n      ? `https://web.whatsapp.com/send?phone=${phoneNumber}&text=${textMessage}`\n      : `whatsapp://send?phone=${phoneNumber}&text=${textMessage}`;\n\n  //const viberLink = `viber://pa?chatURI=bearslairsbansko&context=enquiry&text=${textMessage}`;\n  const viberLink = (isMobile && isAndroid)\n    ? `intent://send/${phoneNumber}#Intent;scheme=smsto;package=com.viber;action=android.intent.action.SENDTO;end`\n    : `viber://chat?number=${phoneNumber}&text=${textMessage}`;\n\n  const [isAuthenticating, setIsAuthenticating] = useState(true);\n  const [isAuthenticated, userHasAuthenticated] = useState(false);\n\n  useEffect(() => { onLoad(); }, []);\n\n  async function onLoad() {\n    try {\n      await Auth.currentSession();\n      userHasAuthenticated(true);\n    }\n    catch(e) {\n      if (e !== 'No current user') {\n        onError(e);\n      }\n    }\n    setIsAuthenticating(false);\n  }\n\n  async function handleLogout() {\n    await Auth.signOut();\n    userHasAuthenticated(false);\n    history.push('/login');\n  }\n\n  return (\n    !isAuthenticating &&\n    <>\n      <Container fluid>\n        <Row>\n          <Image src={'/logo.png'} className=\"m-auto\" />\n        </Row>\n        <Navbar>\n          <Nav className=\"mr-auto\">\n            <span>\n              <FontAwesomeIcon className=\"fa-sm fa-flip-horizontal\" icon=\"phone\" />\n              &nbsp;\n              <span className=\"text-muted\">+359</span> <strong>(0) 877 804 825</strong>\n              &nbsp;\n              <a href={viberLink}>\n                <FontAwesomeIcon icon={['fab', 'viber']} color=\"#665ca7\" />\n              </a>\n              &nbsp;\n              &nbsp;\n              <a target=\"_blank\" href={whatsappLink}>\n                <FontAwesomeIcon icon={['fab', 'whatsapp-square']} color=\"#0dc143\" />\n              </a>\n            </span>\n          </Nav>\n          <Nav className=\"m-auto\">\n            <LinkContainer to=\"/#about\">\n              <NavItem>about</NavItem>\n            </LinkContainer>\n            <LinkContainer to=\"/#map\">\n              <NavItem>location</NavItem>\n            </LinkContainer>\n            <LinkContainer to=\"/booking/new\">\n              <NavItem className=\"btn\">book now</NavItem>\n            </LinkContainer>\n            <LinkContainer to=\"/booking/list\">\n              <NavItem>bookings</NavItem>\n            </LinkContainer>\n          </Nav>\n          <Nav className=\"ml-auto\">\n            {\n              isAuthenticated\n                ? (\n                    <>\n                      <LinkContainer to=\"/settings\">\n                        <NavItem>account</NavItem>\n                      </LinkContainer>\n                      <NavItem onClick={handleLogout}>log-out</NavItem>\n                    </>\n                  )\n                : <>\n                    <LinkContainer to=\"/signup\">\n                      <NavItem>sign-up</NavItem>\n                    </LinkContainer>\n                    <LinkContainer to=\"/login\">\n                      <NavItem>log-in</NavItem>\n                    </LinkContainer>\n                  </>\n            }\n          </Nav>\n        </Navbar>\n      </Container>\n      <AppContext.Provider value={{ isAuthenticated, userHasAuthenticated }}>\n        <Routes />\n      </AppContext.Provider>\n      <Container id=\"footer\" fluid>\n        <Container>\n          <Row className=\"justify-content-xl-center justify-content-md-center\">\n            <Col xl={6}>\n              <LinkContainer to=\"/privacy\">\n                <NavItem as=\"a\">\n                  privacy\n                </NavItem>\n              </LinkContainer>\n              &nbsp;|&nbsp;\n              <LinkContainer to=\"/terms\">\n                <NavItem as=\"a\">\n                  terms and conditions\n                </NavItem>\n              </LinkContainer>\n              &nbsp;|&nbsp;\n              <a href=\"mailto:info@bearslairs.eu\">info@bearslairs.eu</a>\n              <hr />\n              &copy; 2020, Bears Lairs EOOD, Bulgaria. All rights reserved\n            </Col>\n          </Row>\n        </Container>\n      </Container>\n    </>\n  );\n}\nexport default App;\n","export default {\n  s3: {\n    REGION: 'us-east-1',\n    BUCKET: 'bearslairs-api-dev-serverlessdeploymentbucket-1tt1ibsw7svan'\n  },\n  apiGateway: {\n    REGION: 'us-east-1',\n    URL: 'https://hy1sab4b1f.execute-api.us-east-1.amazonaws.com/dev'\n  },\n  cognito: {\n    REGION: 'us-east-1',\n    USER_POOL_ID: 'us-east-1_nhmWSzeBZ',\n    APP_CLIENT_ID: '6ejs5t57eraer0urepjm6lmi0h',\n    IDENTITY_POOL_ID: 'us-east-1:06ca8ae5-f4de-4373-8a72-de5637b22559'\n  }\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport 'typeface-roboto';\nimport App from './App';\nimport { Amplify } from 'aws-amplify';\nimport {Elements} from '@stripe/react-stripe-js';\nimport {loadStripe} from '@stripe/stripe-js';\nimport config from './config';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { faPhone } from '@fortawesome/free-solid-svg-icons'\nimport { faWhatsappSquare, faViber } from '@fortawesome/free-brands-svg-icons'\n//import { fas } from '@fortawesome/free-solid-svg-icons';\n//import { fab } from '@fortawesome/free-brands-svg-icons';\nimport * as serviceWorker from './serviceWorker';\n\n//library.add(fas, fab);\nlibrary.add(faPhone, faWhatsappSquare, faViber);\n\nconst stripePromise = loadStripe(\"pk_test_51GskzHLWkJbcmCTlYQ1pisYlrbICWZ8bWVTNVIvU3hS6XYTYH3ls2PaxikdzE8zmJLr5VrsSp1gxTkqkMm5DV8Zf00VYAsg3zL\");\n\nAmplify.configure({\n  Auth: {\n    mandatorySignIn: true,\n    region: config.cognito.REGION,\n    userPoolId: config.cognito.USER_POOL_ID,\n    identityPoolId: config.cognito.IDENTITY_POOL_ID,\n    userPoolWebClientId: config.cognito.APP_CLIENT_ID\n  },\n  Storage: {\n    region: config.s3.REGION,\n    bucket: config.s3.BUCKET,\n    identityPoolId: config.cognito.IDENTITY_POOL_ID\n  },\n  API: {\n    endpoints: [\n      {\n        name: 'validation/coupon',\n        endpoint: config.apiGateway.URL,\n        region: config.apiGateway.REGION\n      },\n      {\n        name: 'validation/vat',\n        endpoint: config.apiGateway.URL,\n        region: config.apiGateway.REGION\n      },\n      {\n        name: 'billing/customer/create',\n        endpoint: config.apiGateway.URL,\n        region: config.apiGateway.REGION\n      },\n      {\n        name: 'billing/customer/update',\n        endpoint: config.apiGateway.URL,\n        region: config.apiGateway.REGION\n      },\n      {\n        name: 'billing/subscription/create',\n        endpoint: config.apiGateway.URL,\n        region: config.apiGateway.REGION\n      },\n      {\n        name: 'billing/subscription/list',\n        endpoint: config.apiGateway.URL,\n        region: config.apiGateway.REGION\n      },\n      /*\n      {\n        name: 'billing/subscription/update',\n        endpoint: config.apiGateway.URL,\n        region: config.apiGateway.REGION\n      },\n      */\n      {\n        name: 'billing/invoice/retry',\n        endpoint: config.apiGateway.URL,\n        region: config.apiGateway.REGION\n      }\n    ]\n  }\n});\n\nReactDOM.render(\n  <Router>\n    <Elements stripe={stripePromise}>\n      <App />\n    </Elements>\n  </Router>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}